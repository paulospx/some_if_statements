/*1461678701,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dhKWp"]); }

__d("CommentsPluginSentryAction",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONFIRM_POST_TO_PROFILE:"confirm_post_to_profile"};},null);
__d("DeveloperCommentsModerationSource",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={APP:"app",URL:"url"};},null);
__d('MentionResultsPropTypes',['React','SearchableEntry','SelectionState'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i={viewID:h.string.isRequired,selection:h.instanceOf(c('SelectionState')).isRequired,contextComponent:h.object.isRequired,mentionableEntries:h.array.isRequired,highlightedMentionable:h.instanceOf(c('SearchableEntry')),onMentionSelect:h.func.isRequired,onMentionHighlight:h.func.isRequired,onMentionRenderHighlight:h.func.isRequired};f.exports=i;},null);
__d('MentionsLayer.react',['Bootloader','Locale','MentionResultsPropTypes','React','areEqual'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=false,j=c('Locale').isRTL(),k,l,m,n,o=5,p=c('React').createClass({displayName:'MentionsLayer',propTypes:babelHelpers['extends']({},c('MentionResultsPropTypes'),{typeaheadView:h.func.isRequired,typeaheadViewProps:h.object,autoflip:h.bool,position:h.oneOf(['above','below'])}),getInitialState:function(){return {bootloaded:i};},componentWillMount:function(){if(!this.state.bootloaded)q(function(){this.isMounted()&&this.setState({bootloaded:true});}.bind(this));},_onMentionSelect:function(r,s){s.preventDefault();this.props.onMentionSelect(r,s);},shouldComponentUpdate:function(r,s){return (this.state.bootloaded!==s.bootloaded||!c('areEqual')(this.props.mentionableEntries,r.mentionableEntries)||this.props.highlightedMentionable!==r.highlightedMentionable||this.props.characterOffset!==r.characterOffset);},render:function(){if(!this.state.bootloaded)return null;var r=this.props.mentionableEntries,s=this.props.selection,t=s.isCollapsed()&&s.getHasFocus()&&r&&r.length,u=null,v=this.props.typeaheadViewProps,w=false;if(v&&v.positionAtContext){w=true;}else if(t)u=n(this.props.characterOffset,j);var x={};if(this.props.autoflip){x.ContextualLayerAutoFlip=l;x.ContextualLayerUpdateOnScroll=m;}var y=this.props.typeaheadView;return (c('React').createElement(k,{shown:t,context:this.props.contextComponent,contextBounds:u,containerWidthMatchContext:w,offsetY:o,position:this.props.position||'below',behaviors:x,shouldSetARIAProperties:false},c('React').createElement(y,{id:this.props.viewID,viewProps:this.props.typeaheadViewProps,highlightedEntry:this.props.highlightedMentionable,entries:r||[],onSelect:this._onMentionSelect,onHighlight:this.props.onMentionHighlight,onRenderHighlight:this.props.onMentionRenderHighlight})));}});function q(r){c('Bootloader').loadModules(["ContextualLayer.react","ContextualLayerAutoFlip","ContextualLayerUpdateOnScroll","getMentionableRect"],function(s,t,u,v){k=s;l=t;m=u;n=v;i=true;r();});}f.exports=p;},null);
__d('ActorBio.react',['fbt','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'ActorBio',propTypes:{stats:i.object.isRequired,preferredTypes:i.array.isRequired},renderLink:function(k){return 'url' in k?c('React').createElement('a',babelHelpers['extends']({},this.props,{href:k.url}),k.name):c('React').createElement('span',null,k.name);},renderItem:function(k,l){var m;switch(k){case 'employer':if('position' in l){m=h._("{position} at {employer}",[h.param('position',this.renderLink(l.position)),h.param('employer',this.renderLink(l))]);}else m=h._("Works at {employer}",[h.param('employer',this.renderLink(l))]);break;case 'mutual_friend':m=h._("Friends with {user}",[h.param('user',this.renderLink(l))]);break;default:return this.renderLink(l);}return c('React').createElement('span',null,m);},render:function(){var k=this.props.stats,l=this.props.preferredTypes;for(var m=0;m<l.length;m++)for(var n=0;n<l[m].length;n++){var o=l[m][n];if(o in k)return this.renderItem(o,k[o]);}return c('React').createElement('span',null);}});f.exports=j;},null);
__d('CompositeDraftDecorator',['immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').List,i='.';function j(m){this.$CompositeDraftDecorator1=m.slice();}j.prototype.getDecorations=function(m){var n=Array(m.getText().length).fill(null);this.$CompositeDraftDecorator1.forEach(function(o,p){var q=0,r=o.strategy;r(m,function(s,t){if(k(n,s,t)){l(n,s,t,p+i+q);q++;}});});return h(n);};j.prototype.getComponentForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].component;};j.prototype.getPropsForKey=function(m){var n=parseInt(m.split(i)[0],10);return this.$CompositeDraftDecorator1[n].props;};function k(m,n,o){for(var p=n;p<o;p++)if(m[p]!=null)return false;return true;}function l(m,n,o,p){for(var q=n;q<o;q++)m[q]=p;}f.exports=j;},null);
__d('EmoticonSpan.react',['cx','DraftEntity','React','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'EmoticonSpan',render:function(){var j=c('DraftEntity').get(this.props.entityKey),k=j.getData(),l=k.type,m=c('joinClasses')("_1ty6",'emoticon_'+l);return (c('React').createElement('span',{className:m,title:l,'data-offset-key':this.props.offsetKey},c('React').createElement('span',{className:"_5ukz"},this.props.children)));}});f.exports=i;},null);
__d('HashtagSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'HashtagSpan',render:function(){return (c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8n",spellCheck:false}),this.props.children));}});f.exports=i;},null);
__d('MentionSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'MentionSpan',render:function(){return (c('React').createElement('span',babelHelpers['extends']({},this.props,{'data-offset-key':this.props.offsetKey,className:"_5u8u",spellCheck:false}),this.props.children));}});f.exports=i;},null);
__d('WeakMentionSpan.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'WeakMentionSpan',render:function(){return (c('React').createElement('span',{'data-offset-key':this.props.offsetKey,className:"_whq",spellCheck:false},this.props.children));}});f.exports=i;},null);
__d('getEntityMatcher',['DraftEntity'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('DraftEntity').get;function i(j,k){var l=k||h;return function(m,n){m.findEntityRanges(function(o){var p=o.getEntity();return typeof p==='string'&&j(l(p));},n);};}f.exports=i;},null);
__d('getHashtagMatches',['getHashtagRegex'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('getHashtagRegex')();function i(j,k){var l=j.getText(),m,n,o,p;while((m=h.exec(l))!==null){n=m.index+m[1].length;o=m[2];p=m[3];k(n,n+o.length+p.length);}}f.exports=i;},null);
__d('getMentionsInputDecorator',['CompositeDraftDecorator','EmoticonSpan.react','HashtagSpan.react','MentionSpan.react','WeakMentionSpan.react','getEntityMatcher','getHashtagMatches'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h;function i(){if(!h)h=new (c('CompositeDraftDecorator'))([{strategy:c('getEntityMatcher')(function(j){var k=j.getData();return j.getType()==='MENTION'&&k&&k.isWeak;}),component:c('WeakMentionSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='MENTION';}),component:c('MentionSpan.react')},{strategy:c('getEntityMatcher')(function(j){return j.getType()==='EMOTICON';}),component:c('EmoticonSpan.react')},{strategy:c('getHashtagMatches'),component:c('HashtagSpan.react')}]);return h;}f.exports=i;},null);
__d('UFIAttachedMediaPreview.react',['cx','fbt','Arbiter','BootloadedComponent.react','CloseButton.react','DOMContainer.react','DOMVector','HTML','Image.react','LoadingIndicator.react','React','ReactDOM','UFIUIEvents','XUISpinner.react','JSResource'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=80,l='ufi_photo_preview_test_id',m=c('React').createClass({displayName:'UFIAttachedMediaPreview',propTypes:{attachedPhoto:j.object,attachedVideo:j.object,attachedSticker:j.object,onRemoveAttachedMediaPreviewClicked:j.func,onRemoveAttachedStickerPreview:j.func,subtitle:j.string,isLoadingPhoto:j.bool,videoFileURL:j.string,videoStatus:j.string,videoProgress:j.number},_height:0,_getScaledDimensions:function(n,o){var p,q,r;if(o>n){r=k/o;p=n*r;q=o*r;}else{r=k/n;p=n*r;q=o*r;}return {height:Math.round(p),width:Math.round(q)};},_checkHeightChange:function(){var n=c('ReactDOM').findDOMNode(this),o=n?c('DOMVector').getElementDimensions(n).y:0;if(o!==this._height){this._height=o;c('Arbiter').inform(c('UFIUIEvents').PhotoPreviewHeightChanged,{node:n});}},componentDidUpdate:function(){if(this.props.monitorHeight)this._checkHeightChange();},render:function(){var n=null,o=this.props.attachedPhoto||this.props.attachedSticker||this.props.attachedVideo;if(o&&this.props.attachedSticker){var p=this._getScaledDimensions(o.metadata.height,o.metadata.width),q=null,r=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){q=o.metadata.sprite_uri_2x;r=o.metadata.source_uri_2x;}else{q=o.metadata.sprite_uri;r=o.metadata.source_uri;}n=c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement(c('XUISpinner.react'),null),bootloadLoader:c('JSResource')('Sticker.react'),animationTrigger:'load_and_hover',frameCount:o.metadata.frameCount,frameRate:o.metadata.frameRate,framesPerCol:o.metadata.framesPerCol,framesPerRow:o.metadata.framesPerRow,spriteURI:q,sourceHeight:p.height,sourceURI:r,sourceWidth:p.width});}else if(o&&this.props.attachedPhoto){var s=o.markupPreview;if(s){if(c('HTML').isHTML(s.markup))s=c('HTML').replaceJSONWrapper(s.markup).getRootNode();n=c('React').createElement(c('DOMContainer.react'),{'data-testid':l},s);}else if(this.props.attachedPhoto&&this.props.attachedPhoto.metadata&&this.props.attachedPhoto.metadata.preview_uri)n=c('React').createElement('div',{style:{height:this.props.attachedPhoto.metadata.height}},c('React').createElement(c('Image.react'),{src:this.props.attachedPhoto.metadata.preview_uri}));}else if(this.props.isLoadingPhoto){n=c('React').createElement(c('LoadingIndicator.react'),{color:'white',className:'UFICommentPhotoAttachedPreviewLoadingIndicator',size:'medium'});}else if(this.props.videoStatus==='uploading'||this.props.attachedVideo&&this.props.videoStatus==='encoding'){n=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('OptimisticVideoComment.react'),bootloadPlaceholder:c('React').createElement('span',null),videoFileURL:this.props.videoFileURL,videoStatus:this.props.videoStatus,progress:this.props.videoProgress});}else if(o&&this.props.attachedVideo)n=c('React').createElement('div',{className:"_3f0q"},c('React').createElement(c('DOMContainer.react'),null,o.markup));var t=null,u=this.props.attachedSticker?this.props.onRemoveAttachedStickerPreview:this.props.onRemoveAttachedMediaPreviewClicked;if(n!=null){var v=null;if(this.props.attachedSticker){v=i._("Remove Sticker");}else if(this.props.attachedPhoto){v=i._("Remove Photo");}else if(this.props.attachedVideo)v=i._("Remove Video");t=c('React').createElement('div',{className:'UFICommentPhotoAttachedPreview pas'},n,c('React').createElement(c('CloseButton.react'),{tooltip:v,onClick:u}));}return t;}});f.exports=m;},null);
__d('DefaultDraftInlineStyle',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports={BOLD:{fontWeight:'bold'},CODE:{fontFamily:'monospace',wordWrap:'break-word'},ITALIC:{fontStyle:'italic'},STRIKETHROUGH:{textDecoration:'line-through'},UNDERLINE:{textDecoration:'underline'}};},null);
__d('ContentStateInlineStyle',['CharacterMetadata','immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').Map,i={add:function(k,l,m){return j(k,l,m,true);},remove:function(k,l,m){return j(k,l,m,false);}};function j(k,l,m,n){var o=k.getBlockMap(),p=l.getStartKey(),q=l.getStartOffset(),r=l.getEndKey(),s=l.getEndOffset(),t=o.skipUntil(function(u,v){return v===p;}).takeUntil(function(u,v){return v===r;}).concat(h([[r,o.get(r)]])).map(function(u,v){var w,x;if(p===r){w=q;x=s;}else{w=v===p?q:0;x=v===r?s:u.getLength();}var y=u.getCharacterList(),z;while(w<x){z=y.get(w);y=y.set(w,n?c('CharacterMetadata').applyStyle(z,m):c('CharacterMetadata').removeStyle(z,m));w++;}return u.set('characterList',y);});return k.merge({blockMap:o.merge(t),selectionBefore:l,selectionAfter:l});}f.exports=i;},null);
__d('applyEntityToContentBlock',['CharacterMetadata'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l){var m=i.getCharacterList();while(j<k){m=m.set(j,c('CharacterMetadata').applyEntity(m.get(j),l));j++;}return i.set('characterList',m);}f.exports=h;},null);
__d('applyEntityToContentState',['immutable','applyEntityToContentBlock'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=i.getBlockMap(),m=j.getStartKey(),n=j.getStartOffset(),o=j.getEndKey(),p=j.getEndOffset(),q=l.skipUntil(function(r,s){return s===m;}).takeUntil(function(r,s){return s===o;}).toOrderedMap().merge(c('immutable').OrderedMap([[o,l.get(o)]])).map(function(r,s){var t,u;if(m===o){t=n;u=p;}else{t=s===m?n:0;u=s===o?0:r.getLength();}return c('applyEntityToContentBlock')(r,t,u,k);});return i.merge({blockMap:l.merge(q),selectionBefore:j,selectionAfter:j});}f.exports=h;},null);
__d('DraftEntitySegments',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRemovalRange:function(i,j,k,l,m){var n=k.split(' ');n=n.map(function(x,y){if(m==='forward'){if(y>0)return ' '+x;}else if(y<n.length-1)return x+' ';return x;});var o=l,p,q,r=null,s=null;for(var t=0;t<n.length;t++){q=n[t];p=o+q.length;if(i<p&&o<j){if(r!==null){s=p;}else{r=o;s=p;}}else if(r!==null)break;o=p;}var u=l+k.length,v=r===l,w=s===u;if(!v&&w||v&&!w)if(m==='forward'){if(s!==u)s++;}else if(r!==l)r--;return {start:r,end:s};}};f.exports=h;},null);
__d('getRangesForDraftEntity',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){var l=[];j.findEntityRanges(function(m){return m.getEntity()===k;},function(m,n){l.push({start:m,end:n});});!!!l.length?h(0):void 0;return l;}f.exports=i;},null);
__d('getCharacterRemovalRange',['invariant','DraftEntity','DraftEntitySegments','getRangesForDraftEntity'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k,l){var m=k.getStartOffset(),n=k.getEndOffset(),o=j.getEntityAt(m);if(!o)return k;var p=c('DraftEntity').get(o),q=p.getMutability();if(q==='MUTABLE')return k;var r=c('getRangesForDraftEntity')(j,o).filter(function(u){return m<u.end&&n>u.start;});!(r.length==1)?h(0):void 0;var s=r[0];if(q==='IMMUTABLE')return k.merge({anchorOffset:s.start,focusOffset:s.end,isBackward:false});var t=c('DraftEntitySegments').getRemovalRange(m,n,j.getText().slice(s.start,s.end),s.start,l);return k.merge({anchorOffset:t.start,focusOffset:t.end,isBackward:false});}f.exports=i;},null);
__d('removeEntitiesAtEdges',['invariant','CharacterMetadata','DraftEntity','findRangesImmutable'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l,m){var n=l.getBlockMap(),o={},p=m.getStartKey(),q=m.getStartOffset(),r=n.get(p),s=k(r,q);if(s!==r)o[p]=s;var t=m.getEndKey(),u=m.getEndOffset(),v=n.get(t);if(p===t)v=s;var w=k(v,u);if(w!==v)o[t]=w;if(!Object.keys(o).length)return l.set('selectionAfter',m);return l.merge({blockMap:n.merge(o),selectionAfter:m});}function j(l,m,n){var o;c('findRangesImmutable')(l,function(p,q){return p.getEntity()===q.getEntity();},function(p){return p.getEntity()===m;},function(p,q){if(p<=n&&q>=n)o={start:p,end:q};});!(typeof o==='object')?h(0):void 0;return o;}function k(l,m){var n=l.getCharacterList(),o=m>0?n.get(m-1):undefined,p=m<n.count()?n.get(m):undefined,q=o?o.getEntity():undefined,r=p?p.getEntity():undefined;if(r&&r===q){var s=c('DraftEntity').get(r);if(s.getMutability()!=='MUTABLE'){var t=j(n,r,m),u=t.start,v=t.end,w;while(u<v){w=n.get(u);n=n.set(u,c('CharacterMetadata').applyEntity(w,null));u++;}return l.set('characterList',n);}}return l;}f.exports=i;},null);
__d('getContentStateFragment',['generateRandomKey','removeEntitiesAtEdges'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=j.getStartKey(),l=j.getStartOffset(),m=j.getEndKey(),n=j.getEndOffset(),o=c('removeEntitiesAtEdges')(i,j),p=o.getBlockMap(),q=p.keySeq(),r=q.indexOf(k),s=q.indexOf(m)+1,t=p.slice(r,s).map(function(u,v){var w=c('generateRandomKey')(),x=u.getText(),y=u.getCharacterList();if(k===m)return u.merge({key:w,text:x.slice(l,n),characterList:y.slice(l,n)});if(v===k)return u.merge({key:w,text:x.slice(l),characterList:y.slice(l)});if(v===m)return u.merge({key:w,text:x.slice(0,n),characterList:y.slice(0,n)});return u.set('key',w);});return t.toOrderedMap();}f.exports=h;},null);
__d('insertIntoList',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){if(k===i.count()){j.forEach(function(n){i=i.push(n);});}else if(k===0){j.reverse().forEach(function(n){i=i.unshift(n);});}else{var l=i.slice(0,k),m=i.slice(k);i=l.concat(j,m).toList();}return i;}f.exports=h;},null);
__d('insertFragmentIntoContentState',['invariant','BlockMapBuilder','generateRandomKey','insertIntoList'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k,l){!k.isCollapsed()?h(0):void 0;var m=k.getStartKey(),n=k.getStartOffset(),o=j.getBlockMap(),p=l.size,q,r;if(p===1){var s=o.get(m),t=l.first(),u=s.getText(),v=s.getCharacterList(),w=s.merge({text:u.slice(0,n)+t.getText()+u.slice(n),characterList:c('insertIntoList')(v,t.getCharacterList(),n)});o=o.set(m,w);q=m;r=n+t.getText().length;return j.merge({blockMap:o.set(m,w),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}var x=[];j.getBlockMap().forEach(function(y,z){if(z!==m){x.push(y);return;}var aa=y.getText(),ba=y.getCharacterList(),ca=aa.length,da=aa.slice(0,n),ea=ba.slice(0,n),fa=l.first(),ga=y.merge({text:da+fa.getText(),characterList:ea.concat(fa.getCharacterList())});x.push(ga);l.slice(1,p-1).forEach(function(la){x.push(la.set('key',c('generateRandomKey')()));});var ha=aa.slice(n,ca),ia=ba.slice(n,ca),ja=l.last();q=c('generateRandomKey')();var ka=ja.merge({key:q,text:ja.getText()+ha,characterList:ja.getCharacterList().concat(ia)});x.push(ka);});r=l.last().getLength();return j.merge({blockMap:c('BlockMapBuilder').createFromArray(x),selectionBefore:k,selectionAfter:k.merge({anchorKey:q,anchorOffset:r,focusKey:q,focusOffset:r,isBackward:false})});}f.exports=i;},null);
__d('insertTextIntoContentState',['invariant','immutable','insertIntoList'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('immutable').Repeat;function j(k,l,m,n){!l.isCollapsed()?h(0):void 0;var o=m.length;if(!o)return k;var p=k.getBlockMap(),q=l.getStartKey(),r=l.getStartOffset(),s=p.get(q),t=s.getText(),u=s.merge({text:t.slice(0,r)+m+t.slice(r,s.getLength()),characterList:c('insertIntoList')(s.getCharacterList(),i(n,o).toList(),r)}),v=r+o;return k.merge({blockMap:p.set(q,u),selectionAfter:l.merge({anchorOffset:v,focusOffset:v})});}f.exports=j;},null);
__d('removeRangeFromContentState',['immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){if(k.isCollapsed())return j;var l=j.getBlockMap(),m=k.getStartKey(),n=k.getStartOffset(),o=k.getEndKey(),p=k.getEndOffset(),q=l.get(m),r=l.get(o),s;if(q===r){s=i(q.getCharacterList(),n,p);}else s=q.getCharacterList().slice(0,n).concat(r.getCharacterList().slice(p));var t=q.merge({text:q.getText().slice(0,n)+r.getText().slice(p),characterList:s}),u=l.toSeq().skipUntil(function(v,w){return w===m;}).takeUntil(function(v,w){return w===o;}).concat(c('immutable').Map([[o,null]])).map(function(v,w){return w===m?t:null;});l=l.merge(u).filter(function(v){return !!v;});return j.merge({blockMap:l,selectionBefore:k,selectionAfter:k.merge({anchorKey:m,anchorOffset:n,focusKey:m,focusOffset:n,isBackward:false})});}function i(j,k,l){if(k===0){while(k<l){j=j.shift();k++;}}else if(l===j.count()){while(l>k){j=j.pop();l--;}}else{var m=j.slice(0,k),n=j.slice(l);j=m.concat(n).toList();}return j;}f.exports=h;},null);
__d('setBlockTypeForContentState',['immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.getStartKey(),m=j.getEndKey(),n=i.getBlockMap(),o=n.toSeq().skipUntil(function(p,q){return q===l;}).takeUntil(function(p,q){return q===m;}).concat(c('immutable').Map([[m,n.get(m)]])).map(function(p){return p.merge({type:k,depth:0});});return i.merge({blockMap:n.merge(o),selectionBefore:j,selectionAfter:j});}f.exports=h;},null);
__d('splitBlockInContentState',['invariant','generateRandomKey'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){!k.isCollapsed()?h(0):void 0;var l=k.getAnchorKey(),m=k.getAnchorOffset(),n=j.getBlockMap(),o=n.get(l),p=o.getText(),q=o.getCharacterList(),r=o.merge({text:p.slice(0,m),characterList:q.slice(0,m)}),s=c('generateRandomKey')(),t=r.merge({key:s,text:p.slice(m),characterList:q.slice(m)}),u=n.toSeq().takeUntil(function(x){return x===o;}),v=n.toSeq().skipUntil(function(x){return x===o;}).rest(),w=u.concat([[r.getKey(),r],[t.getKey(),t]],v).toOrderedMap();return j.merge({blockMap:w,selectionBefore:k,selectionAfter:k.merge({anchorKey:s,anchorOffset:0,focusKey:s,focusOffset:0,isBackward:false})});}f.exports=i;},null);
__d('DraftModifier',['invariant','CharacterMetadata','ContentStateInlineStyle','immutable','applyEntityToContentState','getCharacterRemovalRange','getContentStateFragment','insertFragmentIntoContentState','insertTextIntoContentState','removeEntitiesAtEdges','removeRangeFromContentState','setBlockTypeForContentState','splitBlockInContentState'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('immutable').OrderedSet,j={replaceText:function(k,l,m,n,o){var p=c('removeEntitiesAtEdges')(k,l),q=c('removeRangeFromContentState')(p,l),r=c('CharacterMetadata').create({style:n||i(),entity:o||null});return c('insertTextIntoContentState')(q,q.getSelectionAfter(),m,r);},insertText:function(k,l,m,n,o){!l.isCollapsed()?h(0):void 0;return j.replaceText(k,l,m,n,o);},moveText:function(k,l,m){var n=c('getContentStateFragment')(k,l),o=j.removeRange(k,l,'backward');return j.replaceWithFragment(o,m,n);},replaceWithFragment:function(k,l,m){var n=c('removeEntitiesAtEdges')(k,l),o=c('removeRangeFromContentState')(n,l);return c('insertFragmentIntoContentState')(o,o.getSelectionAfter(),m);},removeRange:function(k,l,m){if(l.getAnchorKey()===l.getFocusKey()){var n=l.getAnchorKey(),o=l.getStartOffset(),p=l.getEndOffset(),q=k.getBlockForKey(n),r=q.getEntityAt(o),s=q.getEntityAt(p-1);if(r&&r===s){var t=c('getCharacterRemovalRange')(q,l,m);return c('removeRangeFromContentState')(k,t);}}var u=c('removeEntitiesAtEdges')(k,l);return c('removeRangeFromContentState')(u,l);},splitBlock:function(k,l){var m=c('removeEntitiesAtEdges')(k,l),n=c('removeRangeFromContentState')(m,l);return c('splitBlockInContentState')(n,n.getSelectionAfter());},applyInlineStyle:function(k,l,m){return c('ContentStateInlineStyle').add(k,l,m);},removeInlineStyle:function(k,l,m){return c('ContentStateInlineStyle').remove(k,l,m);},setBlockType:function(k,l,m){return c('setBlockTypeForContentState')(k,l,m);},applyEntity:function(k,l,m){var n=c('removeEntitiesAtEdges')(k,l);return c('applyEntityToContentState')(n,l,m);}};f.exports=j;},null);
__d('getEntityKeyForSelection',['DraftEntity'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j,k){var l;if(k.isCollapsed()){var m=k.getAnchorKey(),n=k.getAnchorOffset();if(n>0){l=j.getBlockForKey(m).getEntityAt(n-1);return i(l);}return null;}var o=k.getStartKey(),p=k.getStartOffset(),q=j.getBlockForKey(o);l=p===q.getLength()?null:q.getEntityAt(p);return i(l);}function i(j){if(j){var k=c('DraftEntity').get(j);return k.getMutability()==='MUTABLE'?j:null;}return null;}f.exports=h;},null);
__d('isSelectionAtLeafStart',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getAnchorKey(),l=i.getBlockTree(k),m=j.getStartOffset(),n=false;l.some(function(o){if(m===o.get('start')){n=true;return true;}if(m<o.get('end'))return o.get('leaves').some(function(p){var q=p.get('start');if(m===q){n=true;return true;}if(m<q)return false;});return false;});return n;}f.exports=h;},null);
__d('DraftEditorCompositionHandler',['DraftModifier','EditorState','Keys','getEntityKeyForSelection','isSelectionAtLeafStart'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=20,i=false,j=false,k='',l={onBeforeInput:function(m){k=(k||'')+m.data;},onCompositionStart:function(){j=true;},onCompositionEnd:function(){i=false;j=false;setTimeout(function(){if(!i)l.resolveComposition.call(this);}.bind(this),h);},onKeyDown:function(m){if(m.which===c('Keys').RIGHT||m.which===c('Keys').LEFT)m.preventDefault();},onKeyPress:function(m){if(m.which===c('Keys').RETURN)m.preventDefault();},resolveComposition:function(){if(j)return;i=true;var m=k;k='';var n=c('EditorState').set(this.props.editorState,{inCompositionMode:false}),o=n.getCurrentInlineStyle(),p=c('getEntityKeyForSelection')(n.getCurrentContent(),n.getSelection()),q=!m||c('isSelectionAtLeafStart')(n)||o.size>0||p!==null;if(q)this.restoreEditorDOM();this.exitCurrentMode();this.removeRenderGuard();if(m){var r=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),m,o,p);this.update(c('EditorState').push(n,r,'insert-characters'));return;}if(q)this.update(c('EditorState').set(n,{nativelyRenderedContent:null,forceSelection:true}));}};f.exports=l;},null);
__d('DraftEditorTextNode.react',['React','ReactDOM','UserAgent'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j=c('UserAgent').isBrowser('IE <= 11');function k(o){return j?o.textContent==='\n':o.tagName==='BR';}var l=j?c('React').createElement('span',{key:'A','data-text':'true'},'\n'):c('React').createElement('br',{key:'A','data-text':'true'}),m=j?c('React').createElement('span',{key:'B','data-text':'true'},'\n'):c('React').createElement('br',{key:'B','data-text':'true'});h=babelHelpers.inherits(n,c('React').Component);i=h&&h.prototype;function n(o){i.constructor.call(this,o);this.$DraftEditorTextNode1=false;}n.prototype.shouldComponentUpdate=function(o){var p=c('ReactDOM').findDOMNode(this),q=o.children==='';if(q)return !k(p);return p.textContent!==o.children;};n.prototype.componentWillUpdate=function(){this.$DraftEditorTextNode1=!this.$DraftEditorTextNode1;};n.prototype.render=function(){if(this.props.children==='')return this.$DraftEditorTextNode1?l:m;return (c('React').createElement('span',{key:this.$DraftEditorTextNode1?'A':'B','data-text':'true'},this.props.children));};f.exports=n;},null);
__d('setDraftEditorSelection',['containsNode','getActiveElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(k,l,m,n,o){if(!c('containsNode')(document.documentElement,l))return;var p=b.getSelection(),q=k.getAnchorKey(),r=k.getAnchorOffset(),s=k.getFocusKey(),t=k.getFocusOffset(),u=k.getIsBackward();if(!p.extend&&u){var v=q,w=r;q=s;r=t;s=v;t=w;u=false;}var x=q===m&&n<=r&&o>=r,y=s===m&&n<=t&&o>=t;if(x&&y){p.removeAllRanges();j(p,l,r-n);i(p,l,t-n);return;}if(!u){if(x){p.removeAllRanges();j(p,l,r-n);}if(y)i(p,l,t-n);}else{if(y){p.removeAllRanges();j(p,l,t-n);}if(x){var z=p.focusNode,aa=p.focusOffset;p.removeAllRanges();j(p,l,r-n);i(p,z,aa);}}}function i(k,l,m){if(k.extend&&c('containsNode')(c('getActiveElement')(),l)){k.extend(l,m);}else{var n=k.getRangeAt(0);n.setEnd(l,m);k.addRange(n.cloneRange());}}function j(k,l,m){var n=document.createRange();n.setStart(l,m);k.addRange(n);}f.exports=h;},null);
__d('DraftEditorLeaf.react',['DraftEditorTextNode.react','React','ReactDOM','SelectionState','setDraftEditorSelection'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.prototype.$DraftEditorLeaf1=function(){var k=this.props.selection;if(k==null||!k.getHasFocus())return;var l=this.props,m=l.blockKey,n=l.start,o=l.text,p=n+o.length;if(!k.hasEdgeWithin(m,n,p))return;var q=c('ReactDOM').findDOMNode(this),r=q.firstChild,s=void 0;if(r.nodeType===Node.TEXT_NODE){s=r;}else if(r.tagName==='BR'){s=q;}else s=r.firstChild;c('setDraftEditorSelection')(k,s,m,n,p);};j.prototype.shouldComponentUpdate=function(k){return (c('ReactDOM').findDOMNode(this.refs.leaf).textContent!==k.text||k.styleSet!==this.props.styleSet||k.forceSelection);};j.prototype.componentDidUpdate=function(){this.$DraftEditorLeaf1();};j.prototype.componentDidMount=function(){this.$DraftEditorLeaf1();};j.prototype.render=function(){var k=this.props.text;if(k.endsWith('\n')&&this.props.isLast)k+='\n';var l=this.props,m=l.customStyleMap,n=l.offsetKey,o=l.styleSet,p=o.reduce(function(q,r){var s={},t=m[r];if(t!==undefined&&q.textDecoration!==t.textDecoration)s.textDecoration=[q.textDecoration,t.textDecoration].join(' ');return Object.assign(q,t,s);},{});return (c('React').createElement('span',{'data-offset-key':n,ref:'leaf',style:p},c('React').createElement(c('DraftEditorTextNode.react'),null,k)));};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('DraftOffsetKey',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='-',i={encode:function(j,k,l){return j+h+k+h+l;},decode:function(j){var k=j.split(h),l=k[0],m=k[1],n=k[2];return {blockKey:l,decoratorKey:parseInt(m,10),leafKey:parseInt(n,10)};}};f.exports=i;},null);
__d('DraftEditorBlock.react',['cx','ContentBlock','DraftEditorLeaf.react','DraftOffsetKey','React','ReactDOM','Scroll','SelectionState','Style','UnicodeBidi','UnicodeBidiDirection','getElementPosition','getScrollPosition','getViewportDimensions','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=10;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(n){return (this.props.block!==n.block||this.props.tree!==n.tree||this.props.direction!==n.direction||m(n.selection,n.block.getKey())&&n.forceSelection);};l.prototype.componentDidMount=function(){var n=this.props.selection,o=n.getEndKey();if(!n.getHasFocus()||o!==this.props.block.getKey())return;var p=c('ReactDOM').findDOMNode(this),q=c('Style').getScrollParent(p),r=c('getScrollPosition')(q),s;if(q===window){var t=c('getElementPosition')(p),u=t.y+t.height,v=c('getViewportDimensions')().height;s=u-v;if(s>0)window.scrollTo(r.x,r.y+s+k);}else{var w=p.offsetHeight+p.offsetTop,x=q.offsetHeight+r.y;s=w-x;if(s>0)c('Scroll').setTop(q,c('Scroll').getTop(q)+s+k);}};l.prototype.$DraftEditorBlock1=function(){var n=this.props.block,o=n.getKey(),p=n.getText(),q=this.props.tree.size-1,r=m(this.props.selection,o);return this.props.tree.map(function(s,t){var u=s.get('leaves'),v=u.size-1,w=u.map(function(ea,fa){var ga=c('DraftOffsetKey').encode(o,t,fa),ha=ea.get('start'),ia=ea.get('end');return (c('React').createElement(c('DraftEditorLeaf.react'),{key:ga,offsetKey:ga,blockKey:o,start:ha,selection:r?this.props.selection:undefined,forceSelection:this.props.forceSelection,text:p.slice(ha,ia),styleSet:n.getInlineStyleAt(ha),customStyleMap:this.props.customStyleMap,isLast:t===q&&fa===v}));}.bind(this)).toArray(),x=s.get('decoratorKey');if(x==null)return w;if(!this.props.decorator)return w;var y=c('nullthrows')(this.props.decorator),z=y.getComponentForKey(x);if(!z)return w;var aa=y.getPropsForKey(x),ba=c('DraftOffsetKey').encode(o,t,0),ca=p.slice(u.first().get('start'),u.last().get('end')),da=c('UnicodeBidiDirection').getHTMLDirIfDifferent(c('UnicodeBidi').getDirection(ca),this.props.direction);return (c('React').createElement(z,babelHelpers['extends']({},aa,{decoratedText:ca,dir:da,key:ba,entityKey:n.getEntityAt(s.get('start')),offsetKey:ba}),w));}.bind(this)).toArray();};l.prototype.render=function(){var n=this.props,o=n.direction,p=n.offsetKey,q="_1mf"+(o==='LTR'?' '+"_1mj":'')+(o==='RTL'?' '+"_1mk":'');return (c('React').createElement('div',{'data-offset-key':p,className:q},this.$DraftEditorBlock1()));};function l(){i.apply(this,arguments);}function m(n,o){return (n.getAnchorKey()===o||n.getFocusKey()===o);}f.exports=l;},null);
__d('getElementForBlockType',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){switch(i){case 'header-one':return 'h1';case 'header-two':return 'h2';case 'header-three':return 'h3';case 'header-four':return 'h4';case 'header-five':return 'h5';case 'header-six':return 'h6';case 'unordered-list-item':case 'ordered-list-item':return 'li';case 'blockquote':return 'blockquote';case 'atomic':return 'figure';default:return 'div';}}f.exports=h;},null);
__d('getWrapperTemplateForBlockType',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').createElement('ul',{className:"_1bv0"}),j=c('React').createElement('ol',{className:"_1bv1"}),k=c('React').createElement('pre',{className:"_1bv2"});function l(m){switch(m){case 'unordered-list-item':return i;case 'ordered-list-item':return j;case 'code-block':return k;default:return null;}}f.exports=l;},null);
__d('DraftEditorContents.react',['cx','DraftEditorBlock.react','DraftOffsetKey','EditorState','React','getElementForBlockType','getWrapperTemplateForBlockType','joinClasses','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(m){var n=this.props.editorState,o=m.editorState,p=n.getDirectionMap(),q=o.getDirectionMap();if(p!==q)return true;var r=n.getSelection().getHasFocus(),s=o.getSelection().getHasFocus();if(r!==s)return true;var t=o.getNativelyRenderedContent(),u=n.isInCompositionMode(),v=o.isInCompositionMode();if(n===o||t!==null&&o.getCurrentContent()===t||u&&v)return false;var w=n.getCurrentContent(),x=o.getCurrentContent(),y=n.getDecorator(),z=o.getDecorator();return (u!==v||w!==x||y!==z||o.mustForceSelection());};k.prototype.render=function(){var m=this.props,n=m.blockRendererFn,o=m.customStyleMap,p=m.editorState,q=p.getCurrentContent(),r=p.getSelection(),s=p.mustForceSelection(),t=p.getDecorator(),u=c('nullthrows')(p.getDirectionMap()),v=q.getBlocksAsArray(),w=[],x=null,y=null,z=null,aa=void 0,ba=void 0,ca=void 0,da=void 0,ea=void 0,fa=void 0,ga=void 0;for(var ha=0;ha<v.length;ha++){ba=v[ha];ca=ba.getKey();da=ba.getType();var ia=n(ba),ja=void 0,ka=void 0,la=void 0;if(ia){ja=ia.component;ka=ia.props;la=ia.editable;}var ma=u.get(ca),na=c('DraftOffsetKey').encode(ca,0,0),oa={block:ba,blockProps:ka,customStyleMap:o,decorator:t,direction:ma,forceSelection:s,key:ca,offsetKey:na,selection:r,tree:p.getBlockTree(ca)};ga=c('getWrapperTemplateForBlockType')(da);var pa=ga!==y,qa=c('getElementForBlockType')(da),ra=ba.getDepth(),sa=this.props.blockStyleFn(ba);if(qa==='li'){var ta=pa||z===null||ra>z;sa=c('joinClasses')(sa,l(da,ra,ta,ma));}var ua=ja||c('DraftEditorBlock.react');fa={className:sa,'data-block':true,'data-editor':this.props.editorKey,'data-offset-key':na,key:ca};if(la!==undefined)fa=babelHelpers['extends']({},fa,{contentEditable:la,suppressContentEditableWarning:true});ea=c('React').createElement(qa,fa,c('React').createElement(ua,oa));if(ga){if(pa){aa=[];x=c('React').cloneElement(ga,{key:ca+'-wrap','data-offset-key':na},aa);y=ga;w.push(x);}z=ba.getDepth();c('nullthrows')(aa).push(ea);}else{aa=null;x=null;y=null;z=null;w.push(ea);}}return c('React').createElement('div',{'data-contents':'true'},w);};function k(){i.apply(this,arguments);}function l(m,n,o,p){return (m==='unordered-list-item'?"_3kpz":'')+(m==='ordered-list-item'?' '+"_3kp_":'')+(o?' '+"_3kq0":'')+(n===0?' '+"_3kq1":'')+(n===1?' '+"_3kq2":'')+(n===2?' '+"_3kq3":'')+(n===3?' '+"_3kq4":'')+(n===4?' '+"_3kq5":'')+(p==='LTR'?' '+"_3kq6":'')+(p==='RTL'?' '+"_3kq7":'');}f.exports=k;},null);
__d('getSelectionOffsetKeyForNode',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){return i instanceof Element?i.getAttribute('data-offset-key'):null;}f.exports=h;},null);
__d('findAncestorOffsetKey',['getSelectionOffsetKeyForNode'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){while(i&&i!==document.documentElement){var j=c('getSelectionOffsetKeyForNode')(i);if(j!=null)return j;i=i.parentNode;}return null;}f.exports=h;},null);
__d('getTextContentFromFiles',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=/\.textClipping$/,i={'text/plain':true,'text/html':true,'text/rtf':true},j=5000;function k(m,n){var o=0,p=[];m.forEach(function(q){l(q,function(r){o++;r&&p.push(r.slice(0,j));if(o==m.length)n(p.join('\r'));});});}function l(m,n){if(!b.FileReader||m.type&&!(m.type in i)){n('');return;}if(m.type===''){var o='';if(h.test(m.name))o=m.name.replace(h,'');n(o);return;}var p=new FileReader();p.onload=function(){n(p.result);};p.onerror=function(){n('');};p.readAsText(m);}f.exports=k;},null);
__d('getUpdatedSelectionState',['DraftOffsetKey','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m){var n=c('nullthrows')(i.getSelection()),o=c('DraftOffsetKey').decode(j),p=o.blockKey,q=i.getBlockTree(p).getIn([o.decoratorKey,'leaves',o.leafKey]),r=c('DraftOffsetKey').decode(l),s=r.blockKey,t=i.getBlockTree(s).getIn([r.decoratorKey,'leaves',r.leafKey]),u=q.get('start'),v=t.get('start'),w=q?u+k:null,x=t?v+m:null,y=n.getAnchorKey()===p&&n.getAnchorOffset()===w&&n.getFocusKey()===s&&n.getFocusOffset()===x;if(y)return n;var z=false;if(p===s){var aa=q.get('end'),ba=t.get('end');if(v===u&&ba===aa){z=m<k;}else z=v<u;}else{var ca=i.getCurrentContent().getBlockMap().keySeq().skipUntil(function(da){return da===p||da===s;}).first();z=ca===s;}return n.merge({anchorKey:p,anchorOffset:w,focusKey:s,focusOffset:x,isBackward:z});}f.exports=h;},null);
__d('DraftEditorDragHandler',['DataTransfer','DraftModifier','EditorState','findAncestorOffsetKey','getTextContentFromFiles','getUpdatedSelectionState','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(event,l){var m=null,n=null;if(document.caretRangeFromPoint){var o=document.caretRangeFromPoint(event.x,event.y);m=o.startContainer;n=o.startOffset;}else if(event.rangeParent){m=event.rangeParent;n=event.rangeOffset;}else return null;m=c('nullthrows')(m);n=c('nullthrows')(n);var p=c('nullthrows')(c('findAncestorOffsetKey')(m));return c('getUpdatedSelectionState')(l,p,n,p,n);}var i={onDragEnd:function(){this.exitCurrentMode();},onDrop:function(l){var m=new (c('DataTransfer'))(l.nativeEvent.dataTransfer),n=this.props.editorState,o=h(l.nativeEvent,n);l.preventDefault();this.exitCurrentMode();if(o==null)return;var p=m.getFiles();if(p.length>0){if(this.props.handleDroppedFiles&&this.props.handleDroppedFiles(o,p))return;c('getTextContentFromFiles')(p,function(r){r&&this.update(k(n,c('nullthrows')(o),r));}.bind(this));return;}var q=this._internalDrag?'internal':'external';if(this.props.handleDrop&&this.props.handleDrop(o,m,q))return;if(this._internalDrag){this.update(j(n,o));return;}this.update(k(n,o,m.getText()));}};function j(l,m){var n=c('DraftModifier').moveText(l.getCurrentContent(),l.getSelection(),m);return c('EditorState').push(l,n,'insert-fragment');}function k(l,m,n){var o=c('DraftModifier').insertText(l.getCurrentContent(),m,n,l.getCurrentInlineStyle());return c('EditorState').push(l,o,'insert-fragment');}f.exports=i;},null);
__d('editOnBeforeInput',['BlockTree','DraftModifier','EditorState','UserAgent','getEntityKeyForSelection','isSelectionAtLeafStart','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='\'',i='\/',j=c('UserAgent').isBrowser('Firefox');function k(n){return (j&&(n==h||n==i));}function l(n,o,p,q){var r=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),o,p,q);return c('EditorState').push(n,r,'insert-characters');}function m(n){var o=n.data;if(!o)return;if(this.props.handleBeforeInput&&this.props.handleBeforeInput(o)){n.preventDefault();return;}var p=this.props.editorState,q=p.getSelection();if(!q.isCollapsed()){n.preventDefault();this.update(l(p,o,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection())));return;}var r=!c('isSelectionAtLeafStart')(p),s=l(p,o,p.getCurrentInlineStyle(),c('getEntityKeyForSelection')(p.getCurrentContent(),p.getSelection()));if(!r){n.preventDefault();this.update(s);return;}var t=q.getAnchorKey(),u=p.getBlockTree(t),v=c('BlockTree').getFingerprint(u),w=c('BlockTree').getFingerprint(s.getBlockTree(t));if(k(o)||v!==w||c('nullthrows')(s.getDirectionMap()).get(t)!==c('nullthrows')(p.getDirectionMap()).get(t)){n.preventDefault();}else s=c('EditorState').set(s,{nativelyRenderedContent:s.getCurrentContent()});this.update(s);}f.exports=m;},null);
__d('editOnBlur',['EditorState','UserAgent','getActiveElement'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isEngine('WebKit');function i(j){if(h&&c('getActiveElement')()===document.body)b.getSelection().removeAllRanges();var k=this.props.editorState,l=k.getSelection();if(!l.getHasFocus())return;var m=l.set('hasFocus',false);this.props.onBlur&&this.props.onBlur(j);this.update(c('EditorState').acceptSelection(k,m));}f.exports=i;},null);
__d('editOnCompositionStart',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.setRenderGuard();this.setMode('composite');this.update(c('EditorState').set(this.props.editorState,{inCompositionMode:true}));}f.exports=h;},null);
__d('getFragmentFromSelection',['getContentStateFragment'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection();if(!j.isCollapsed())return c('getContentStateFragment')(i.getCurrentContent(),j);}f.exports=h;},null);
__d('editOnCopy',['getFragmentFromSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=this.props.editorState,k=j.getSelection();if(k.isCollapsed()){i.preventDefault();return;}this.setClipboard(c('getFragmentFromSelection')(this.props.editorState));}f.exports=h;},null);
__d('editOnCut',['DraftModifier','EditorState','Style','getFragmentFromSelection','getScrollPosition'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k=this.props.editorState,l=k.getSelection();if(l.isCollapsed()){j.preventDefault();return;}var m=c('Style').getScrollParent(j.target),n=c('getScrollPosition')(m),o=n.x,p=n.y,q=c('getFragmentFromSelection')(k);this.setClipboard(q);this.setRenderGuard();this.setMode('cut');setTimeout(function(){this.restoreEditorDOM({x:o,y:p});this.removeRenderGuard();this.exitCurrentMode();this.update(i(k));}.bind(this),0);}function i(j){var k=c('DraftModifier').removeRange(j.getCurrentContent(),j.getSelection(),'forward');return c('EditorState').push(j,k,'remove-range');}f.exports=h;},null);
__d('editOnDragOver',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){this._internalDrag=false;this.setMode('drag');i.preventDefault();}f.exports=h;},null);
__d('editOnDragStart',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this._internalDrag=true;this.setMode('drag');}f.exports=h;},null);
__d('editOnFocus',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=this.props.editorState,k=j.getSelection();if(k.getHasFocus())return;var l=k.set('hasFocus',true);this.props.onFocus&&this.props.onFocus(i);this.update(c('EditorState').forceSelection(j,l));}f.exports=h;},null);
__d('editOnInput',['DraftModifier','DraftOffsetKey','EditorState','UserAgent','findAncestorOffsetKey','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isEngine('Gecko'),i='\n\n';function j(){var k=b.getSelection(),l=k.anchorNode,m=k.isCollapsed;if(l.nodeType!==Node.TEXT_NODE)return;var n=l.textContent,o=this.props.editorState,p=c('nullthrows')(c('findAncestorOffsetKey')(l)),q=c('DraftOffsetKey').decode(p),r=q.blockKey,s=q.decoratorKey,t=q.leafKey,u=o.getBlockTree(r).getIn([s,'leaves',t]),v=u.start,w=u.end,x=o.getCurrentContent(),y=x.getBlockForKey(r),z=y.getText().slice(v,w);if(n.endsWith(i))n=n.slice(0,-1);if(n===z)return;var aa=o.getSelection(),ba=aa.merge({anchorOffset:v,focusOffset:w,isBackward:false}),ca=c('DraftModifier').replaceText(x,ba,n,y.getInlineStyleAt(v)),da,ea,fa,ga;if(h){da=k.anchorOffset;ea=k.focusOffset;fa=v+Math.min(da,ea);ga=fa+Math.abs(da-ea);da=fa;ea=ga;}else{var ha=n.length-z.length;fa=aa.getStartOffset();ga=aa.getEndOffset();da=m?ga+ha:fa;ea=ga+ha;}var ia=ca.merge({selectionBefore:x.getSelectionAfter(),selectionAfter:aa.merge({anchorOffset:da,focusOffset:ea})});this.update(c('EditorState').push(o,ia,'spellcheck-change'));}f.exports=j;},null);
__d('KeyBindingUtil',['UserAgent'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isPlatform('Mac OS X'),i={isCtrlKeyCommand:function(j){return !!j.ctrlKey&&!j.altKey;},isOptionKeyCommand:function(j){return h&&j.altKey;},hasCommandModifier:function(j){return h?!!j.metaKey&&!j.altKey:i.isCtrlKeyCommand(j);}};f.exports=i;},null);
__d('SecondaryClipboard',['DraftModifier','EditorState','getContentStateFragment','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=null,i={cut:function(j){var k=j.getCurrentContent(),l=j.getSelection(),m=null;if(l.isCollapsed()){var n=l.getAnchorKey(),o=k.getBlockForKey(n).getLength();if(o===l.getAnchorOffset())return j;m=l.set('focusOffset',o);}else m=l;m=c('nullthrows')(m);h=c('getContentStateFragment')(k,m);var p=c('DraftModifier').removeRange(k,m,'forward');if(p===k)return j;return c('EditorState').push(j,p,'remove-range');},paste:function(j){if(!h)return j;var k=c('DraftModifier').replaceWithFragment(j.getCurrentContent(),j.getSelection(),h);return c('EditorState').push(j,k,'insert-fragment');}};f.exports=i;},null);
__d('getRangeClientRects',['invariant','UserAgent'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('UserAgent').isBrowser('Chrome');function j(l){var m=l.cloneRange(),n=[];for(var o=l.endContainer;o!=null;o=o.parentNode){var p=o===l.commonAncestorContainer;if(p){m.setStart(l.startContainer,l.startOffset);}else m.setStart(m.endContainer,0);var q=Array.from(m.getClientRects());n.push(q);if(p){var r;n.reverse();return (r=[]).concat.apply(r,n);}m.setEndBefore(o);}h(0);}var k=i?j:function(l){return Array.from(l.getClientRects());};f.exports=k;},null);
__d('expandRangeToStartOfLine',['invariant','UnicodeUtils','getRangeClientRects'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(m){var n=getComputedStyle(m),o=document.createElement('div');o.style.fontFamily=n.fontFamily;o.style.fontSize=n.fontSize;o.style.fontStyle=n.fontStyle;o.style.fontWeight=n.fontWeight;o.style.lineHeight=n.lineHeight;o.style.position='absolute';o.textContent='M';document.body.appendChild(o);var p=o.getBoundingClientRect();document.body.removeChild(o);return p.height;}function j(m,n){var o=Infinity,p=Infinity,q=-Infinity,r=-Infinity;for(var s=0;s<m.length;s++){var t=m[s];if(t.width===0||t.width===1)continue;o=Math.min(o,t.top);p=Math.min(p,t.bottom);q=Math.max(q,t.top);r=Math.max(r,t.bottom);}return (q<=p&&q-o<n&&r-p<n);}function k(m){switch(m.nodeType){case Node.DOCUMENT_TYPE_NODE:return 0;case Node.TEXT_NODE:case Node.PROCESSING_INSTRUCTION_NODE:case Node.COMMENT_NODE:return m.length;default:return m.childNodes.length;}}function l(m){!m.collapsed?h(0):void 0;m=m.cloneRange();var n=m.startContainer;if(n.nodeType!==1)n=n.parentNode;var o=i(n),p=m.endContainer,q=m.endOffset;m.setStart(m.startContainer,0);while(j(c('getRangeClientRects')(m),o)){p=m.startContainer;q=m.startOffset;!p.parentNode?h(0):void 0;m.setStartBefore(p);if(p.nodeType===1&&getComputedStyle(p).display!=='inline')break;}var r=p,s=q-1;do{var t=r.nodeValue;for(var u=s;u>=0;u--){if(t!=null&&u>0&&c('UnicodeUtils').isSurrogatePair(t,u-1))continue;m.setStart(r,u);if(j(c('getRangeClientRects')(m),o)){p=r;q=u;}else break;}if(u===-1||r.childNodes.length===0)break;r=r.childNodes[u];s=k(r);}while(true);m.setStart(p,q);return m;}f.exports=l;},null);
__d('getDraftEditorSelectionWithNodes',['invariant','findAncestorOffsetKey','getSelectionOffsetKeyForNode','getUpdatedSelectionState','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(n,o,p,q,r,s){var t=p.nodeType===Node.TEXT_NODE,u=r.nodeType===Node.TEXT_NODE;if(t&&u)return {selectionState:c('getUpdatedSelectionState')(n,c('nullthrows')(c('findAncestorOffsetKey')(p)),q,c('nullthrows')(c('findAncestorOffsetKey')(r)),s),needsRecovery:false};var v=null,w=null,x=true;if(t){v={key:c('nullthrows')(c('findAncestorOffsetKey')(p)),offset:q};w=l(o,r,s);}else if(u){w={key:c('nullthrows')(c('findAncestorOffsetKey')(r)),offset:s};v=l(o,p,q);}else{v=l(o,p,q);w=l(o,r,s);if(p===r&&q===s)x=p.firstChild.nodeName!=='BR';}return {selectionState:c('getUpdatedSelectionState')(n,v.key,v.offset,w.key,w.offset),needsRecovery:x};}function j(n){while(n.firstChild&&c('getSelectionOffsetKeyForNode')(n.firstChild))n=n.firstChild;return n;}function k(n){while(n.lastChild&&c('getSelectionOffsetKeyForNode')(n.lastChild))n=n.lastChild;return n;}function l(n,o,p){var q=c('findAncestorOffsetKey')(o);!(q!=null||n&&(n===o||n.firstChild===o))?h(0):void 0;if(n===o){o=o.firstChild;!(o instanceof Element&&o.getAttribute('data-contents')==='true')?h(0):void 0;if(p>0)p=o.childNodes.length;}if(p===0){var r=null;if(q!=null){r=q;}else{var s=j(o);r=c('nullthrows')(c('getSelectionOffsetKeyForNode')(s));}return {key:r,offset:0};}var t=o.childNodes[p-1],u=null,v=null;if(!c('getSelectionOffsetKeyForNode')(t)){u=c('nullthrows')(q);v=m(t);}else{var w=k(t);u=c('nullthrows')(c('getSelectionOffsetKeyForNode')(w));v=m(w);}return {key:u,offset:v};}function m(n){var o=n.textContent;return o==='\n'?0:o.length;}f.exports=i;},null);
__d('removeTextWithStrategy',['DraftModifier'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=i.getSelection(),m=i.getCurrentContent(),n=l;if(l.isCollapsed()){if(k==='forward'){if(i.isSelectionAtEndOfContent())return m;}else if(i.isSelectionAtStartOfContent())return m;n=j(i);if(n===l)return m;}return c('DraftModifier').removeRange(m,n,k);}f.exports=h;},null);
__d('keyCommandBackspaceToStartOfLine',['EditorState','expandRangeToStartOfLine','getDraftEditorSelectionWithNodes','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=b.getSelection(),m=l.getRangeAt(0);m=c('expandRangeToStartOfLine')(m);var n=c('getDraftEditorSelectionWithNodes')(k,null,m.endContainer,m.endOffset,m.startContainer,m.startOffset).selectionState;return n;},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('DraftRemovableWord',['TokenizeUtil'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('TokenizeUtil').getPunctuation(),i='[\'\u2018\u2019]',j='\\s|(?![_])'+h,k='^'+'(?:'+j+')*'+'(?:'+i+'|(?!'+j+').)*'+'(?:(?!'+j+').)',l=new RegExp(k),m='(?:(?!'+j+').)'+'(?:'+i+'|(?!'+j+').)*'+'(?:'+j+')*'+'$',n=new RegExp(m);function o(q,r){var s=r?n.exec(q):l.exec(q);return s?s[0]:q;}var p={getBackward:function(q){return o(q,true);},getForward:function(q){return o(q,false);}};f.exports=p;},null);
__d('moveSelectionBackward',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=i.getSelection(),l=i.getCurrentContent(),m=k.getStartKey(),n=k.getStartOffset(),o=m,p=0;if(j>n){var q=l.getKeyBefore(m);if(q==null){o=m;}else{o=q;var r=l.getBlockForKey(q);p=r.getText().length;}}else p=n-j;return k.merge({focusKey:o,focusOffset:p,isBackward:true});}f.exports=h;},null);
__d('keyCommandBackspaceWord',['DraftRemovableWord','EditorState','moveSelectionBackward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset();if(m===0)return c('moveSelectionBackward')(k,1);var n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(0,m),q=c('DraftRemovableWord').getBackward(p);return c('moveSelectionBackward')(k,q.length||1);},'backward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('moveSelectionForward',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=i.getSelection(),l=k.getStartKey(),m=k.getStartOffset(),n=i.getCurrentContent(),o=l,p,q=n.getBlockForKey(l);if(j>q.getText().length-m){o=n.getKeyAfter(l);p=0;}else p=m+j;return k.merge({focusKey:o,focusOffset:p});}f.exports=h;},null);
__d('keyCommandDeleteWord',['DraftRemovableWord','EditorState','moveSelectionForward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(k){var l=k.getSelection(),m=l.getStartOffset(),n=l.getStartKey(),o=k.getCurrentContent(),p=o.getBlockForKey(n).getText().slice(m),q=c('DraftRemovableWord').getForward(p);return c('moveSelectionForward')(k,q.length||1);},'forward');if(j===i.getCurrentContent())return i;return c('EditorState').push(i,j,'remove-range');}f.exports=h;},null);
__d('keyCommandInsertNewline',['DraftModifier','EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('DraftModifier').splitBlock(i.getCurrentContent(),i.getSelection());return c('EditorState').push(i,j,'split-block');}f.exports=h;},null);
__d('keyCommandMoveSelectionToEndOfBlock',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getEndKey(),l=i.getCurrentContent(),m=l.getBlockForKey(k).getLength();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:m,focusKey:k,focusOffset:m,isBackward:false}),forceSelection:true});}f.exports=h;},null);
__d('keyCommandMoveSelectionToStartOfBlock',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection(),k=j.getStartKey();return c('EditorState').set(i,{selection:j.merge({anchorKey:k,anchorOffset:0,focusKey:k,focusOffset:0,isBackward:false}),forceSelection:true});}f.exports=h;},null);
__d('keyCommandPlainBackspace',['EditorState','UnicodeUtils','moveSelectionBackward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p-1];return c('moveSelectionBackward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'backward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'backspace-character':'remove-range');}f.exports=h;},null);
__d('keyCommandPlainDelete',['EditorState','UnicodeUtils','moveSelectionForward','removeTextWithStrategy'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=c('removeTextWithStrategy')(i,function(l){var m=l.getSelection(),n=l.getCurrentContent(),o=m.getAnchorKey(),p=m.getAnchorOffset(),q=n.getBlockForKey(o).getText()[p];return c('moveSelectionForward')(l,q?c('UnicodeUtils').getUTF16Length(q,0):1);},'forward');if(j===i.getCurrentContent())return i;var k=i.getSelection();return c('EditorState').push(i,j.set('selectionBefore',k),k.isCollapsed()?'delete-character':'remove-range');}f.exports=h;},null);
__d('keyCommandTransposeCharacters',['DraftModifier','EditorState','getContentStateFragment'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getSelection();if(!j.isCollapsed())return i;var k=j.getAnchorOffset();if(k===0)return i;var l=j.getAnchorKey(),m=i.getCurrentContent(),n=m.getBlockForKey(l),o=n.getLength();if(o<=1)return i;var p,q;if(k===o){p=j.set('anchorOffset',k-1);q=j;}else{p=j.set('focusOffset',k+1);q=p.set('anchorOffset',k+1);}var r=c('getContentStateFragment')(m,p),s=c('DraftModifier').removeRange(m,p,'backward'),t=s.getSelectionAfter(),u=t.getAnchorOffset()-1,v=t.merge({anchorOffset:u,focusOffset:u}),w=c('DraftModifier').replaceWithFragment(s,v,r),x=c('EditorState').push(i,w,'insert-fragment');return c('EditorState').acceptSelection(x,q);}f.exports=h;},null);
__d('keyCommandUndo',['EditorState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=c('EditorState').undo(j);if(j.getLastChangeType()==='spellcheck-change'){var m=l.getCurrentContent();k(c('EditorState').set(l,{nativelyRenderedContent:m}));return;}i.preventDefault();if(!j.getNativelyRenderedContent()){k(l);return;}k(c('EditorState').set(j,{nativelyRenderedContent:null}));setTimeout(function(){k(l);},0);}f.exports=h;},null);
__d('editOnKeyDown',['DraftModifier','EditorState','KeyBindingUtil','Keys','SecondaryClipboard','UserAgent','keyCommandBackspaceToStartOfLine','keyCommandBackspaceWord','keyCommandDeleteWord','keyCommandInsertNewline','keyCommandPlainBackspace','keyCommandPlainDelete','keyCommandMoveSelectionToEndOfBlock','keyCommandMoveSelectionToStartOfBlock','keyCommandTransposeCharacters','keyCommandUndo'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('KeyBindingUtil').isOptionKeyCommand,i=c('UserAgent').isBrowser('Chrome');function j(l,m){switch(l){case 'redo':return c('EditorState').redo(m);case 'delete':return c('keyCommandPlainDelete')(m);case 'delete-word':return c('keyCommandDeleteWord')(m);case 'backspace':return c('keyCommandPlainBackspace')(m);case 'backspace-word':return c('keyCommandBackspaceWord')(m);case 'backspace-to-start-of-line':return c('keyCommandBackspaceToStartOfLine')(m);case 'split-block':return c('keyCommandInsertNewline')(m);case 'transpose-characters':return c('keyCommandTransposeCharacters')(m);case 'move-selection-to-start-of-block':return c('keyCommandMoveSelectionToStartOfBlock')(m);case 'move-selection-to-end-of-block':return c('keyCommandMoveSelectionToEndOfBlock')(m);case 'secondary-cut':return c('SecondaryClipboard').cut(m);case 'secondary-paste':return c('SecondaryClipboard').paste(m);default:return m;}}function k(l){var m=l.which,n=this.props.editorState;switch(m){case c('Keys').RETURN:l.preventDefault();if(this.props.handleReturn&&this.props.handleReturn(l))return;break;case c('Keys').ESC:l.preventDefault();this.props.onEscape&&this.props.onEscape(l);return;case c('Keys').TAB:this.props.onTab&&this.props.onTab(l);return;case c('Keys').UP:this.props.onUpArrow&&this.props.onUpArrow(l);return;case c('Keys').DOWN:this.props.onDownArrow&&this.props.onDownArrow(l);return;case c('Keys').SPACE:if(i&&h(l)){l.preventDefault();var o=c('DraftModifier').replaceText(n.getCurrentContent(),n.getSelection(),'\u00a0');this.update(c('EditorState').push(n,o,'insert-characters'));return;}}var p=this.props.keyBindingFn(l);if(!p)return;if(p==='undo'){c('keyCommandUndo')(l,n,this.update);return;}l.preventDefault();if(this.props.handleKeyCommand&&this.props.handleKeyCommand(p))return;var q=j(p,n);if(q!==n)this.update(q);}f.exports=k;},null);
__d('convertFromHTMLToContentBlocks',['invariant','CharacterMetadata','ContentBlock','DraftEntity','immutable','URI','generateRandomKey','getSafeBodyFromHTML','nullthrows','sanitizeDraftText'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('immutable').List,j=c('immutable').OrderedSet,k='&nbsp;',l=' ',m=4,n=new RegExp('\r','g'),o=new RegExp('\n','g'),p=new RegExp(k,'g'),q=['p','h1','h2','h3','li','blockquote','pre'],r={b:'BOLD',code:'CODE',del:'STRIKETHROUGH',em:'ITALIC',i:'ITALIC',s:'STRIKETHROUGH',strike:'STRIKETHROUGH',strong:'BOLD',u:'UNDERLINE'},s;function t(){return {text:'',inlines:[],entities:[],blocks:[]};}function u(fa){var ga=new Array(1);if(fa)ga[0]=fa;return {text:l,inlines:[j()],entities:ga,blocks:[]};}function v(){return {text:'\n',inlines:[j()],entities:new Array(1),blocks:[]};}function w(fa,ga){return {text:'\r',inlines:[j()],entities:new Array(1),blocks:[{type:fa,depth:Math.max(0,Math.min(m,ga))}]};}function x(fa,ga){switch(fa){case 'h1':return 'header-one';case 'h2':return 'header-two';case 'h3':return 'header-three';case 'h4':return 'header-four';case 'h5':return 'header-five';case 'h6':return 'header-six';case 'li':if(ga==='ol')return 'ordered-list-item';return 'unordered-list-item';case 'blockquote':return 'blockquote';case 'pre':return 'code-block';default:return 'unstyled';}}function y(fa,ga,ha){var ia=r[fa];if(ia){ha=ha.add(ia).toOrderedSet();}else if(ga instanceof HTMLElement)(function(){var ja=ga;ha=ha.withMutations(function(ka){if(ja.style.fontWeight==='bold')ka.add('BOLD');if(ja.style.fontStyle==='italic')ka.add('ITALIC');if(ja.style.textDecoration==='underline')ka.add('UNDERLINE');if(ja.style.textDecoration==='line-through')ka.add('STRIKETHROUGH');}).toOrderedSet();})();return ha;}function z(fa,ga){var ha=ga.text.slice(0,1);if(fa.text.slice(-1)==='\r'&&ha==='\r'){fa.text=fa.text.slice(0,-1);fa.inlines.pop();fa.entities.pop();fa.blocks.pop();}if(fa.text.slice(-1)==='\r')if(ga.text===l||ga.text==='\n'){return fa;}else if(ha===l||ha==='\n'){ga.text=ga.text.slice(1);ga.inlines.shift();ga.entities.shift();}return {text:fa.text+ga.text,inlines:fa.inlines.concat(ga.inlines),entities:fa.entities.concat(ga.entities),blocks:fa.blocks.concat(ga.blocks)};}function aa(fa){return q.some(function(ga){return fa.indexOf('<'+ga)!==-1;});}function ba(fa){!(fa instanceof HTMLAnchorElement)?h(0):void 0;var ga=fa.protocol;return ga==='http:'||ga==='https:';}function ca(fa,ga,ha,ia,ja,ka,la){var ma=fa.nodeName.toLowerCase(),na=false,oa='unstyled',pa=s;if(ma==='#text'){var qa=fa.textContent;if(qa.trim()===''&&ia!=='pre')return u(la);if(ia!=='pre')qa=qa.replace(o,l);s=ma;return {text:qa,inlines:Array(qa.length).fill(ga),entities:Array(qa.length).fill(la),blocks:[]};}s=ma;if(ma==='br'){if(pa==='br'&&(!ia||x(ia,ha)==='unstyled'))return w('unstyled',ka);return v();}var ra=t(),sa=null;ga=y(ma,fa,ga);if(ma==='ul'||ma==='ol'){if(ha)ka+=1;ha=ma;}if(!ia&&ja.indexOf(ma)!==-1){ra=w(x(ma,ha),ka);ia=ma;na=true;}else if(ha&&ia==='li'&&ma==='li'){ra=w(x(ma,ha),ka);ia=ma;na=true;oa=ha==='ul'?'unordered-list-item':'ordered-list-item';}var ta=fa.firstChild;if(ta!=null)ma=ta.nodeName.toLowerCase();var ua=null,va=null;while(ta){if(ma==='a'&&ta.href&&ba(ta)){va=new (c('URI'))(ta.href).toString();ua=c('DraftEntity').create('LINK','MUTABLE',{url:va});}else ua=undefined;sa=ca(ta,ga,ha,ia,ja,ka,ua||la);ra=z(ra,sa);var wa=ta.nextSibling;if(wa&&ja.indexOf(ma)>=0&&ia)ra=z(ra,v());if(wa)ma=wa.nodeName.toLowerCase();ta=wa;}if(na)ra=z(ra,w(oa,ka));return ra;}function da(fa,ga){fa=fa.trim().replace(n,'').replace(p,l);var ha=ga(fa);if(!ha)return null;s=null;var ia=aa(fa)?q:['div'],ja=ca(ha,j(),'ul',null,ia,-1);if(ja.text.indexOf('\r')===0)ja={text:ja.text.slice(1),inlines:ja.inlines.slice(1),entities:ja.entities.slice(1),blocks:ja.blocks};if(ja.text.slice(-1)==='\r'){ja.text=ja.text.slice(0,-1);ja.inlines=ja.inlines.slice(0,-1);ja.entities=ja.entities.slice(0,-1);ja.blocks.pop();}if(ja.blocks.length===0)ja.blocks.push({type:'unstyled',depth:0});if(ja.text.split('\r').length===ja.blocks.length+1)ja.blocks.unshift({type:'unstyled',depth:0});return ja;}function ea(fa){var ga=arguments.length<=1||arguments[1]===undefined?c('getSafeBodyFromHTML'):arguments[1],ha=da(fa,ga);if(ha==null)return null;var ia=0;return ha.text.split('\r').map(function(ja,ka){ja=c('sanitizeDraftText')(ja);var la=ia+ja.length,ma=c('nullthrows')(ha).inlines.slice(ia,la),na=c('nullthrows')(ha).entities.slice(ia,la),oa=i(ma.map(function(pa,qa){var ra={style:pa,entity:null};if(na[qa])ra.entity=na[qa];return c('CharacterMetadata').create(ra);}));ia=la+1;return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:c('nullthrows')(ha).blocks[ka].type,depth:c('nullthrows')(ha).blocks[ka].depth,text:ja,characterList:oa});});}f.exports=ea;},null);
__d('DraftPasteProcessor',['CharacterMetadata','ContentBlock','immutable','convertFromHTMLToContentBlocks','generateRandomKey','sanitizeDraftText'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').List,i=c('immutable').Repeat,j={processHTML:function(k){return c('convertFromHTMLToContentBlocks')(k);},processText:function(k,l){return k.map(function(m){m=c('sanitizeDraftText')(m);return new (c('ContentBlock'))({key:c('generateRandomKey')(),type:'unstyled',text:m,characterList:h(i(l,m.length))});});}};f.exports=j;},null);
__d('splitTextIntoTextBlocks',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=/\r\n?|\n/g;function i(j){return j.split(h);}f.exports=i;},null);
__d('editOnPaste',['BlockMapBuilder','CharacterMetadata','DataTransfer','DraftModifier','DraftPasteProcessor','EditorState','getEntityKeyForSelection','getTextContentFromFiles','splitTextIntoTextBlocks'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){j.preventDefault();var k=new (c('DataTransfer'))(j.clipboardData);if(!k.isRichText()){var l=k.getFiles(),m=k.getText();if(l.length>0){if(this.props.handlePastedFiles&&this.props.handlePastedFiles(l))return;c('getTextContentFromFiles')(l,function(x){x=x||m;if(!x)return;var y=this.props.editorState,z=c('splitTextIntoTextBlocks')(x),aa=c('CharacterMetadata').create({style:y.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(y.getCurrentContent(),y.getSelection())}),ba=c('DraftPasteProcessor').processText(z,aa),ca=c('BlockMapBuilder').createFromArray(ba),da=c('DraftModifier').replaceWithFragment(y.getCurrentContent(),y.getSelection(),ca);this.update(c('EditorState').push(y,da,'insert-fragment'));}.bind(this));return;}}var n=[],o=k.getText(),p=k.getHTML();if(this.props.handlePastedText&&this.props.handlePastedText(o,p))return;if(o)n=c('splitTextIntoTextBlocks')(o);if(!this.props.stripPastedStyles){var q=this.getClipboard();if(k.isRichText()&&q)if(p.indexOf(this.getEditorKey())!==-1||n.length===1&&q.size===1&&q.first().getText()===o){this.update(i(this.props.editorState,q));return;}if(p){var r=c('DraftPasteProcessor').processHTML(p);if(r){var s=c('BlockMapBuilder').createFromArray(r);this.update(i(this.props.editorState,s));return;}}this.setClipboard(null);}if(n){var t=this.props.editorState,u=c('CharacterMetadata').create({style:t.getCurrentInlineStyle(),entity:c('getEntityKeyForSelection')(t.getCurrentContent(),t.getSelection())}),v=c('DraftPasteProcessor').processText(n,u),w=c('BlockMapBuilder').createFromArray(v);this.update(i(this.props.editorState,w));}}function i(j,k){var l=c('DraftModifier').replaceWithFragment(j.getCurrentContent(),j.getSelection(),k);return c('EditorState').push(j,l,'insert-fragment');}f.exports=h;},null);
__d('getDraftEditorSelection',['getDraftEditorSelectionWithNodes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){var k=b.getSelection();if(k.rangeCount===0)return {selectionState:i.getSelection().set('hasFocus',false),needsRecovery:false};return c('getDraftEditorSelectionWithNodes')(i,j,k.anchorNode,k.anchorOffset,k.focusNode,k.focusOffset);}f.exports=h;},null);
__d('editOnSelect',['EditorState','ReactDOM','getDraftEditorSelection'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){if(this._blockSelectEvents)return;var i=this.props.editorState,j=c('getDraftEditorSelection')(i,c('ReactDOM').findDOMNode(this.refs.editorContainer).firstChild),k=j.selectionState;if(k!==i.getSelection()){if(j.needsRecovery){i=c('EditorState').forceSelection(i,k);}else i=c('EditorState').acceptSelection(i,k);this.update(i);}}f.exports=h;},null);
__d('DraftEditorEditHandler',['editOnBeforeInput','editOnBlur','editOnCompositionStart','editOnCopy','editOnCut','editOnDragOver','editOnDragStart','editOnFocus','editOnInput','editOnKeyDown','editOnPaste','editOnSelect'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onBeforeInput:c('editOnBeforeInput'),onBlur:c('editOnBlur'),onCompositionStart:c('editOnCompositionStart'),onCopy:c('editOnCopy'),onCut:c('editOnCut'),onDragOver:c('editOnDragOver'),onDragStart:c('editOnDragStart'),onFocus:c('editOnFocus'),onInput:c('editOnInput'),onKeyDown:c('editOnKeyDown'),onPaste:c('editOnPaste'),onSelect:c('editOnSelect')};f.exports=h;},null);
__d('DraftEditorPlaceholder.react',['cx','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.shouldComponentUpdate=function(l){return (this.props.text!==l.text||this.props.editorState.getSelection().getHasFocus()!==l.editorState.getSelection().getHasFocus());};k.prototype.render=function(){var l=this.props.editorState.getSelection().getHasFocus(),m="_1p1t"+(l?' '+"_1p1u":'');return (c('React').createElement('div',{className:m},c('React').createElement('div',{className:"_1p1v"},this.props.text)));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('getDefaultKeyBinding',['KeyBindingUtil','Keys','UserAgent'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UserAgent').isPlatform('Mac OS X'),i=c('UserAgent').isPlatform('Windows'),j=h&&c('UserAgent').isBrowser('Firefox < 29'),k=c('KeyBindingUtil').hasCommandModifier,l=c('KeyBindingUtil').isCtrlKeyCommand;function m(r){return h&&r.altKey||l(r);}function n(r){if(k(r))return r.shiftKey?'redo':'undo';}function o(r){if(i&&r.shiftKey)return null;return m(r)?'delete-word':'delete';}function p(r){if(k(r)&&h)return 'backspace-to-start-of-line';return m(r)?'backspace-word':'backspace';}function q(r){switch(r.keyCode){case 66:return k(r)?'bold':null;case 68:return l(r)?'delete':null;case 72:return l(r)?'backspace':null;case 73:return k(r)?'italic':null;case 74:return k(r)?'code':null;case 75:return !i&&l(r)?'secondary-cut':null;case 77:return l(r)?'split-block':null;case 79:return l(r)?'split-block':null;case 84:return h&&l(r)?'transpose-characters':null;case 85:return k(r)?'underline':null;case 87:return h&&l(r)?'backspace-word':null;case 89:if(l(r))return i?'redo':'secondary-paste';return null;case 90:return n(r)||null;case c('Keys').RETURN:return 'split-block';case c('Keys').DELETE:return o(r);case c('Keys').BACKSPACE:return p(r);case c('Keys').LEFT:return (j&&k(r)?'move-selection-to-start-of-block':null);case c('Keys').RIGHT:return (j&&k(r)?'move-selection-to-end-of-block':null);default:return null;}}f.exports=q;},null);
__d('AbstractMentionsTextEditor.react',['DraftEditor.react','DraftModifier','EditorState','React','TypeaheadNavigation','clearImmediate','getOrCreateDOMID','setImmediate','uniqueID'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=5,j=c('React').createClass({displayName:'AbstractMentionsTextEditor',propTypes:{mentionsSource:h.object,mentionCreationFn:h.func.isRequired,mentionResultsComponent:h.func.isRequired,mentionResultsProps:h.object,excludedEntries:h.object,handleContentReturn:h.func,onAddMention:h.func,onShowMentions:h.func,autoHighlight:h.bool,maxResults:h.number},getDefaultProps:function(){return babelHelpers['extends']({},c('DraftEditor.react').defaultProps,{autoHighlight:true,maxResults:i});},componentWillMount:function(){this._viewID=c('uniqueID')();this._searchTimeouts=[];},componentWillUnmount:function(){this._searchTimeouts.forEach(function(l){return c('clearImmediate')(l);});this._searchTimeouts=null;},getInitialState:function(){return {highlightedMentionable:null,ariaActiveDescendantID:null,mentionableEntries:null,characterOffset:0};},_onShowMentions:function(l,m){if(!this.isMounted())return;var n=l&&l.length;if(!n){this.setState({highlightedMentionable:null,activeDescendantID:null,mentionableEntries:null,characterOffset:0});return;}var o=l.slice(0,this.props.maxResults),p=this.props.typeaheadViewProps;if(p&&p.mentionSortFn)o.sort(p.mentionSortFn);var q=null;if(this.props.autoHighlight||this.state.highlightedMentionable!==null)q=l[0];this.setState({highlightedMentionable:q,mentionableEntries:o,characterOffset:m});if(this.props.onShowMentions)this.props.onShowMentions(o,m);},_onBlur:function(l){this.setState(this.getInitialState());this.props.onBlur&&this.props.onBlur(l);},_onFocus:function(l){this.props.mentionsSource&&this.props.mentionsSource.bootstrap();this.props.onFocus&&this.props.onFocus(l);},_handleReturn:function(l){if(this.state.highlightedMentionable){this._onMentionSelect(this.state.highlightedMentionable,l);return true;}else if(this.props.handleContentReturn&&this.props.handleContentReturn(l))return true;return false;},_onTab:function(l){if(this.state.highlightedMentionable){l.preventDefault();this._onMentionSelect(this.state.highlightedMentionable,l);}else if(this.props.onTab)this.props.onTab(l);},_onEscape:function(l){if(this.props.onEscape)this.props.onEscape(l);if(this.state.mentionableEntries){l.stopPropagation();this.setState(this.getInitialState());}},_onUpArrow:function(l){if(this.state.mentionableEntries){l.preventDefault();c('TypeaheadNavigation').moveUp(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onUpArrow&&this.props.onUpArrow(l);},_onDownArrow:function(l){if(this.state.mentionableEntries){l.preventDefault();c('TypeaheadNavigation').moveDown(this.state.mentionableEntries,this.state.highlightedMentionable,this._onMentionHighlight);}else this.props.onDownArrow&&this.props.onDownArrow(l);},_onMentionHighlight:function(l){this.setState({highlightedMentionable:l});},_onMentionRenderHighlight:function(l){var m=c('getOrCreateDOMID')(l);this.setState({ariaActiveDescendantID:m});},_onMentionSelect:function(l,m){var n=this.props.editorState,o=n.getSelection(),p=n.getCurrentContent(),q=o.getAnchorKey(),r=o.getAnchorOffset(),s=p.getBlockMap().get(q),t=r-k(s.getText().substr(0,r),l.getTitle(),this.state.characterOffset),u=c('DraftModifier').replaceText(p,o.set('anchorOffset',t),l.getTitle(),n.getCurrentInlineStyle(),this.props.mentionCreationFn(l)),v=c('EditorState').push(n,u,'insert-fragment');this.props.onChange(v);this.setState(this.getInitialState());if(this.props.onAddMention){var w=this.state.mentionableEntries.indexOf(l);this.props.onAddMention(l,w,m);}},shouldComponentUpdate:function(l,m){return (this.props.editorState!==l.editorState||this.props.placeholder!==l.placeholder||this.props.readOnly!==l.readOnly||this.state.mentionableEntries!==m.mentionableEntries||this.state.highlightedMentionable!==m.highlightedMentionable||this.state.ariaActiveDescendantID!==m.ariaActiveDescendantID);},componentDidUpdate:function(l){var m=this.props.editorState;if(m===l.editorState)return;var n=m.getSelection();if(n.getHasFocus()&&n.isCollapsed()){var o=m.getCurrentContent();if(this.props.mentionsSource)this._searchTimeouts.push(c('setImmediate')(function(){this.props.mentionsSource.search(o,n,this._onShowMentions);}.bind(this)));}},blur:function(){this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor.focus();},_renderMentionables:function(){var l=this.state.mentionableEntries;if(!l||!l.length)return null;var m=this.props.mentionResultsComponent;return (c('React').createElement(m,babelHelpers['extends']({},this.props.mentionResultsProps,{viewID:this._viewID,selection:this.props.editorState.getSelection(),contextComponent:this,characterOffset:this.state.characterOffset,mentionableEntries:l||[],highlightedMentionable:this.state.highlightedMentionable,onMentionSelect:this._onMentionSelect,onMentionHighlight:this._onMentionHighlight,onMentionRenderHighlight:this._onMentionRenderHighlight})));},render:function(){var l=this.state.mentionableEntries,m=!!(l&&l.length),n=this.props.readOnly?null:'-2';return (c('React').createElement('div',{ref:'container',className:this.props.className,tabIndex:n},c('React').createElement(c('DraftEditor.react'),babelHelpers['extends']({},this.props,{ref:'abstractTextEditor',role:'combobox',ariaActiveDescendantID:this.state.ariaActiveDescendantID,ariaAutoComplete:'list',ariaOwneeID:this._viewID,ariaExpanded:m,ariaHasPopup:m,onBlur:this._onBlur,onFocus:this._onFocus,onTab:this._onTab,onEscape:this._onEscape,onDownArrow:this._onDownArrow,onUpArrow:this._onUpArrow,handleReturn:this._handleReturn})),this._renderMentionables()));}});function k(l,m,n){for(var o=n;o<=m.length;o++)if(l.substr(-o)==m.substr(0,o))n=o;return n;}f.exports=j;},null);
__d('createMentionEntity',['DraftEntity'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getType().toLowerCase();if(j==='hashtag')return c('DraftEntity').create('HASHTAG','IMMUTABLE');var k=j==='user'||j==='fb4c'?'SEGMENTED':'IMMUTABLE',l=i.getAuxiliaryData();return c('DraftEntity').create('MENTION',k,{id:i.getUniqueID(),isWeak:l&&l.renderType==='non_member',type:j});}f.exports=h;},null);
__d('MentionsInput.react',['cx','AbstractMentionsTextEditor.react','EditorState','MentionsLayer.react','React','createMentionEntity','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MentionsInput',propTypes:{editorState:i.instanceOf(c('EditorState')).isRequired,mentionsSource:i.object,typeaheadView:i.func.isRequired,typeaheadViewPropTypes:i.object,spellCheck:i.bool,placeholder:i.string,className:i.string,autoflip:i.bool,position:i.oneOf(['above','below']),handleContentReturn:i.func,handleDroppedFiles:i.func,handlePastedFiles:i.func,onAddMention:i.func,onShowMentions:i.func,onChange:i.func,onInputFocus:i.func,onInputBlur:i.func},blur:function(){this.refs.textEditor.blur();},focus:function(){clearTimeout(this._focusTimer);this._focusTimer=setTimeout(function(){this.refs.textEditor.focus();}.bind(this),0);},componentWillUnmount:function(){clearTimeout(this._focusTimer);},render:function(){var k=c('joinClasses')(this.props.className,"_5yk1");return (c('React').createElement('div',{className:k,onClick:this.focus,onFocus:this.focus},c('React').createElement(c('AbstractMentionsTextEditor.react'),babelHelpers['extends']({},this.props,{mentionResultsComponent:c('MentionsLayer.react'),mentionResultsProps:{typeaheadView:this.props.typeaheadView,typeaheadViewProps:this.props.typeaheadViewProps,autoflip:this.props.autoflip,position:this.props.position},mentionCreationFn:c('createMentionEntity'),ref:'textEditor',className:"_5yk2",stripPastedStyles:true}))));}});f.exports=j;},null);
__d('DevxFluxDispatcher',['Dispatcher_DEPRECATED'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('Dispatcher_DEPRECATED'));i=h&&h.prototype;j.prototype.handleServerAction=function(k){this.$DevxFluxDispatcher1('serverAction',k);};j.prototype.handleViewAction=function(k){this.$DevxFluxDispatcher1('viewAction',k);};j.prototype.$DevxFluxDispatcher1=function(k,l){this.dispatch(babelHelpers['extends']({source:k},l));};function j(){h.apply(this,arguments);}f.exports=new j();},null);
__d('DevxProxyActions',['DevxFluxDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i){Object.keys(i.ActionHandler).forEach(function(j){this[j]=function(){for(var k=arguments.length,l=Array(k),m=0;m<k;m++)l[m]=arguments[m];c('DevxFluxDispatcher').handleViewAction({action:j,args:l});};}.bind(this));}f.exports=h;},null);
__d('getVisibleValueForContentState',['DraftEntity','emptyFunction'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){var j=i.getBlockMap().map(function(k){var l=k.getText(),m='';k.findEntityRanges(c('emptyFunction').thatReturnsTrue,function(n,o){var p=k.getEntityAt(n);if(p===null){m+=l.slice(n,o);}else{var q=c('DraftEntity').get(p);if(q.getType()==='EMOTICON'){m+=q.getData().originalEmoticon;}else m+=l.slice(n,o);}});return m;});return j.join('\n');}f.exports=h;},null);
__d('DocumentMentionsRegex',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='\\.,\\+\\*\\?\\$\\@\\|#{}\\(\\)\\^\\-\\[\\]\\\\\/!%\'"~=<>_:;',i='\\b[A-Z][^\\s'+h+']',j={PUNCTUATION:h,NAME:i};f.exports=j;},null);
__d('AtSignMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('DocumentMentionsRegex').PUNCTUATION,i=['@','\\uff20'].join(''),j='[^'+i+h+'\\s]',k='(?:'+'\\.[ |$]|'+' |'+'['+h+']|'+')',l=new RegExp('(?:^|\\s|\\()('+'['+i+']'+'((?:'+j+k+'){0,20})'+')$'),m={name:'AtSignMentionsStrategy',findMentionableString:function(n){var o=l.exec(n);if(o!==null){var p=o[2];if(p.length)return {matchingString:p,leadOffset:o[1].length};}return null;}};f.exports=m;},null);
__d('CapitalizedNameMentionsStrategy',['DocumentMentionsRegex'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=1,i=new RegExp('(^|[^#])((?:'+c('DocumentMentionsRegex').NAME+'{'+h+',})$)'),j={name:'CapitalizedNameMentionsStrategy',findMentionableString:function(k){var l=i.exec(k);if(l!==null)return {matchingString:l[2],leadOffset:l[2].length};return null;}};f.exports=j;},null);
__d('DocumentCompositeMentionsSource',['invariant','emptyFunction','nullthrows'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(k,l){var m=k.getCharacterList().toSeq().slice(0,l).reverse().takeWhile(function(n){return n.getEntity()===null;}).count();return k.getText().slice(l-m,l);}function j(k){!(k.length>0)?h(0):void 0;this.$DocumentCompositeMentionsSource1=k;this.$DocumentCompositeMentionsSource2=false;this.$DocumentCompositeMentionsSource3=null;}j.prototype.bootstrap=function(k){if(this.$DocumentCompositeMentionsSource2)return;this.$DocumentCompositeMentionsSource2=true;k=k||c('emptyFunction');var l=this.$DocumentCompositeMentionsSource1.length;function m(){l--;if(!l)k&&k();}this.$DocumentCompositeMentionsSource1.forEach(function(n){n.bootstrap(m);});};j.prototype.search=function(k,l,m){var n=l.getAnchorKey(),o=k.getBlockForKey(n);this.$DocumentCompositeMentionsSource4(i(o,l.getAnchorOffset()),m);};j.prototype.$DocumentCompositeMentionsSource4=function(k,l){var m=this.$DocumentCompositeMentionsSource1.length,n,o;for(var p=0;p<m;p++){n=this.$DocumentCompositeMentionsSource1[p];o=n.findMatch(k);if(o===null){continue;}else{var q=c('nullthrows')(o).matchingString;this.$DocumentCompositeMentionsSource3=q;n.search(q,function(r,s){if(this.$DocumentCompositeMentionsSource3===s)l(r,o.leadOffset);}.bind(this));return;}}this.$DocumentCompositeMentionsSource3=null;l(null,null);};f.exports=j;},null);
__d('applyEmoticonToContentBlock',['CharacterMetadata','DraftEntity','EmoticonsList','immutable'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('immutable').List,i='\u3000';function j(k,l,m){if(!c('EmoticonsList').emotes[l])return k;var n=c('DraftEntity').create('EMOTICON','IMMUTABLE',{type:c('EmoticonsList').emotes[l],originalEmoticon:l}),o=k.getText(),p=k.getCharacterList(),q=l.length,r=p.get(m);return k.merge({text:o.slice(0,m)+i+o.slice(m+q),characterList:p.slice(0,m).concat(h.of(c('CharacterMetadata').applyEntity(r,n)),p.slice(m+q))});}f.exports=j;},null);
__d('insertEmoticonIntoContentState',['DraftModifier','applyEmoticonToContentBlock'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=c('DraftModifier').replaceText(j,k,i),m=k.getAnchorKey(),n=k.getAnchorOffset(),o=l.getBlockForKey(m),p=l.getBlockMap().set(m,c('applyEmoticonToContentBlock')(o,i,n));n++;return j.merge({blockMap:p,selectionBefore:k,selectionAfter:k.merge({anchorOffset:n,focusOffset:n})});}f.exports=h;},null);
__d('insertEmoticonIntoEditorState',['DraftModifier','EditorState','insertEmoticonIntoContentState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=' ';function i(j,k){var l=k.getSelection(),m=k.getCurrentContent(),n=l.getStartOffset(),o=l.getEndOffset(),p=m.getBlockForKey(l.getStartKey()).getText(),q=m.getBlockForKey(l.getEndKey()).getText(),r='';if(o<=q.length&&q[o]!==h)r=h;if(n>0&&p[n-1]!==h){m=c('DraftModifier').insertText(m,l,h);l=m.getSelectionAfter();}var s=c('insertEmoticonIntoContentState')(j,m,l);m=c('DraftModifier').insertText(s,s.getSelectionAfter(),r);return c('EditorState').push(k,m,'insert-characters');}f.exports=i;},null);
__d('filterCapitalizedNames',['TokenizeUtil'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(l,m){return i(l)&&(m.length>=5||j(l,m));}function i(l){var m=l.getAuxiliaryData()||k;return !m.disableAutosuggest&&!!(l.getType()==='user'||m.connectedPage);}function j(l,m){return c('TokenizeUtil').isExactMatch(m,l.getTitle());}var k={};f.exports=h;},null);
__d("XPluginCommentsBanAuthorAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/ban\/{comment_id}\/",{comment_id:{type:"String",required:true}});},null);
__d("XPluginCommentsDeleteCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/delete\/",{});},null);
__d("XPluginCommentsEditCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/edit\/",{});},null);
__d("XPluginCommentsFlagCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/flag\/",{});},null);
__d("XPluginCommentsHideCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/moderate\/hide\/{url_id}\/",{url_id:{type:"Int",required:true},action:{type:"Enum",required:true,enumType:1},type:{type:"Enum",required:true,enumType:1}});},null);
__d("XPluginCommentsLikeCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/async\/like\/",{action_like:{type:"Bool",defaultValue:false}});},null);
__d('CommentsPluginStore',['invariant','AsyncDialog','AsyncRequest','XPluginCommentsBanAuthorAsyncController','XPluginCommentsCreateCommentAsyncController','XPluginCommentsCreateReplyAsyncController','XPluginCommentsDeleteCommentAsyncController','DeveloperCommentsModerationAction','DeveloperCommentsModerationSource','DeveloperCommentsModerationType','DevxFluxDispatcher','XPluginCommentsEditCommentAsyncController','XCommentEmbedPluginEmbedAsyncDialogController','XPluginCommentsFlagCommentAsyncController','XPluginCommentsLikeCommentAsyncController','XPluginCommentsHideCommentAsyncController','PluginOptin','XPluginCommentsPagerAsyncController','XPluginCommentsRepliesPagerAsyncController','UnverifiedXD','URI','WebStorage','getMentionsTextForContentState','getVisibleValueForContentState','mixInEventEmitter','nullthrows','uniqueID'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=10,j='__DEVX__',k={visibleValue:'',encodedValue:''},l={change:true,composerChange:true,composerCommentAdded:true,login:true,moreCommentsCompleted:true,moreRepliesCompleted:true,postError:true,sortingCompleted:true,sentryAction:true,previousComposerCommentPrefill:true,actorChange:true,previousPostToFeedPrefill:true,commentsCountChange:true},m={maxLines:10,maxLength:1000},n=[],o={},p={userID:null,actors:{},actorsOptIn:{},appID:null,afterCursor:null,channelURL:null,composerSearchSource:{},deeplinkedCommentID:null,href:'',iframeReferer:null,isMobile:false,isModerator:false,mirroredPage:null,moderateURL:null,targetFBID:null,totalCount:0,user:{},minFeedLength:0,maxCommentLength:0,enablePhoto:false,enableSticker:false,ret:null,threadClosed:false,shouldSwitchAccount:false,fromModTool:false},q=false,r={},s={},t={},u={},v={ordering:null,ranking_allowed:null},w={},x={},y={setPostToFeed:true,sort:true,showMoreComments:true,showMoreReplies:true,toggleVisibility:true},z={restorePreviousState:true,setUser:true,edit:true,showReplyComposer:true,cancelEdit:true,cancelReply:true},aa={addComment:true,addReply:true,saveEdit:true};function ba(ja){!ia.hasOwnProperty(ja)?h(0):void 0;}function ca(){!Array.isArray(n)?h(0):void 0;!(o instanceof Object)?h(0):void 0;}function da(ja){var ka,la=ha.getUser().id,ma=ja.action,na=(ka=ia[ja.action]).bind.apply(ka,[ia].concat(ja.args));if(ha.isLoggedIn()&&(ha.isPlatformEnabled(la)||z[ma])||y[ma]){na.call();}else{var oa=c('WebStorage').getSessionStorage();if(oa)oa.setItem('previousState',JSON.stringify(ea(ja)));new (c('PluginOptin'))('comments').addReturnParams({numposts:Math.min(Math.max(1,p.totalCount),100),order_by:v.ordering}).start();}}function ea(ja){var ka='',la='',ma=[],na={},oa={},pa=q,qa=ha.getCreateComposerContent();if(qa)ka=qa.encodedValue;if(!aa[ja.action]){la=ja.action;ma=ja.args;}Object.keys(w).forEach(function(ra){var sa=ha.getCreateComposerContent(ra);if(sa.encodedValue)na[ra]=sa.encodedValue;});Object.keys(x).forEach(function(ra){var sa=ha.getEditComposerContent(ra);if(sa.encodedValue)oa[ra]=sa.encodedValue;});return {commentBody:ka,action:la,commentIDs:ma,replies:na,edits:oa,postToFeed:pa};}function fa(ja,ka,la){return la.indexOf(ja)===ka;}function ga(event,ja){if(!p.channelURL)return;ja.href=p.href;c('UnverifiedXD').send({data:JSON.stringify(ja),event:event,type:'sdk_event'},p.channelURL);}var ha={LOGGED_OUT_USER:'0',getCommentIDs:function(){return n;},getByID:function(ja){ca();return c('nullthrows')(o)[ja];},isOptimisticComment:function(ja){return ja.id.startsWith(j);},getCurrentSorting:function(){return c('nullthrows')(v.ordering);},isRankingAllowed:function(){return c('nullthrows')(v.ranking_allowed);},getTargetFBID:function(){return c('nullthrows')(p.targetFBID);},getCommentsCount:function(){ca();return p.totalCount;},updateCommentsCount:function(ja){p.totalCount+=ja;this.emit('commentsCountChange');},getUser:function(){return p.user;},getIframeReferer:function(){return p.iframeReferer;},getAuthor:function(ja){return this.getByID(this.getByID(ja).authorID);},getPageSize:function(){return i;},getCommentBodyTruncationLimits:function(){return m;},getComposerSearchSource:function(){return p.composerSearchSource;},getMirroredPage:function(){return p.mirroredPage;},getMinFeedLength:function(){return p.minFeedLength+1;},getMaxCommentLength:function(){return p.maxCommentLength?p.maxCommentLength:Number.MAX_VALUE;},isMirrored:function(){return this.getMirroredPage()!=null;},isReply:function(ja){var ka=this.getByID(ja);return ka.targetID!==this.getTargetFBID();},getPermalink:function(ja){var ka=this.getByID(ja);return new (c('URI'))(ka.ogURL).setQueryData({fb_comment_id:ja}).toString();},isOptinReturn:function(){return !!p.ret;},setActor:function(ja){p.user=p.actors[ja];},getPostToFeed:function(){return q;},setPostToFeed:function(ja){q=ja;},getEnablePhoto:function(){return p.enablePhoto;},getEnableSticker:function(){return p.enableSticker;},isDeeplinkComment:function(){return !!p.deeplinkedCommentID&&p.fromModTool;},getOriginalLink:function(){return p.href;},getCreateComposerAttachment:function(ja){return r[ja||j]||null;},setCreateComposerAttachment:function(ja,ka){r[ka||j]=ja;this.emit('composerChange');},getEditComposerAttachment:function(ja){return s[ja]||null;},setEditComposerAttachment:function(ja,ka){s[ka]=ja;this.emit('composerChange');},getLoadingCreateComposerAttachment:function(ja){return t[ja||j]||false;},setLoadingCreateComposerAttachment:function(ja,ka){t[ka||j]=ja;this.emit('composerChange');},getLoadingEditComposerAttachment:function(ja){return u[ja]||false;},setLoadingEditComposerAttachment:function(ja,ka){u[ka]=ja;this.emit('composerChange');},setCreateComposerState:function(ja,ka){w[ka||j]=ja;this.emit('composerChange');},getCreateComposerState:function(ja){return w[ja||j]||null;},getCreateComposerContent:function(ja){return this._editorStateToComposerPayload(this.getCreateComposerState(ja));},isEmptyCreateComposer:function(ja){return this.getLoadingCreateComposerAttachment(ja)||this.getCreateComposerContent(ja).visibleValue.trim()===''&&!this.getCreateComposerAttachment(ja);},setEditComposerState:function(ja,ka){x[ka]=ja;this.emit('composerChange');},getEditComposerState:function(ja){return x[ja];},getEditComposerContent:function(ja){return this._editorStateToComposerPayload(this.getEditComposerState(ja));},isEmptyEditComposer:function(ja){return this.getLoadingEditComposerAttachment(ja)||this.getEditComposerContent(ja).visibleValue.trim()===''&&!this.getEditComposerAttachment(ja);},hasTextChanged:function(ja,ka){return ja.trim()!==ka.trim();},hasAttachmentChanged:function(ja,ka){if(ja){return ka?ja.fbid!==ka.fbid:true;}else return !!ka;},hasCommentChanged:function(ja,ka){var la=this.getByID(ja);return this.hasTextChanged(ka.encodedValue,la.body.text)||this.hasAttachmentChanged(s[ja],la.photo_comment||la.attachment);},_editorStateToComposerPayload:function(ja){if(!ja)return k;var ka=ja.getCurrentContent(),la=c('getVisibleValueForContentState')(ka),ma=c('getMentionsTextForContentState')(ka);return {visibleValue:la,encodedValue:ma};},hasAttachment:function(){var ja=Object.keys(t);for(var ka=0;ka<ja.length;ka++)if(t[ja[ka]]||r[ja[ka]])return true;return false;},getActorIDs:function(){return Object.keys(p.actors);},getModerateURL:function(){return p.moderateURL;},isLoggedIn:function(){return p.user.id!==ha.LOGGED_OUT_USER;},isPlatformEnabled:function(ja){return p.actorsOptIn[ja];},isMobile:function(){return p.isMobile;},useLegacyMentionsInput:function(){return this.isMobile()||!this.isLoggedIn();},useCustomActorSelector:function(){return this.isMobile()||document.body.offsetWidth<450;},isViewerModerator:function(){return p.isModerator;},isThreadClosed:function(){return p.threadClosed;},shouldSwitchAccount:function(){return p.shouldSwitchAccount;},hasUnloadedComments:function(){return !!p.afterCursor;},hasUnloadedReplies:function(ja){var ka=this.getByID(ja).public_replies;if(!ka)return false;if(ka.afterCursor)return true;if((!ka.commentIDs||ka.commentIDs.length===0)&&ka.totalCount>0)return true;return false;},getUnloadedCommentsCount:function(){return p.totalCount-n.length;},getDialogWidth:function(){return Math.min(document.body.offsetWidth-10,this.isMobile()?320:445);},dispatcherIndex:c('DevxFluxDispatcher').register(function(ja){ba(ja.action);da(ja);}),init:function(ja,ka,la,ma){p=ka;this.updateCommentData(ja,la);Object.keys(p.actors).forEach(function(na){return o[na]=p.actors[na];});this.setActor(p.userID);v.ranking_allowed=ma;},updateCommentData:function(ja,ka){n=ja.commentIDs;Object.assign(o,this.initComments(n,ja.idMap));v.ordering=ka;},initComment:function(ja){ja.collapsed=false;ja.editor=false;ja.composer=false;ja.deleted=false;ja.flagged=false;return ja;},initComments:function(ja,ka){ja.forEach(function(la){return ka[la]=this.initComment(ka[la]);}.bind(this));return ka;},emit:undefined,addListener:undefined,removeCurrentListener:undefined,ActionHandler:undefined};c('mixInEventEmitter')(ha,l);var ia={ban:function(ja){var ka=ha.getByID(ja);ka.deleted=true;ha.emit('change');var la=c('XPluginCommentsBanAuthorAsyncController').getURIBuilder().setString('comment_id',ja).getURI();new (c('AsyncRequest'))(la).setMethod('POST').setData({ban:true,source:c('DeveloperCommentsModerationSource').URL}).send();},hide:function(ja){var ka=ha.getByID(ja);ka.deleted=true;ha.emit('change');var la=c('XPluginCommentsHideCommentAsyncController').getURIBuilder().setInt('url_id',p.targetFBID).setEnum('action',c('DeveloperCommentsModerationAction').DELETE).setEnum('type',c('DeveloperCommentsModerationType').APPROVED).getURI();new (c('AsyncRequest'))(la).setData({comment_ids:[ja]}).setMethod('POST').send();},addComment:function(){var ja=ha.getCreateComposerContent(),ka=this._getAttachmentFBID(ha.getCreateComposerAttachment()),la=c('XPluginCommentsCreateCommentAsyncController').getURIBuilder().setInt('target_id',p.targetFBID).getURI();new (c('AsyncRequest'))(la).setData({app_id:p.appID,av:ha.getUser().id,text:ja.encodedValue,attached_photo_fbid:ka.photoFBID,attached_sticker_fbid:ka.stickerFBID,post_to_feed:ha.getPostToFeed(),iframe_referer:p.iframeReferer}).setMethod('POST').setHandler(function(ma){var na=ma.payload,oa=na.commentID;this._prependComment(na.idMap[oa]);delete w[j];ha.emit('composerCommentAdded',{});ga('comment.create',{commentID:oa,message:ja.visibleValue});if(na.sentryAction)ha.emit('sentryAction',na.sentryAction,oa);}.bind(this)).setErrorHandler(function(ma){delete o[j];n.shift();ha.updateCommentsCount(-1);ha.emit('change');ha.emit('postError',ma);}).send();this._prependComment({authorID:p.user.id,targetID:p.targetFBID,body:{text:ja.visibleValue}});ha.updateCommentsCount(1);},addReply:function(ja){var ka=ha.getCreateComposerContent(ja),la=this._getAttachmentFBID(ha.getCreateComposerAttachment(ja)),ma=c('XPluginCommentsCreateReplyAsyncController').getURIBuilder().setString('parent_comment_id',ja).getURI(),na=j+c('uniqueID')();new (c('AsyncRequest'))(ma).setData({app_id:p.appID,av:ha.getUser().id,text:ka.encodedValue,attached_photo_fbid:la.photoFBID,attached_sticker_fbid:la.stickerFBID,iframe_referer:p.iframeReferer,replied_to:ha.getByID(ja).replyToCommentID}).setMethod('POST').setHandler(function(qa){var ra=ha.getByID(ja),sa=Object.assign({},ra.public_replies);Object.assign(o,qa.payload.idMap);ra=ha.getByID(ja);ra.public_replies=sa;delete o[na];delete w[ja];n.splice(n.indexOf(na),1);ra.composer=false;delete ra.replyToCommentID;ra.public_replies.commentIDs.pop();ra.public_replies.commentIDs.push(qa.payload.commentID);ga('comment.create',{commentID:qa.payload.commentID,parentCommentID:ja,message:ka.visibleValue});ha.emit('change');}).setErrorHandler(function(qa){delete o[na];n.splice(n.indexOf(na),1);oa=ha.getByID(ja);oa.public_replies.commentIDs.pop();oa.public_replies.totalCount--;oa.composer=false;delete oa.replyToCommentID;ha.emit('change');ha.emit('postError',qa);}).send();var oa=ha.getByID(ja),pa=Object.assign({},oa.public_replies);if(!pa.commentIDs)pa.commentIDs=[];if(!pa.totalCount)pa.totalCount=0;pa.totalCount++;pa.commentIDs.push(na);oa.public_replies=pa;o[na]={authorID:p.user.id,body:{text:ka.visibleValue},targetID:ja,id:na};n.push(na);ha.emit('change');},_prependComment:function(ja){if(!ja.id){ja.id=j;}else{n.shift();delete o[j];}n.unshift(ja.id);o[ja.id]=ha.initComment(ja);ha.emit('change');},_getAttachmentFBID:function(ja){var ka=0,la=0;if(ja)if(ja.attachmentType==='photo'){ka=c('nullthrows')(ja.fbid);}else if(ja.attachmentType==='sticker')la=c('nullthrows')(ja.fbid);return {photoFBID:ka,stickerFBID:la};},edit:function(ja,ka){var la=ha.getByID(ja);la.editor=true;la.prefillText=ka;ha.emit('change');},saveEdit:function(ja){var ka=JSON.parse(JSON.stringify(ha.getByID(ja))),la=c('XPluginCommentsEditCommentAsyncController').getURIBuilder().getURI(),ma=ha.getEditComposerContent(ja),na=this._getAttachmentFBID(ha.getEditComposerAttachment(ja)),oa=ha.hasCommentChanged(ja,ma);if(oa){new (c('AsyncRequest'))(la).setMethod('POST').setData({app_id:p.appID,text:ma.encodedValue,comment_id:ja,av:ha.getAuthor(ja).id,attached_photo_fbid:na.photoFBID,attached_sticker_fbid:na.stickerFBID,iframe_referer:p.iframeReferer}).setHandler(function(qa){var ra=qa.payload;o[ra.commentID]=ha.initComment(ra.idMap[ra.commentID]);delete x[ja];ha.emit('change');}).setErrorHandler(function(qa){ka.editor=false;Object.assign(ha.getByID(ja),ka);ha.emit('change');ha.emit('postError',qa);}).send();var pa=ha.getByID(ja);pa.editor=false;pa.body.text=ma.visibleValue;if(na.photoFBID===0)delete pa.photo_comment;if(na.stickerFBID===0)delete pa.attachment;delete pa.ranges;ha.emit('change');}else this.cancelEdit(ja);},cancelEdit:function(ja){var ka=ha.getByID(ja);ka.editor=false;ha.emit('change');},'delete':function(ja){var ka=ha.getByID(ja);ka.deleted=true;var la=c('XPluginCommentsDeleteCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(la).setData({app_id:p.appID,comment_id:ja,av:ha.getAuthor(ja).id,iframe_referer:p.iframeReferer}).setMethod('POST').setHandler(function(){return (ga('comment.remove',{commentID:ja}));}).setErrorHandler(function(ma){var na=ha.getByID(ja);na.deleted=false;ha.updateCommentsCount(1);ha.emit('change');}).send();ha.updateCommentsCount(-1);ha.emit('change');},like:function(ja){var ka=ha.getByID(ja),la=c('XPluginCommentsLikeCommentAsyncController').getURIBuilder().setBool('action_like',!ka.hasLiked).getURI();new (c('AsyncRequest'))(la).setData({app_id:p.appID,comment_id:ka.id,iframe_referer:p.iframeReferer}).setMethod('POST').setHandler(function(ma){var na=ma.payload;Object.assign(o[na.commentID],ha.initComment(na.idMap[na.commentID]));ha.emit('change');}).setErrorHandler(function(ma){ka.likeCount--;ka.hasLiked=false;ha.emit('postError',ma);}).send();ka.hasLiked=!ka.hasLiked;if(ka.hasLiked){ka.likeCount++;}else if(ka.likeCount>0)ka.likeCount--;o[ka.id]=ka;ha.emit('change');},sort:function(ja){var ka=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',p.targetFBID).setEnum('ordering',ja).getURI();new (c('AsyncRequest'))(ka).setMethod('POST').setData({app_id:p.appID,limit:ha.getPageSize(),iframe_referer:p.iframeReferer}).setHandler(function(la){var ma=la.payload;p.afterCursor=ma.afterCursor;ha.updateCommentData(ma,ja);ha.emit('sortingCompleted');ha.emit('change');}).send();},showMoreComments:function(){var ja=c('XPluginCommentsPagerAsyncController').getURIBuilder().setInt('target_id',p.targetFBID).setEnum('ordering',ha.getCurrentSorting()).getURI();new (c('AsyncRequest'))(ja).setMethod('POST').setData({app_id:p.appID,after_cursor:p.afterCursor,limit:ha.getPageSize(),deeplinked_comment_id:p.deeplinkedCommentID,iframe_referer:p.iframeReferer}).setHandler(function(ka){var la=ka.payload;p.afterCursor=la.afterCursor;n=n.concat(la.commentIDs).filter(fa);Object.assign(o,ha.initComments(la.commentIDs,la.idMap));ha.emit('moreCommentsCompleted');ha.emit('change');}).setErrorHandler(function(ka){ha.emit('postError',ka);ha.emit('moreCommentsCompleted');}).send();},setUser:function(ja){ha.setActor(ja);ha.emit('actorChange');},setPostToFeed:function(ja){ha.setPostToFeed(ja);},showMoreReplies:function(ja){var ka=c('XPluginCommentsRepliesPagerAsyncController').getURIBuilder().setString('comment_id',ja).getURI(),la=ha.getByID(ja).public_replies;new (c('AsyncRequest'))(ka).setMethod('POST').setData({app_id:p.appID,after_cursor:la.afterCursor,limit:ha.getPageSize(),iframe_referer:p.iframeReferer}).setHandler(function(ma){var na=ma.payload;o=Object.assign(ha.initComments(na.commentIDs,na.idMap),o);la.afterCursor=na.afterCursor;la.commentIDs=la.commentIDs.concat(na.commentIDs).filter(fa);ha.emit('moreRepliesCompleted',{commentID:ja});ha.emit('change');}).setErrorHandler(function(ma){ha.emit('postError',ma);ha.emit('moreRepliesCompleted',{commentID:ja});}).send();},toggleVisibility:function(ja){var ka=ha.getByID(ja);ka.collapsed=!ka.collapsed;ha.emit('change');},flag:function(ja){o[ja].flagged=true;this._sendFlagOrUnflagRequest(ja,'flag');ha.emit('change');},unflag:function(ja){o[ja].flagged=false;this._sendFlagOrUnflagRequest(ja,'unflag');ha.emit('change');},_sendFlagOrUnflagRequest:function(ja,ka){var la=c('XPluginCommentsFlagCommentAsyncController').getURIBuilder().getURI();new (c('AsyncRequest'))(la).setData({app_id:p.appID,comment_id:ja,iframe_referer:p.iframeReferer,unflag:ka==='unflag'}).setMethod('POST').setErrorHandler(function(ma){o[ja].flagged=!o[ja].flagged;ha.emit('postError',ma);}).send();},report:function(ja){window.open(ha.getByID(ja).reportURI,'_blank');},showReplyComposer:function(ja,ka){var la=ha.getByID(ja);if(ha.isReply(ja)){var ma=ja;la=ha.getByID(la.targetID);la.replyToCommentID=ma;}la.prefillText=ka;la.composer=true;ha.emit('change');},cancelReply:function(ja){var ka=ha.getByID(ja);ka.composer=false;delete ka.replyToCommentID;ha.emit('change');},restorePreviousState:function(){var ja=c('WebStorage').getSessionStorage();if(ja){var ka=JSON.parse(ja.getItem('previousState'));ja.clear();var la=ha.getCommentIDs();if(ka.action){var ma={};ma.action=ka.action;ma.args=ka.commentIDs;da(ma);}var na=ka.replies,oa=ka.edits;la.map(function(pa){if(na[pa])this.showReplyComposer(pa,na[pa]);if(oa[pa])this.edit(pa,oa[pa]);}.bind(this));if(ka.commentBody)ha.emit('previousComposerCommentPrefill',{prefillText:ka.commentBody});if(ka.postToFeed){this.setPostToFeed(ka.postToFeed);ha.emit('previousPostToFeedPrefill');}}},embed:function(ja){var ka=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',ja).setInt('width',ha.getDialogWidth()).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(ka));}};ha.ActionHandler=ia;f.exports=ha;},null);
__d('CommentsPluginAction',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={EDIT:'edit',DELETE:'delete',FLAG:'flag',SETUSER:'setUser',BAN:'ban',HIDE:'hide',REPORT:'report',COLLAPSE:'collapse',EMBED:'embed',getLabel:function(j){switch(j){case i.COLLAPSE:return h._("Collapse comment");case i.EDIT:return h._("Edit comment");case i.DELETE:return h._("Delete comment");case i.FLAG:return h._("Mark as spam");case i.BAN:return h._("Ban user");case i.HIDE:return h._("Hide comment");case i.REPORT:return h._("Report to Facebook");case i.SETUSER:return h._("Switch Accounts");case i.EMBED:return h._("Embed");}},getMenuActions:function(){return [i.COLLAPSE,i.EDIT,i.DELETE,i.FLAG,i.BAN,i.HIDE,i.REPORT,i.EMBED];}};f.exports=i;},null);
__d('MixinCommentsPluginConfirmAction',['fbt','invariant','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','React','Set','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=120,k={componentWillMount:function(){this.setState({actionConfirmationShown:false,action:null,id:null,pageY:null});},requiresConfirmation:function(l){var m=new (c('Set'))([c('CommentsPluginAction').DELETE,c('CommentsPluginAction').BAN,c('CommentsPluginAction').HIDE]);return m.has(l);},confirmAction:function(l,m,n){this.setState({actionConfirmationShown:true,action:l,id:m,pageY:n});},_onActionConfirmed:function(){c('CommentsPluginActions')[this.state.action](this.state.id);this.setState({actionConfirmationShown:false});},_onActionCancelled:function(){this.setState({actionConfirmationShown:false});},_getActionMetadata:function(l){switch(l){case c('CommentsPluginAction').DELETE:return {body:h._("Are you sure you want to delete this comment?"),button_label:h._("Confirm Delete")};case c('CommentsPluginAction').BAN:return {body:h._("Are you sure you want to ban this user?"),button_label:h._("Confirm Ban")};case c('CommentsPluginAction').HIDE:return {body:h._("Are you sure you want to hide this comment?"),button_label:h._("Confirm Hide")};case c('CommentsPluginAction').SETUSER:return {body:h._("Commenting as another account will clear the attachments you've uploaded."),button_label:h._("Switch Accounts")};default:i(0);}},renderActionConfirmationDialog:function(){var l=this.state.action;if(!l)return null;var m=this._getActionMetadata(l);return (c('React').createElement(c('XUIDialog.react'),{shown:this.state.actionConfirmationShown,fixedTopPosition:this.state.pageY+j<document.body.offsetHeight?this.state.pageY-j/2:null,width:c('CommentsPluginStore').getDialogWidth()},c('React').createElement(c('XUIDialogTitle.react'),{showCloseButton:false},c('CommentsPluginAction').getLabel(l)),c('React').createElement(c('XUIDialogBody.react'),null,m.body),c('React').createElement(c('XUIDialogFooter.react'),null,c('React').createElement(c('XUIDialogCancelButton.react'),{onClick:this._onActionCancelled.bind(this)}),c('React').createElement(c('XUIDialogButton.react'),{use:'confirm',label:m.button_label,onClick:this._onActionConfirmed.bind(this)}))));}};f.exports=k;},null);
__d('CommentsPluginAuthorSelector.react',['cx','fbt','ActorSelector.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','MixinCommentsPluginConfirmAction','React','ShortProfiles','XUIText.react','classWithMixins','joinClasses','mixin'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function l(m){k.constructor.call(this,m);var n=this;n.$CommentsPluginAuthorSelector1=this.$CommentsPluginAuthorSelector1.bind(this);this.actorIDs=c('CommentsPluginStore').getActorIDs();this.state={actorsData:null};}l.prototype.componentWillMount=function(){if(this.actorIDs.length>1&&c('CommentsPluginStore').useCustomActorSelector())c('ShortProfiles').getMulti(this.actorIDs,function(m){this.setState({actorsData:m});}.bind(this));};l.prototype.$CommentsPluginAuthorSelector1=function(m){if(c('CommentsPluginStore').hasAttachment()){this.confirmAction(c('CommentsPluginAction').SETUSER,m);}else c('CommentsPluginActions').setUser(m);};l.prototype.$CommentsPluginAuthorSelector2=function(m){return i._("Commenting as {actorName}",[i.param('actorName',m)]);};l.prototype.render=function(){if(this.actorIDs.length<=1)return null;var m=c('CommentsPluginStore').getUser().id;if(c('CommentsPluginStore').useCustomActorSelector()){var n=this.state.actorsData;if(!n)return null;return (c('React').createElement('div',{className:"_3-95"},c('React').createElement(c('XUIText.react'),{size:'small',className:"_1y5f _2pih"},i._("Commenting as")),c('React').createElement('select',{value:m,onChange:function(o){return this.$CommentsPluginAuthorSelector1(o.target.value);}.bind(this),className:"_1y5g"},this.actorIDs.map(function(o){return (c('React').createElement('option',{value:o,key:o},n&&n[o].name));})),this.renderActionConfirmationDialog()));}return (c('React').createElement('div',{className:c('joinClasses')(this.props.className,'inlineBlock')},c('React').createElement(c('ActorSelector.react'),{actorIDs:this.actorIDs,coverEnabled:false,selectedActorID:m,onChange:function(o){return this.$CommentsPluginAuthorSelector1(o.value);}.bind(this),tooltipConstructor:this.$CommentsPluginAuthorSelector2}),this.renderActionConfirmationDialog()));};f.exports=l;},null);
__d('CommentsPluginComposerMirroringNotice.react',['cx','fbt','CommentsPluginStore','React'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.render=function(){var n=c('CommentsPluginStore').getMirroredPage();if(!n)return null;return (c('React').createElement('div',{className:"_5sge _2ph-"},n.name?this.props.isReply?i._("Your reply may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):i._("Your comment may also appear on {page name}'s Facebook Page.",[i.param('page name',c('React').createElement('a',{href:n.uri,target:'blank'},n.name))]):this.props.isReply?i._("Your reply may also appear on Facebook."):i._("Your comment may also appear on Facebook.")));};function m(){j.apply(this,arguments);}m.propTypes={isReply:l.bool};f.exports=m;},null);
__d('CommentsPluginProfilePicture.react',['cx','Image.react','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){return (c('React').createElement('a',babelHelpers['extends']({},this.props,{href:this.props.href}),c('React').createElement(c('Image.react'),{className:(!this.props.isReply?"_1ci":'')+(this.props.isReply?' '+"_1cj":''),src:this.props.src})));};function l(){i.apply(this,arguments);}l.propTypes={href:k.string.isRequired,src:k.string.isRequired,isReply:k.bool};f.exports=l;},null);
__d('CommentsPluginComposer.react',['cx','fbt','ActorURI','AsyncRequest','CommentsPluginStore','CommentsPluginComposerMirroringNotice.react','CommentsPluginConfig','CommentsPluginProfilePicture.react','DraftEntity','EditorState','EmoticonsList','MentionsInput.react','React','UFIAttachMediaSection.react','UFIAttachedMediaPreview.react','UFICommentUtils','UFIImageBlock.react','UFIStickerButton.react','XUINotice.react','XUITypeaheadView.react','createEditorStateWithEntities','getMentionsInputDecorator','getVisibleValueForContentState','insertEmoticonIntoEditorState','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=19,n='/ajax/ufi/sticker_preview/';function o(q){return c('DraftEntity').create('MENTION','IMMUTABLE',{id:q.id});}j=babelHelpers.inherits(p,c('React').Component);k=j&&j.prototype;function p(q,r){k.constructor.call(this,q,r);this.state=this.$CommentsPluginComposer1();var s=this;s.$CommentsPluginComposer2=this.$CommentsPluginComposer2.bind(this);s.$CommentsPluginComposer3=this.$CommentsPluginComposer3.bind(this);}p.prototype.$CommentsPluginComposer1=function(q){var r=null,s=null,t=q||this.props.prefillText;if(t){r=this.$CommentsPluginComposer4(t);if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(r,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(r,this.props.parentCommentIDOfNewReply);}else{var u=null,v=null;if(this.props.editCommentID){s=c('CommentsPluginStore').getByID(this.props.editCommentID);r=c('createEditorStateWithEntities')({text:s.body.text,ranges:c('UFICommentUtils').shallowCopyRanges(s.ranges).filter(function(y){return !y.entity.external;}),decorator:c('getMentionsInputDecorator')(),entityCreationFn:o});if(s.photo_comment){u=s.photo_comment;u.attachmentType='photo';this.$CommentsPluginComposer5(u);}else if(s.attachment){v=s.attachment;v.attachmentType='sticker';this.$CommentsPluginComposer5(v);}}else if(this.props.parentCommentIDOfNewReply){s=c('CommentsPluginStore').getByID(this.props.parentCommentIDOfNewReply);if(s.replyToCommentID&&c('CommentsPluginStore').getAuthor(s.replyToCommentID).id!==c('CommentsPluginStore').getUser().id){var w=c('CommentsPluginStore').getAuthor(s.replyToCommentID),x={id:w.id,text:w.name,offset:0,length:w.name.length,entity:{id:w.id}};r=c('EditorState').moveFocusToEnd(c('createEditorStateWithEntities')({text:w.name+' ',ranges:[x],decorator:c('getMentionsInputDecorator')(),entityCreationFn:o}));}}if(!r)r=c('EditorState').createEmpty(c('getMentionsInputDecorator')());}return {editorState:r,expanded:t||!!this.props.alwaysExpanded,attachedPhoto:u,attachedSticker:v};};p.prototype.$CommentsPluginComposer4=function(q){return c('createEditorStateWithEntities')({text:q,decorator:c('getMentionsInputDecorator')()});};p.prototype.$CommentsPluginComposer6=function(){return !this.props.editCommentID&&!this.props.parentCommentIDOfNewReply;};p.prototype.$CommentsPluginComposer5=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer7=function(q){if(this.props.editCommentID){c('CommentsPluginStore').setLoadingEditComposerAttachment(q,this.props.editCommentID);}else c('CommentsPluginStore').setLoadingCreateComposerAttachment(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer8=function(){if(this.props.editCommentID){return c('CommentsPluginStore').getLoadingEditComposerAttachment(this.props.editCommentID);}else return c('CommentsPluginStore').getLoadingCreateComposerAttachment(this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer9=function(){return this.state.isLoadingAttachment||!!this.state.attachedSticker||!!this.state.attachedPhoto;};p.prototype.getPhotoUploadData=function(){var q=c('CommentsPluginStore').getUser().id,r={profile_id:q,target_id:this.props.targetID,source:m};r[c('ActorURI').PARAMETER_ACTOR]=q;return r;};p.prototype.onPhotoUploadComplete=function(q){if(!this.$CommentsPluginComposer8())return;var r=q.getPayload();if(r&&r.fbid){r.attachmentType='photo';this.$CommentsPluginComposer5(r);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.onStickerSelected=function(q){this.$CommentsPluginComposer10();new (c('AsyncRequest'))(n).setData({sticker_id:q}).setErrorHandler(this.resetAttachment.bind(this)).setHandler(this.$CommentsPluginComposer11.bind(this)).send();};p.prototype.$CommentsPluginComposer11=function(q){if(!this.$CommentsPluginComposer8())return;var r=q.getPayload();if(r&&r.fbid){r.attachmentType='sticker';this.$CommentsPluginComposer5(r);this.$CommentsPluginComposer7(false);this.setState({attachedSticker:r,isLoadingAttachment:false,expanded:true});}else this.resetAttachment(null);};p.prototype.insertEmoticonToCommentText=function(q){var r=c('EmoticonsList').symbols[q];if(!r)return;var s=c('insertEmoticonIntoEditorState')(r,this.state.editorState);if(s!==this.state.editorState)this.$CommentsPluginComposer2(s);};p.prototype.resetAttachment=function(event){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(false);this.setState({attachedPhoto:null,attachedSticker:null,isLoadingAttachment:false});};p.prototype.$CommentsPluginComposer10=function(){this.$CommentsPluginComposer5(undefined);this.$CommentsPluginComposer7(true);this.setState({attachedSticker:null,attachedPhoto:null,isLoadingAttachment:true});};p.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerCommentAdded',function(event){if(this.$CommentsPluginComposer6()){var q=this.$CommentsPluginComposer1();q.expanded=true;this.setState(q);if(this.refs.composer.style)this.refs.composer.style.cssText='';}}.bind(this));c('CommentsPluginStore').addListener('previousComposerCommentPrefill',function(q){var r=this.$CommentsPluginComposer1(q.prefillText);r.expanded=true;this.setState(r);}.bind(this));if(!this.$CommentsPluginComposer6())this.refs.composer.focus();};p.prototype.$CommentsPluginComposer2=function(q){this.setState({editorState:q});if(this.props.editCommentID){c('CommentsPluginStore').setEditComposerState(q,this.props.editCommentID);}else c('CommentsPluginStore').setCreateComposerState(q,this.props.parentCommentIDOfNewReply);};p.prototype.$CommentsPluginComposer12=function(){if(this.props.editCommentID)return c('CommentsPluginStore').isReply(this.props.editCommentID);return !!this.props.parentCommentIDOfNewReply;};p.prototype.$CommentsPluginComposer3=function(){this.setState({expanded:true});};p.prototype.setFileInput=function(q,r){this.setState({fileInput:q,fileUploader:r});};p.prototype.$CommentsPluginComposer13=function(){return c('getVisibleValueForContentState')(this.state.editorState.getCurrentContent());};p.prototype.$CommentsPluginComposer14=function(q){var r=q.target,s=r.value;r.value='';r.value=s;this.$CommentsPluginComposer3();};p.prototype.$CommentsPluginComposer15=function(q){var r=q.target,s=r.scrollHeight;if(r.offsetHeight<s)r.style.cssText='height:'+s+'px';this.$CommentsPluginComposer2(c('createEditorStateWithEntities')({text:r.value}));};p.prototype.$CommentsPluginComposer16=function(){var q=this.props.placeholder||i._("Add a comment...");if(c('CommentsPluginStore').useLegacyMentionsInput())return (c('React').createElement('textarea',{className:"_1cb"+(' '+"_1u9t")+(this.props.readOnly?' '+"_5pu_":''),placeholder:q,ref:'composer',onFocus:this.$CommentsPluginComposer14.bind(this),onChange:this.$CommentsPluginComposer15.bind(this),readOnly:this.props.readOnly,value:this.$CommentsPluginComposer13()}));return (c('React').createElement(c('MentionsInput.react'),{className:"_1cb"+(this.props.readOnly?' '+"_5pu_":''),editorState:this.state.editorState,mentionsSource:c('CommentsPluginStore').getComposerSearchSource(),onChange:this.$CommentsPluginComposer2,onFocus:this.$CommentsPluginComposer3,placeholder:q,readOnly:this.props.readOnly,typeaheadView:c('XUITypeaheadView.react'),ref:'composer'}));};p.prototype.render=function(){var q=this.props.editCommentID?c('CommentsPluginStore').getAuthor(this.props.editCommentID):q=c('CommentsPluginStore').getUser(),r=this.$CommentsPluginComposer12();return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium',className:c('joinClasses')("_4uyl"+(r?' '+"_1zz6":'')+(!this.state.expanded?' '+"_1zz7":'')+(!!this.state.expanded?' '+"_1zz8":''),this.props.className)},c('CommentsPluginStore').useCustomActorSelector()?c('React').createElement('div',null):c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:q.uri,src:q.thumbSrc,isReply:r,target:'_blank'}),c('React').createElement('div',null,c('React').createElement('div',{className:'UFIInputContainer'},this.$CommentsPluginComposer16(),c('React').createElement('div',{className:"UFICommentAttachmentButtons"+(' '+"clearfix")+(!(c('CommentsPluginStore').isPlatformEnabled(q.id)&&c('CommentsPluginStore').isLoggedIn()&&!this.$CommentsPluginComposer9())?' '+"hidden_elem":'')},this.props.allowPhotoAttachments?c('React').createElement(c('UFIAttachMediaSection.react'),{onPhotoUploadComplete:this.onPhotoUploadComplete.bind(this),getPhotoUploadData:this.getPhotoUploadData.bind(this),prepareForAttachedPhotoPreview:this.$CommentsPluginComposer10.bind(this),setFileInput:this.setFileInput.bind(this),attachment:this.state.attachedPhoto}):null,this.props.allowStickerAttachments?c('React').createElement(c('UFIStickerButton.react'),{onStickerSelected:this.onStickerSelected.bind(this),onEmoticonSelected:this.insertEmoticonToCommentText.bind(this)}):null)),c('React').createElement(c('UFIAttachedMediaPreview.react'),{attachedPhoto:this.state.attachedPhoto,attachedSticker:this.state.attachedSticker,onRemoveAttachedMediaPreviewClicked:this.resetAttachment.bind(this),onRemoveAttachedStickerPreview:this.resetAttachment.bind(this),isLoadingPhoto:this.state.isLoadingAttachment}),this.props.unableToPost?c('React').createElement(c('XUINotice.react'),{use:'warn'},i._({"*":"Comments must be less than {lengthLimit} characters"},[i.param('lengthLimit',c('CommentsPluginStore').getMaxCommentLength(),[0])])):null,this.state.expanded?c('React').createElement('div',{className:"_4uym"},c('React').createElement(c('CommentsPluginComposerMirroringNotice.react'),{isReply:r}),this.props.children):null)));};p.propTypes={editCommentID:l.string,parentCommentIDOfNewReply:l.string,readOnly:l.bool,placeholder:l.node,alwaysExpanded:l.bool,unableToPost:l.bool,allowStickerAttachments:l.bool,allowPhotoAttachments:l.bool};f.exports=p;},null);
__d('CommentsPluginComposerComment.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','Grid.react','InputLabel.react','LeftRight.react','React','XUIButton.react','XUICheckboxInput.react'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('Grid.react').GridItem;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.state={selectedActorID:c('CommentsPluginStore').getUser().id,postToFeed:false,ablePostToFeed:false,commentLength:0,waitingAsyncResponse:false,unableToPost:false};var o=this;o.$CommentsPluginComposerComment1=this.$CommentsPluginComposerComment1.bind(this);o.$CommentsPluginComposerComment2=this.$CommentsPluginComposerComment2.bind(this);}m.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('composerChange',function(){var n=c('CommentsPluginStore').getCreateComposerContent().visibleValue,o=n.trim().length;this.setState({commentLength:o,ablePostToFeed:o>=c('CommentsPluginStore').getMinFeedLength(),unableToPost:o>c('CommentsPluginStore').getMaxCommentLength()});}.bind(this));c('CommentsPluginStore').addListener('composerCommentAdded',function(){this.setState({waitingAsyncResponse:false});this.refs.composer.resetAttachment();}.bind(this));c('CommentsPluginStore').addListener('login',function(){this.setState({waitingAsyncResponse:false});}.bind(this));c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));c('CommentsPluginStore').addListener('previousPostToFeedPrefill',function(){this.setState({postToFeed:c('CommentsPluginStore').getPostToFeed()});}.bind(this));};m.prototype.$CommentsPluginComposerComment2=function(event){var n=!this.state.postToFeed;this.setState({postToFeed:n});c('CommentsPluginActions').setPostToFeed(n);};m.prototype.$CommentsPluginComposerComment1=function(){if(c('CommentsPluginStore').isLoggedIn())this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').setPostToFeed(this.state.postToFeed);c('CommentsPluginActions').addComment();};m.prototype.$CommentsPluginComposerComment3=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer());};m.prototype.render=function(){var n=c('CommentsPluginStore').isLoggedIn()?i._("Post"):i._("Log In to Post"),o=c('CommentsPluginStore').getMinFeedLength()-this.state.commentLength;return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),ref:'composer',className:"_2392",readOnly:this.state.waitingAsyncResponse,unableToPost:this.state.unableToPost},c('React').createElement(c('LeftRight.react'),{className:"_5tr6 clearfix _2ph-"},!c('CommentsPluginStore').isMirrored()?c('React').createElement(c('Grid.react'),{cols:1},c('React').createElement(l,null,c('React').createElement(c('InputLabel.react'),{className:"_1u0n"},c('React').createElement(c('XUICheckboxInput.react'),{checked:this.state.postToFeed,onChange:this.$CommentsPluginComposerComment2}),c('React').createElement('label',{className:"_3-99 _2ern _50f8 _5kx5"},i._("Also post on Facebook")))),c('React').createElement(l,null,this.state.postToFeed&&!this.state.ablePostToFeed?i._({"*":{"character":"Write {lengthRemain} more character to post to Facebook","characters":"Write {lengthRemain} more characters to post to Facebook"}},[i.param('lengthRemain',o,[0]),i['enum'](o===1?'character':'characters',{character:'character',characters:'characters'})]):c('React').createElement('span',null))):c('React').createElement('span',null),c('React').createElement('span',null,c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerComment3(),label:n,use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerComment1})))));};f.exports=m;},null);
__d('CommentsPluginFooter.react',['cx','ImageBlock.react','React','XDeveloperDocumentationController'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('React').createElement('div',{className:"_5lm5 _2pi3 _3-8y"},c('React').createElement(c('ImageBlock.react'),null,c('React').createElement('img',{src:'/images/like/icons/fav.png'}),c('React').createElement('a',{target:'_blank',href:c('XDeveloperDocumentationController').getURIBuilder().setString('path1','plugins').setString('path2','comments').getURI().setSubdomain('developers')},'Facebook Comments Plugin'))));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('CommentsPluginHeader.react',['cx','fbt','CommentsPluginActions','CommentsPluginStore','DeveloperCommentsPluginOrdering','LeftRight.react','Link.react','React','XUISelector.react','XUISpinner.react','XUIText.react'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('XUISelector.react').Option;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n){k.constructor.call(this,n);this.state={sorting:false};var o=this;o.$CommentsPluginHeader1=this.$CommentsPluginHeader1.bind(this);}m.prototype.$CommentsPluginHeader1=function(event){this.setState({sorting:true});c('CommentsPluginStore').addListener('sortingCompleted',function(){this.setState({sorting:false});c('CommentsPluginStore').removeCurrentListener();}.bind(this));c('CommentsPluginActions').sort(event.value);};m.prototype.componentDidMount=function(){c('CommentsPluginStore').addListener('commentsCountChange',function(){this.forceUpdate();}.bind(this));};m.prototype.render=function(){var n=null,o=null;if(c('CommentsPluginStore').getModerateURL())n=c('React').createElement('span',null,c('React').createElement('span',{className:"_52bm"},'|'),c('React').createElement(c('Link.react'),{href:c('CommentsPluginStore').getModerateURL(),target:'_blank'},i._("Moderation Tool")));if(c('CommentsPluginStore').isDeeplinkComment())o=c('React').createElement('span',null,c('React').createElement('span',{className:"_52bm"},'|'),c('React').createElement(c('Link.react'),{href:c('CommentsPluginStore').getOriginalLink(),target:'_blank'},i._("Original Link")));var p=c('DeveloperCommentsPluginOrdering').__types.filter(function(q){return q!=='social'||c('CommentsPluginStore').isRankingAllowed();});return (c('React').createElement(c('LeftRight.react'),{className:"_491z"},c('React').createElement('span',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},c('CommentsPluginStore').getCommentsCount()!==1?i._("{count} Comments",[i.param('count',c('CommentsPluginStore').getCommentsCount())]):i._("1 Comment")),n,o),c('React').createElement('div',null,this.state.sorting?c('React').createElement(c('XUISpinner.react'),{size:'small',className:"_3-90"}):null,c('React').createElement('span',{className:"_pup"},i._("Sort by")),' ',c('React').createElement(c('XUISelector.react'),{alignh:'right',className:"_3-8_",initialValue:c('CommentsPluginStore').getCurrentSorting(),onChange:this.$CommentsPluginHeader1},p.map(function(q){return (c('React').createElement(l,{value:q,key:q},c('DeveloperCommentsPluginOrdering').__labels[q]));})))));};f.exports=m;},null);
__d('CommentsPluginCommentActions.react',['cx','fbt','ActionList.react','CommentsPluginAction','CommentsPluginActions','CommentsPluginStore','Image.react','Link.react','MixinCommentsPluginConfirmAction','React','UFICommentMetadata.react','classWithMixins','mixin'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);var p=this;p.$CommentsPluginCommentActions1=this.$CommentsPluginCommentActions1.bind(this);p.$CommentsPluginCommentActions2=this.$CommentsPluginCommentActions2.bind(this);p.$CommentsPluginCommentActions3=this.$CommentsPluginCommentActions3.bind(this);}m.prototype.$CommentsPluginCommentActions3=function(){c('CommentsPluginActions').like(this.props.commentID);};m.prototype.$CommentsPluginCommentActions2=function(){c('CommentsPluginActions').showReplyComposer(this.props.commentID);};m.prototype.$CommentsPluginCommentActions1=function(){c('CommentsPluginActions').flag(this.props.commentID);};m.prototype.$CommentsPluginCommentActions4=function(n){if(!n.canLike&&c('CommentsPluginStore').isLoggedIn())return null;return (c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions3},n.hasLiked?i._("Unlike"):i._("Like")));};m.prototype.$CommentsPluginCommentActions5=function(){if(c('CommentsPluginStore').isThreadClosed()||c('CommentsPluginStore').shouldSwitchAccount())return null;return (c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions2},i._("Reply")));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('ActionList.react'),{className:"_2vq9"},this.$CommentsPluginCommentActions4(n),this.$CommentsPluginCommentActions5(),c('CommentsPluginStore').isMobile()?n.canEdit?c('React').createElement(c('Link.react'),{onClick:this.confirmAction.bind(this,c('CommentsPluginAction').DELETE,this.props.commentID)},i._("Delete")):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentActions1},i._("Mark as spam")):null,n.likeCount?c('React').createElement('span',null,c('React').createElement(c('Image.react'),{src:'/images/ufi/fbfeed/like.png',className:"_3-8_ _4iy4"}),n.likeCount):null,c('React').createElement(c('UFICommentMetadata.react'),{comment:n,permalink:c('CommentsPluginStore').getPermalink(this.props.commentID),shortenTimestamp:true,showPermalink:!c('CommentsPluginStore').isReply(this.props.commentID),permalinkTarget:'_blank'}),c('CommentsPluginStore').isMobile()?this.renderActionConfirmationDialog():null));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginComposerEdit.react',['cx','fbt','CommentsPluginActions','CommentsPluginComposer.react','CommentsPluginStore','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={waitingAsyncResponse:false,unableToPost:false};var p=this;p.$CommentsPluginComposerEdit3=this.$CommentsPluginComposerEdit3.bind(this);p.$CommentsPluginComposerEdit4=this.$CommentsPluginComposerEdit4.bind(this);this.$CommentsPluginComposerEdit1=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerEdit1=c('CommentsPluginStore').addListener('composerChange',function(){var n=c('CommentsPluginStore').getEditComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:n.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerEdit2=c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerEdit1)this.$CommentsPluginComposerEdit1.remove();if(this.$CommentsPluginComposerEdit2)this.$CommentsPluginComposerEdit2.remove();};m.prototype.$CommentsPluginComposerEdit3=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').saveEdit(this.props.commentID);};m.prototype.$CommentsPluginComposerEdit4=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelEdit(this.props.commentID);};m.prototype.$CommentsPluginComposerEdit5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyEditComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{alwaysExpanded:true,ref:'composer',prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),editCommentID:this.props.commentID,unableToPost:this.state.unableToPost},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerEdit5(),label:i._("Save"),use:'confirm',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit3}),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("Cancel"),use:'default',className:"rfloat _3-99",onClick:this.$CommentsPluginComposerEdit4})),this.props.children));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginComposerReply.react',['cx','fbt','CommentsPluginActions','CommentsPluginAuthorSelector.react','CommentsPluginComposer.react','CommentsPluginStore','React','ReactDOM','XUIButton.react'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);this.state={waitingAsyncResponse:false,unableToPost:false};var p=this;p.$CommentsPluginComposerReply3=this.$CommentsPluginComposerReply3.bind(this);p.$CommentsPluginComposerReply4=this.$CommentsPluginComposerReply4.bind(this);this.$CommentsPluginComposerReply1=null;}m.prototype.componentDidMount=function(){this.$CommentsPluginComposerReply1=c('CommentsPluginStore').addListener('composerChange',function(){var o=c('CommentsPluginStore').getCreateComposerContent(this.props.commentID).visibleValue;this.setState({unableToPost:o.trim().length>c('CommentsPluginStore').getMaxCommentLength()});this.forceUpdate();}.bind(this));this.$CommentsPluginComposerReply2=c('CommentsPluginStore').addListener('actorChange',function(){this.refs.composer.resetAttachment();this.forceUpdate();}.bind(this));var n=c('ReactDOM').findDOMNode(this);if(n.scrollIntoView)n.scrollIntoView();};m.prototype.componentWillUnmount=function(){if(this.$CommentsPluginComposerReply1)this.$CommentsPluginComposerReply1.remove();if(this.$CommentsPluginComposerReply2)this.$CommentsPluginComposerReply2.remove();};m.prototype.$CommentsPluginComposerReply3=function(){this.setState({waitingAsyncResponse:true});c('CommentsPluginActions').addReply(this.props.commentID);this.refs.composer.resetAttachment();};m.prototype.$CommentsPluginComposerReply4=function(){this.refs.composer.resetAttachment();c('CommentsPluginActions').cancelReply(this.props.commentID);};m.prototype.$CommentsPluginComposerReply5=function(){return (this.state.waitingAsyncResponse||this.state.unableToPost||c('CommentsPluginStore').isEmptyCreateComposer(this.props.commentID));};m.prototype.render=function(){var n=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement(c('CommentsPluginComposer.react'),{allowPhotoAttachments:c('CommentsPluginStore').getEnablePhoto(),allowStickerAttachments:c('CommentsPluginStore').getEnableSticker(),ref:'composer',alwaysExpanded:true,prefillText:n.prefillText,readOnly:this.state.waitingAsyncResponse,parentCommentIDOfNewReply:this.props.commentID,unableToPost:this.state.unableToPost,placeholder:i._("Add a reply...")},c('React').createElement('div',{className:"_5tr6 clearfix _2ph_"},c('React').createElement(c('CommentsPluginAuthorSelector.react'),null),c('React').createElement(c('XUIButton.react'),{disabled:this.state.waitingAsyncResponse,label:i._("Cancel"),use:'default',className:"_3-99",onClick:this.$CommentsPluginComposerReply4}),c('React').createElement(c('XUIButton.react'),{disabled:this.$CommentsPluginComposerReply5(),label:i._("Reply"),use:'confirm',className:"_3-99",onClick:this.$CommentsPluginComposerReply3}))));};m.propTypes={commentID:l.string.isRequired};f.exports=m;},null);
__d('CommentsPluginMenu.react',['fbt','ix','CommentsPluginAction','CommentsPluginActions','CommentsPluginConfig','CommentsPluginStore','Image.react','MixinCommentsPluginConfirmAction','ReactXUIMenu','PopoverMenu.react','React','Tooltip','classWithMixins','mixin'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('ReactXUIMenu').Item;j=babelHelpers.inherits(n,c('classWithMixins')(c('React').Component,c('mixin')(c('MixinCommentsPluginConfirmAction'))));k=j&&j.prototype;function n(o,p){k.constructor.call(this,o,p);this.state={opened:false};var q=this;q.$CommentsPluginMenu1=this.$CommentsPluginMenu1.bind(this);q.$CommentsPluginMenu2=this.$CommentsPluginMenu2.bind(this);q.$CommentsPluginMenu3=this.$CommentsPluginMenu3.bind(this);}n.prototype.isOpen=function(){return this.state.opened;};n.prototype.$CommentsPluginMenu1=function(){this.setState({opened:true});};n.prototype.$CommentsPluginMenu2=function(){this.setState({opened:false});};n.prototype.$CommentsPluginMenu4=function(){c('CommentsPluginActions').toggleVisibility(this.props.commentID);};n.prototype.$CommentsPluginMenu3=function(o,event){var p=event.item.getValue();if(this.requiresConfirmation(p)){this.confirmAction(p,this.props.commentID,event.event.pageY);}else if(p===c('CommentsPluginAction').SHOW||p===c('CommentsPluginAction').COLLAPSE){this.$CommentsPluginMenu4();}else c('CommentsPluginActions')[p](this.props.commentID);};n.prototype.$CommentsPluginMenu5=function(o,p){var q=c('CommentsPluginStore').isReply(p.id);switch(o){case c('CommentsPluginAction').DELETE:if(!p.canEdit)return null;break;case c('CommentsPluginAction').EDIT:if(!p.canEdit||c('CommentsPluginStore').isThreadClosed())return null;break;case c('CommentsPluginAction').FLAG:if(p.canEdit||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').COLLAPSE:if(q||p.collapsed||p.flagged)return null;break;case c('CommentsPluginAction').BAN:case c('CommentsPluginAction').HIDE:if(!c('CommentsPluginStore').isViewerModerator())return null;break;case c('CommentsPluginAction').REPORT:if(!p.reportURI)return null;break;case c('CommentsPluginAction').EMBED:var r=p.canEmbed;if(q){var s=c('CommentsPluginStore').getByID(p.targetID);r=r&&s.canEmbed;}if(p.flagged||!c('CommentsPluginConfig').commentEmbed||!r)return null;break;default:break;}return (c('React').createElement(m,{value:o,key:o},c('CommentsPluginAction').getLabel(o)));};n.prototype.render=function(){var o=c('CommentsPluginStore').getByID(this.props.commentID);return (c('React').createElement('div',null,c('React').createElement(c('PopoverMenu.react'),{alignh:'right',onShow:this.$CommentsPluginMenu1,onHide:this.$CommentsPluginMenu2,menu:c('React').createElement(c('ReactXUIMenu'),{onItemClick:this.$CommentsPluginMenu3},c('CommentsPluginAction').getMenuActions().map(function(p){return this.$CommentsPluginMenu5(p,o);}.bind(this)))},c('React').createElement('a',null,c('React').createElement(c('Image.react'),babelHelpers['extends']({},c('Tooltip').propsFor(h._("Menu")),{src:i('/images/plugins/comments/chevron-down.png')})))),this.renderActionConfirmationDialog()));};n.propTypes={commentID:l.string.isRequired};f.exports=n;},null);
__d('CommentsPluginComment.react',['cx','fbt','xuiglyph','ActorBio.react','Badge.react','CenteredContainer.react','CommentsPluginActions','CommentsPluginCommentActions.react','CommentsPluginComposerEdit.react','CommentsPluginProfilePicture.react','CommentsPluginMenu.react','CommentsPluginComposerReply.react','CommentsPluginStore','HovercardLinkInterpolator','Link.react','Image.react','React','TruncatedTextWithEntities.react','UFIActor.react','UFICommentAttachment.react','UFICommentUtils','UFIImageBlock.react','XUIGrayText.react','XUISpinner.react','XUIText.react','joinClasses','nullthrows'],function a(b,c,d,e,f,g,h,i,j){'use strict';var k,l,m,n;if(c.__markCompiled)c.__markCompiled();var o=c('React').PropTypes;k=babelHelpers.inherits(p,c('React').Component);l=k&&k.prototype;function p(r,s){l.constructor.call(this,r,s);this.state={showMenu:false};var t=this;t.$CommentsPluginComment1=this.$CommentsPluginComment1.bind(this);t.$CommentsPluginComment2=this.$CommentsPluginComment2.bind(this);t.$CommentsPluginComment3=this.$CommentsPluginComment3.bind(this);}p.prototype.$CommentsPluginComment1=function(){this.setState({showMenu:true});};p.prototype.$CommentsPluginComment2=function(){if(!this.refs.menu||!this.refs.menu.isOpen())this.setState({showMenu:false});};p.prototype.$CommentsPluginComment3=function(){var r=c('nullthrows')(c('CommentsPluginStore').getByID(this.props.commentID));if(r.collapsed){c('CommentsPluginActions').toggleVisibility(this.props.commentID);}else if(r.flagged)c('CommentsPluginActions').unflag(this.props.commentID);};p.prototype.render=function(){var r=c('nullthrows')(c('CommentsPluginStore').getByID(this.props.commentID));if(r.deleted)return null;if(r.editor)return (c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerEdit.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID,className:"_3j_p"})));var s=c('UFICommentUtils').shallowCopyRanges(r.ranges),t=c('UFICommentUtils').getCommentTextWithTruncatedURIs(s,r.body.text),u=null;if(r.collapsed||r.flagged){u=c('React').createElement('div',{className:"_5mlf"},c('React').createElement(c('XUIGrayText.react'),{shade:'light'},i._("This comment is {action}",[i.param('action',r.collapsed?'collapsed. ':'marked as spam. ')]),c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginComment3},i._("Undo"))));}else{if(r.photoComment){r.photo_comment=r.photoComment;delete r.photoComment;}u=c('React').createElement('div',{className:"_30o4"},t?c('React').createElement(c('TruncatedTextWithEntities.react'),babelHelpers['extends']({className:"_5mdd",text:t,ranges:s,interpolator:function(z,aa){return (c('HovercardLinkInterpolator')(z,aa,'_blank'));}},c('CommentsPluginStore').getCommentBodyTruncationLimits(),{renderEmoticons:true,renderEmoji:true})):null,c('React').createElement(c('UFICommentAttachment.react'),{comment:r,disableTheater:true}));}var v=c('nullthrows')(c('CommentsPluginStore').getByID(r.authorID)),w=c('CommentsPluginStore').isOptimisticComment(r),x=c('CommentsPluginStore').isReply(this.props.commentID),y=c('CommentsPluginStore').isMobile();return (c('React').createElement(c('UFIImageBlock.react'),{className:"_3-8y"+(!x?' '+"_5nz1":''),spacing:'medium',onMouseEnter:this.$CommentsPluginComment1,onMouseLeave:this.$CommentsPluginComment2},c('React').createElement(c('CommentsPluginProfilePicture.react'),{href:v.uri,src:v.thumbSrc,isReply:x,target:'_blank'}),c('React').createElement('div',null,c('React').createElement(c('UFIActor.react'),{author:v,delimiter:y?' ':undefined,key:'author',showHovercard:!y,target:'_blank'},v.isVerified?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,v.bio?c('React').createElement('div',{className:"_4q1v"},c('React').createElement(c('ActorBio.react'),{target:'_blank',preferredTypes:v.bio.preferredTypes,stats:v.bio.stats})):null),c('React').createElement('div',{className:"_3-8m"},u),w||r.collapsed||r.flagged?null:c('React').createElement(c('CommentsPluginCommentActions.react'),{commentID:this.props.commentID}),c('React').createElement(q,{commentID:this.props.commentID})),c('React').createElement('div',null,this.state.showMenu&&!w&&!y?c('React').createElement(c('CommentsPluginMenu.react'),{ref:'menu',commentID:this.props.commentID}):null)));};p.propTypes={commentID:o.string.isRequired};m=babelHelpers.inherits(q,c('React').Component);n=m&&m.prototype;function q(r,s){n.constructor.call(this,r,s);this.state={loading:false};var t=this;t.$CommentsPluginCommentReplies1=this.$CommentsPluginCommentReplies1.bind(this);}q.prototype.$CommentsPluginCommentReplies1=function(){this.setState({loading:true});c('CommentsPluginStore').addListener('moreRepliesCompleted',function(event){if(this.props.commentID===event.commentID){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}}.bind(this));c('CommentsPluginActions').showMoreReplies(this.props.commentID);};q.prototype.render=function(){var r=c('CommentsPluginStore').getByID(this.props.commentID),s=r.public_replies;if(s===undefined||r.collapsed===true||r.flagged)return r.composer?c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis _3-8y",this.props.className)},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null;if(!s.commentIDs)s.commentIDs=[];var t=s.totalCount-s.commentIDs.length,u=c('CommentsPluginStore').getPageSize(),v=t<u?t:u;return (c('React').createElement('div',{className:c('joinClasses')("_44ri _2pis",this.props.className)},s.commentIDs.map(function(w){if(w===this.props.commentID)return null;return c('React').createElement(p,{commentID:w,key:w});}.bind(this)),c('CommentsPluginStore').hasUnloadedReplies(this.props.commentID)&&t>0?c('React').createElement('div',{className:"_5yct _3-8y _3-96 _2ph-"},this.state.loading?c('React').createElement(c('CenteredContainer.react'),null,c('React').createElement(c('XUISpinner.react'),{size:'small'})):c('React').createElement(c('Link.react'),{onClick:this.$CommentsPluginCommentReplies1},c('React').createElement(c('XUIText.react'),{size:'small',weight:'bold'},v===1?i._("Show 1 more reply in this thread"):i._("Show {number of replies} more replies in this thread",[i.param('number of replies',v)])),c('React').createElement(c('Image.react'),{src:j({name:'triangle-down'})}))):null,r.composer?c('React').createElement('div',{className:"_3-8y"},c('React').createElement(c('CommentsPluginComposerReply.react'),{commentID:this.props.commentID})):null));};q.propTypes={commentID:o.string.isRequired};f.exports=p;},null);
__d('CommentsPluginLoadMore.react',['cx','fbt','CenteredContainer.react','CommentsPluginActions','CommentsPluginStore','React','XUIButton.react','XUISpinner.react'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;function l(m,n){k.constructor.call(this,m,n);this.state={loading:false};var o=this;o.$CommentsPluginLoadMore1=this.$CommentsPluginLoadMore1.bind(this);}l.prototype.$CommentsPluginLoadMore1=function(){c('CommentsPluginActions').showMoreComments();this.setState({loading:true});c('CommentsPluginStore').addListener('moreCommentsCompleted',function(){this.setState({loading:false});c('CommentsPluginStore').removeCurrentListener();}.bind(this));};l.prototype.render=function(){var m=c('CommentsPluginStore').getUnloadedCommentsCount();if(!c('CommentsPluginStore').hasUnloadedComments()||m<1)return null;if(this.state.loading)return (c('React').createElement(c('CenteredContainer.react'),{className:"_ndl"},c('React').createElement(c('XUISpinner.react'),{size:'large'})));var n=c('CommentsPluginStore').getPageSize(),o=m<n?m:n;return (c('React').createElement('div',{className:"_5o4h"},c('React').createElement(c('XUIButton.react'),{className:"_1gl3",role:'button',onClick:this.$CommentsPluginLoadMore1,label:o===1?i._("Load 1 more comment"):i._("Load {pagesize} more comments",[i.param('pagesize',o)])})));};f.exports=l;},null);
__d('CommentsPluginListing.react',['cx','CommentsPluginComment.react','CommentsPluginLoadMore.react','CommentsPluginStore','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){var l=c('CommentsPluginStore').getCommentIDs(),m=l.map(function(n){return c('React').createElement(c('CommentsPluginComment.react'),{commentID:n,key:n});});return (c('React').createElement('div',{className:"_4k-6"},m,c('React').createElement(c('CommentsPluginLoadMore.react'),null)));};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d('CommentsPluginNotice.react',['fbt','CommentsPluginStore','React','XUINotice.react'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){return (c('CommentsPluginStore').isThreadClosed()?c('React').createElement(c('XUINotice.react'),{use:'notify'},h._("This thread is closed")):c('CommentsPluginStore').shouldSwitchAccount()?c('React').createElement(c('XUINotice.react'),{use:'notify'},h._("Please switch to personal account to post comments.")):null);};function k(){i.apply(this,arguments);}f.exports=k;},null);
__d("XPluginCommentsConfirmPostToFacebookAsyncDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/plugins\/comments\/{comment_id}\/async\/confirm\/publish\/dialog\/",{comment_id:{type:"String",required:true},plugin_width:{type:"Int"},__asyncDialog:{type:"Int"}});},null);
__d('CommentsPlugin.react',['cx','fbt','AsyncDialog','AsyncRequest','CommentsPluginActions','CommentsPluginComposerComment.react','CommentsPluginFooter.react','CommentsPluginHeader.react','CommentsPluginListing.react','CommentsPluginNotice.react','CommentsPluginStore','XPluginCommentsConfirmPostToFacebookAsyncDialogController','DOMQuery','PluginResize','React','ReactDOM','CommentsPluginSentryAction','SimpleXUIDialog','getElementPosition','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.componentWillMount=function(){c('CommentsPluginStore').init(this.props.comments,this.props.meta,this.props.initialOrdering,this.props.rankingAllowed);c('CommentsPluginStore').addListener('postError',function(n){c('SimpleXUIDialog').show(n.errorSummary||i._("Sorry, something went wrong. Please try again later."),null,null,{width:c('CommentsPluginStore').getDialogWidth()});});c('CommentsPluginStore').addListener('sentryAction',function(n,o){switch(n){case c('CommentsPluginSentryAction').CONFIRM_POST_TO_PROFILE:var p=c('XPluginCommentsConfirmPostToFacebookAsyncDialogController').getURIBuilder().setString('comment_id',o).setInt('plugin_width',document.body.offsetWidth).getURI();c('AsyncDialog').send(new (c('AsyncRequest'))(p).setData({iframe_referer:c('CommentsPluginStore').getIframeReferer()}));break;default:break;}});};m.prototype.componentDidMount=function(){var n=c('ReactDOM').findDOMNode(this);c('PluginResize').autoHeight(null,n);new (c('PluginResize'))(function(){},function(){var o=n.offsetHeight,p=c('DOMQuery').scry(document.body,'.uiLayer:not(.hidden_elem) .uiContextualLayer'),q=c('DOMQuery').scry(document.body,'.captcha_dialog');if(p.length===0&&q.length===0)return o;var r=p.length>0?c('getElementPosition')(p[0]):null,s=q.length>0?c('getElementPosition')(q[0]):null;return Math.max(o,r?r.y+r.height+1:0,s?s.height:0);},'resize.iframe',false).resize().auto();c('CommentsPluginStore').addListener('change',function(){this.forceUpdate();}.bind(this));if(c('CommentsPluginStore').isOptinReturn())c('CommentsPluginActions').restorePreviousState();};m.prototype.$CommentsPlugin1=function(){return c('CommentsPluginStore').isThreadClosed()||c('CommentsPluginStore').shouldSwitchAccount();};m.prototype.render=function(){return (c('React').createElement('div',{className:c('joinClasses')("_56q9",this.props.className)},c('React').createElement('div',{className:"_2pi8"},c('React').createElement(c('CommentsPluginHeader.react'),null),this.$CommentsPlugin1()?c('React').createElement(c('CommentsPluginNotice.react'),null):c('CommentsPluginStore').isDeeplinkComment()?null:c('React').createElement(c('CommentsPluginComposerComment.react'),null),c('React').createElement(c('CommentsPluginListing.react'),null),c('React').createElement(c('CommentsPluginFooter.react'),null))));};function m(){j.apply(this,arguments);}m.propTypes={comments:l.object.isRequired,meta:l.object.isRequired,initialOrdering:l.string.isRequired,rankingAllowed:l.bool};f.exports=m;},null);