/*1461678696,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["Z43xB"]); }

__d("ActorSelectorNuxTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={COMPOSER:"composer_seen_count",COMPOSER_COVERED:"composer_covered_seen_count",M_COMPOSER:"m_composer_seen_count",M_UFI:"m_ufi_seen_count",UFI:"ufi_seen_count",UFI_TIMELINE:"ufi_timeline_seen_count",UFI_TIMELINE_COVERED:"ufi_timeline_covered_seen_count"};},null);
__d("FunnelRegistry",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={WWW_EXAMPLE_FUNNEL:true,MSITE_EXAMPLE_FUNNEL:true,WWW_FEED_SHARE_DIALOG_FUNNEL:true,MSITE_FEED_SHARE_DIALOG_FUNNEL:true,PLATFORM_SHARE_DIALOG_FUNNEL:true,WWW_RECRUITING_SEARCH_FUNNEL:true,MSITE_COMMENT_TYPING_FUNNEL:true,WWW_CAMPFIRE_COMPOSER_UPSELL_FUNNEL:true,WWW_REACTIONS_LIKE_BUTTON_HOVER_FUNNEL:true,WWW_REACTIONS_NUX_FUNNEL:true,MSITE_INLINE_REPLY_COMPOSER_FUNNEL:true,WWW_LEAD_GEN_FORM_CREATION_FUNNEL:true,WWW_LEAD_GEN_DESKTOP_AD_UNIT_FUNNEL:true,WWW_LINK_PICKER_DIALOG_FUNNEL:true,WWW_MEME_PICKER_DIALOG_FUNNEL:true,WWW_SNOWLIFT_ACTIONS_FUNNEL:true,WWW_CANVAS_AD_CREATION_FUNNEL:true,WWW_SEARCH_AWARENESS_LEARNING_NUX_FUNNEL:true};},null);
__d("PagesPrivateReplyConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={Status:{REPLYABLE:"replyable",ALREADY_REPLIED:"already_replied",RECIPIENT_FILTER:"recipient_filter",EXPIRED:"expired",NOT_USER_CREATED:"not_user_created",CANNOT_MESSAGE:"cannot_message"},Type:{COMMENT_PAGE_POST:"comment_page_post",COMMENT_WALL_POST:"comment_wall_post",COMMENT_REVIEW:"comment_review",REVIEW:"review",WALL_POST:"wall_post"}};},null);
__d("ReactionNuxTypeEnum",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_CLICK:"like_click",LIKE_CLICK_RENUX:"like_click_renux",NOTIFICATION:"notification",VIEWPORT:"viewport"};},null);
__d("TranslationRating",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UNDEFINED:0,VERY_BAD:1,BAD:2,OK:3,GOOD:4,VERY_GOOD:5};},null);
__d("UFIActionTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={STORY:{CHANGE_ORDER_MODE:"story_change_order_mode",COMMENTS_ARRIVED:"story_comments_arrived",PAGE_IN_COMMENTS:"story_page_in_comments",SHOW_REPLIES:"story_show_replies",SPAM_FETCHED:"story_spam_fetched",CHANGE_REACTION:"story_change_reaction",TOGGLE_REPLIES:"story_toggle_replies"},COMMENT:{CHANGE_REACTION:"comment_change_reaction",EDIT:"comment_edit",REMOVE:"comment_remove",REMOVE_PREVIEW:"comment_remove_preview",TOGGLE_INLINE_BAN:"comment_toggle_inline_ban",TOGGLE_LIKE:"comment_toggle_like",TOGGLE_PIN:"comment_toggle_pin",TOGGLE_MARK_AS_SPAM:"comment_toggle_mark_as_spam",TRANSLATE:"comment_translate",EMBED:"embed"},ADD_COMMENT:{CANCEL:"add_comment_cancel",RETRY_SUBMIT:"add_comment_retry_submit",SUBMIT_EDIT:"add_comment_submit_edit",SUBMIT_NEW:"add_comment_submit_new",TYPING_CHANGE:"add_comment_typing_change"},FEEDBACK:{FETCH_REQUEST:"feedback_fetch_request",FETCHED_TARGET:"feedback_fetched_target"}};},null);
__d("UFILikeWebDriverIDs",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LIKE_LINK:"fb-ufi-likelink",UNLIKE_LINK:"fb-ufi-unlikelink"};},null);
__d('AppUserRoleConstants.brands',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={ADMIN:'ADMIN',MANAGER:'MANAGER',EMPLOYEE:'EMPLOYEE',NO_PERMISSION:'NO_PERMISSION'};f.exports=h;},null);
__d('RTISubscriptionManager',['invariant','ChannelConstants','CurrentLocale','SystemEvents','setTimeoutAcrossTransitions','Arbiter','ErrorUtils','Run','RTISubscriptionManagerConfig','UserActivity'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={SUBSCRIBE:'s',UNSUBSCRIBE:'u'},j=300,k=3;function l(){this.$RTISubscriptionManager1={};this.$RTISubscriptionManager2=null;this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;this.$RTISubscriptionManager5=false;this.$RTISubscriptionManager6=false;this.$RTISubscriptionManager7=true;this.$RTISubscriptionManager8=document.readyState==='complete';c('Run').onAfterLoad(function(){this.$RTISubscriptionManager8=true;this.flush();}.bind(this));this.$RTISubscriptionManager9=null;c('Arbiter').subscribe(c('ChannelConstants').ON_ENTER_STATE,function(o,p){if(!this.$RTISubscriptionManager9)return;var q=/pull/.test(p.state);if(!this.$RTISubscriptionManager2&&q){this.$RTISubscriptionManager3=true;if(!this.$RTISubscriptionManager4){this.$RTISubscriptionManager4=true;c('setTimeoutAcrossTransitions')(function(){this.$RTISubscriptionManager2=this.$RTISubscriptionManager3;this.$RTISubscriptionManager4=false;if(this.$RTISubscriptionManager2)this.flush();}.bind(this),l.PULL_HINT_DELAY_MILLIS);}}else if(!q){this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager2=false;}else if(q){this.$RTISubscriptionManager2=true;this.flush();}}.bind(this));c('SystemEvents').subscribe(c('SystemEvents').ONLINE,function(o,p){if(!p){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;}}.bind(this));c('SystemEvents').subscribe(c('SystemEvents').USER,function(o,p){this.$RTISubscriptionManager2=false;this.$RTISubscriptionManager3=false;this.$RTISubscriptionManager1={};}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').RTI_SESSION,function(o,p){if(!this.$RTISubscriptionManager9&&p)this.deleteSubscriptions(function(q){return q.getState()===i.UNSUBSCRIBE;});this.$RTISubscriptionManager9=p;if(this.$RTISubscriptionManager9){this.$RTISubscriptionManager2=true;this.flush();}}.bind(this));c('Arbiter').subscribe(c('ChannelConstants').ON_INVALID_HISTORY,function(){this.$RTISubscriptionManager2=true;this.forEachSubscription(function(o,p){p.setDirty(true);});this.getCurrentSession();}.bind(this));this.getCurrentSession();c('Arbiter').subscribe(c('ChannelConstants').SKYWALKER,function(o,p){var q=p.obj.topic,r={};if(p.obj.payloads===undefined){r.obj=[p.obj.payload];}else r.obj=p.obj.payloads;c('Arbiter').inform(c('ChannelConstants').getSkywalkerArbiterType(q),r);});}l.prototype.subscribe=function(o,p,q,r,s){!o?h(0):void 0;!p?h(0):void 0;if(Object.keys(this.$RTISubscriptionManager1).length<this.getMaxSubscriptions()){if(this.isSubscribed(o)){var t=this.$RTISubscriptionManager1[o];if(t&&t.getArbiterToken()){c('Arbiter').unsubscribe(t.getArbiterToken());t.setArbiterToken(null);}}q=q||{};q.locale=c('CurrentLocale').get();if(c('RTISubscriptionManagerConfig').autobot){q.autobotOverrideTier=c('RTISubscriptionManagerConfig').autobot.tier;q.autobotOverrideHostName=c('RTISubscriptionManagerConfig').autobot.host_name;q.autobotOverrideHostIp=c('RTISubscriptionManagerConfig').autobot.host_ip;}var u=new n(o,p,q,r,s),v=new m(u);this.$RTISubscriptionManager1[o]=u;var w=c('ChannelConstants').getSkywalkerArbiterType(o),x=c('Arbiter').subscribe(w,function(y,event){var z=event.obj.length;for(var aa=0;aa<z;aa++){var ba={topic:o,payload:event.obj[aa]};c('ErrorUtils').applyWithGuard(p,this,[ba]);}this.$RTISubscriptionManager10();}.bind(this));u.setArbiterToken(x);this.flush();return v;}return null;};l.prototype.unsubscribe=function(o){!o?h(0):void 0;if(o in this.$RTISubscriptionManager1){var p=this.$RTISubscriptionManager1[o];p.prepareUnsubscribe();if(p.getArbiterToken()){c('Arbiter').unsubscribe(p.getArbiterToken());p.setArbiterToken(null);}}};l.prototype.unsubscribeAll=function(){if(this.isReady()){var o={reset:'t'};this.$RTISubscriptionManager9.issueRequest('/sub',o,{},function(p){});}};l.prototype.flush=function(){if(this.isReady()&&!this.$RTISubscriptionManager5){this.$RTISubscriptionManager5=true;this.$RTISubscriptionManager6=false;var o=[],p={},q=false;this.forEachSubscription(function(v,w){w.ping();if(w.isDirty()){var x='subscriptions',y=p[x];if(!y){y=[];p[x]=y;}o.push(w);w.setDirty(false);w.setSent(false);var z={topic:w.getTopic(),state:w.getState(),context:w.getContext()};y.push(z);}else q=true;});if(!q&&p.subscriptions&&p.subscriptions.length>0){var r=[];for(var s=0;s<p.subscriptions.length;s++)if(p.subscriptions[s].state!==i.UNSUBSCRIBE)r.push(p.subscriptions[s]);p.subscriptions=r;this.$RTISubscriptionManager7=true;}var t=function(v){var w=v.data!=null;if(this.$RTISubscriptionManager7&&w)this.$RTISubscriptionManager7=false;for(var x=0;x<o.length;x++){var y=o[x];y.setSent(w);y.setDirty(!w);if(y.getState()===i.SUBSCRIBE){var z=y.getSubscribeCallback();if(z!==null)c('ErrorUtils').applyWithGuard(z,this,[v]);}}this.deleteSubscriptions(function(aa){return aa.getState()===i.UNSUBSCRIBE&&aa.isSent();});this.$RTISubscriptionManager5=false;if(this.$RTISubscriptionManager6){this.$RTISubscriptionManager6=false;this.flush();}}.bind(this);if(Object.keys(p).length>0){var u={};if(this.$RTISubscriptionManager7)u.reset='t';this.$RTISubscriptionManager9.issueRequest('/sub',u,p,t);}else this.$RTISubscriptionManager5=false;}else{this.$RTISubscriptionManager6=true;if(this.$RTISubscriptionManager9===null)this.getCurrentSession();}};l.prototype.deleteSubscriptions=function(o){!o?h(0):void 0;var p=[];this.forEachSubscription(function(r,s){if(o.apply(this,[s]))p.push(r);});for(var q=0;q<p.length;q++)delete this.$RTISubscriptionManager1[p[q]];};l.prototype.forEachSubscription=function(o){!o?h(0):void 0;for(var p in this.$RTISubscriptionManager1)if(this.$RTISubscriptionManager1.hasOwnProperty(p))o.apply(this,[p,this.$RTISubscriptionManager1[p]]);};l.prototype.getSubscriptions=function(){var o=[];this.forEachSubscription(function(p,q){o.push(q);});return o;};l.prototype.isSubscribed=function(o){!o?h(0):void 0;return o in this.$RTISubscriptionManager1;};l.prototype.isReady=function(){if(this.$RTISubscriptionManager9&&this.$RTISubscriptionManager2!==null&&this.$RTISubscriptionManager2&&this.$RTISubscriptionManager8)return true;return false;};l.prototype.getCurrentSession=function(){c('Arbiter').inform(c('ChannelConstants').GET_RTI_SESSION_REQUEST);};l.prototype.getMaxSubscriptions=function(){if(c('RTISubscriptionManagerConfig').config&&c('RTISubscriptionManagerConfig').config.hasOwnProperty('max_subscriptions')){return c('RTISubscriptionManagerConfig').config.max_subscriptions;}else return j;};l.prototype.$RTISubscriptionManager10=function(){var o=null,p=null;if(c('RTISubscriptionManagerConfig').config){o=c('RTISubscriptionManagerConfig').config.www_idle_unsubscribe_ms;p=c('RTISubscriptionManagerConfig').config.www_idle_unsubscribe_ms_overrides;}if(!o)return;if(c('UserActivity').isActive(o))return;this.forEachSubscription(function(q,r){var s=r.getTopic(),t=false;if(s.startsWith('gqls/')){var u=s.split('/',2)[1];if(p!==null&&typeof p==='object'&&p[u]!==undefined){t=!c('UserActivity').isActive(p[u]);}else t=true;}else if(s.startsWith('graphql'))t=true;if(t)this.unsubscribe(s);}.bind(this));};function m(o){this.$SubscriptionToken1=o;}m.prototype.unsubscribe=function(){l.unsubscribe(this.$SubscriptionToken1.getTopic());};function n(o,p,q,r,s){this.$SubscriptionData1=o;this.$SubscriptionData2=p;this.$SubscriptionData3=true;this.$SubscriptionData4=false;this.$SubscriptionData5=i.SUBSCRIBE;this.$SubscriptionData6=null;this.$SubscriptionData7=Date.now();if(q){this.$SubscriptionData8=q;}else this.$SubscriptionData8={};if(r){this.$SubscriptionData9=r;}else this.$SubscriptionData9=null;if(typeof s=='function'){this.$SubscriptionData10=s;this.$SubscriptionData11=0;}else this.$SubscriptionData10=function(){return true;};}n.prototype.getCreatedTime=function(){return this.$SubscriptionData7;};n.prototype.getTopic=function(){return this.$SubscriptionData1;};n.prototype.getListener=function(){return this.$SubscriptionData2;};n.prototype.getSubscribeCallback=function(){return this.$SubscriptionData9;};n.prototype.getArbiterToken=function(){return this.$SubscriptionData6;};n.prototype.setArbiterToken=function(o){this.$SubscriptionData6=o;};n.prototype.isDirty=function(){return this.$SubscriptionData3;};n.prototype.setDirty=function(o){this.$SubscriptionData3=o;};n.prototype.ping=function(){if(this.$SubscriptionData10()){this.$SubscriptionData11=0;}else if(this.$SubscriptionData11<=k){this.$SubscriptionData11++;}else{var o=this.getState();this.setState(i.UNSUBSCRIBE);if(o!=this.$SubscriptionData5){this.setDirty(true);this.setSent(false);}}};n.prototype.getState=function(){return this.$SubscriptionData5;};n.prototype.setState=function(o){this.$SubscriptionData5=o;};n.prototype.getContext=function(){return this.$SubscriptionData8;};n.prototype.isSent=function(){return this.$SubscriptionData4;};n.prototype.setSent=function(o){this.$SubscriptionData4=o;};n.prototype.prepareUnsubscribe=function(){this.setState(i.UNSUBSCRIBE);this.setDirty(true);this.setSent(false);};c('Run').onUnload(function(){l.unsubscribeAll();});l.PULL_HINT_DELAY_MILLIS=10000;Object.keys(l.prototype).forEach(function(o){l[o]=function(){var p=l;return l.prototype[o].apply(p,arguments);};});l.call(l);f.exports=l;},null);
__d('ConstituentTitle.react',['cx','fbt','React','Image.react','TooltipData'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'ConstituentTitle',propTypes:{representativeName:j.string},getDefaultProps:function(){return {representativeName:''};},render:function(){var l=' '+this.props.text,m=i._("Placeholder tooltip copy");return (c('React').createElement('span',c('TooltipData').propsFor(m),c('React').createElement(c('Image.react'),{className:"_3u08",src:'/images/civicgraph/glyph_house_12_2x.png'}),c('React').createElement('span',{className:"_3u09"},i._("Lives in {representative_name} District",[i.param('representative_name',l)]))));}});f.exports=k;},null);
__d('UFICommentTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:UFICommentLoggerConfig',this.$UFICommentTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$UFICommentTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$UFICommentTypedLogger1=babelHelpers['extends']({},this.$UFICommentTypedLogger1,j);return this;};h.prototype.setDuration=function(j){this.$UFICommentTypedLogger1.duration=j;return this;};h.prototype.setEvent=function(j){this.$UFICommentTypedLogger1.event=j;return this;};h.prototype.setHasPhoto=function(j){this.$UFICommentTypedLogger1.has_photo=j;return this;};h.prototype.setHasSticker=function(j){this.$UFICommentTypedLogger1.has_sticker=j;return this;};h.prototype.setIsReply=function(j){this.$UFICommentTypedLogger1.is_reply=j;return this;};h.prototype.setRequestLength=function(j){this.$UFICommentTypedLogger1.request_length=j;return this;};h.prototype.setVC=function(j){this.$UFICommentTypedLogger1.vc=j;return this;};var i={duration:true,event:true,has_photo:true,has_sticker:true,is_reply:true,request_length:true,vc:true};f.exports=h;},null);
__d('UFICommentLogger',['UFICommentTypedLogger'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$UFICommentLogger1={};this.$UFICommentLogger2={};}h.prototype.logNewCommentPost=function(i,j,k){this.$UFICommentLogger2[i]=babelHelpers['extends']({timestamp:j},k);new (c('UFICommentTypedLogger'))().setEvent('new_comment_post').setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();};h.prototype.logNewCommentReceived=function(i,j){var k=this.$UFICommentLogger2[i];if(k){var l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('new_comment_received').setDuration(l).setHasPhoto(k.has_photo).setHasSticker(k.has_sticker).setIsReply(k.is_reply).log();}delete this.$UFICommentLogger2[i];};h.prototype.logCommentFetch=function(i,j,k){var l=babelHelpers['extends']({timestamp:j},k);if(this.$UFICommentLogger1[i]===undefined){this.$UFICommentLogger1[i]=[l];}else this.$UFICommentLogger1[i].push(l);new (c('UFICommentTypedLogger'))().setEvent('fetch_comment').setIsReply(k.is_reply).setRequestLength(k.request_length).log();};h.prototype.logCommentFetchReceived=function(i,j){if(this.$UFICommentLogger1[i]){var k=this.$UFICommentLogger1[i].shift(),l=0;if(j&&k.timestamp)l=j-k.timestamp;new (c('UFICommentTypedLogger'))().setEvent('fetch_comment_received').setDuration(l).setIsReply(k.is_reply).setRequestLength(k.request_length).log();if(this.$UFICommentLogger1[i].length===0)delete this.$UFICommentLogger1[i];}};f.exports=new h();},null);
__d('UFICommentVPVs',['Map','MarauderLogger','Set'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(l,m){c('MarauderLogger').log('comment_vpv',undefined,null,'comment',m);if(!h.has(l))h.set(l,new (c('Set'))());h.get(l).add(m);}function j(l,m){if(h.has(l))return h.get(l).has(m);return false;}var k={logVPV:i,hasLoggedVPV:j};f.exports=k;},null);
__d('UFIDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('ReactDispatcher_DEPRECATED');},null);
__d('UFISharedDispatcher',['ReactDispatcher_DEPRECATED'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=new (c('ReactDispatcher_DEPRECATED'))();},null);
__d('UFIAddCommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={cancel:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.CANCEL,instanceid:i};},retrySubmit:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,comment:i};},submitEdit:function(i,j,k){return {type:c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,comment:i,commentData:j,target:k};},submitNew:function(i,j,k){return {type:c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,comment:i,target:j,replyCommentID:k,timestamp:Date.now()};},typingChange:function(i){return {type:c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,state:i};}};f.exports=h;},null);
__d('UFICommentAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={changeReaction:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.CHANGE_REACTION,comment:i,reactionType:j,target:k};},edit:function(i){return {type:c('UFIActionTypes').COMMENT.EDIT,comment:i};},remove:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.REMOVE,comment:i,target:j,onConfirm:k};},removePreview:function(i,j){return {type:c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,comment:i,target:j};},toggleLike:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_LIKE,comment:i,like:!i.hasviewerliked,target:j};},togglePin:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_PIN,comment:i,target:j};},translate:function(i,j){return {type:c('UFIActionTypes').COMMENT.TRANSLATE,comment:i,target:j};},markAsSpam:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:true,comment:i,target:j};},markAsNotSpam:function(i,j){return {type:c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,is_spam:false,comment:i,target:j};},inlineBan:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,is_banned:true,comment:i,target:j,ownerid:k};},undoInlineBan:function(i,j,k){return {type:c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,is_banned:false,comment:i,target:j,ownerid:k};},embed:function(i){return {type:c('UFIActionTypes').COMMENT.EMBED,comment:i};}};f.exports=h;},null);
__d('UFIFeedbackTargets',['ClientIDs','KeyedCallbackManager','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=new (c('KeyedCallbackManager'))();function i(t){var u={};t.forEach(function(v){var w=babelHelpers['extends']({},v);delete w.commentlist;delete w.commentcount;u[v.entidentifier]=w;c('UFICentralUpdates').didUpdateFeedback(v.entidentifier);});h.addResourcesAndExecute(u);}function j(t,u){for(var v=0;v<t.length;v++){var w=t[v];switch(w.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:l(w,u);break;case c('UFIConstants').UFIActionType.TOGGLE_PIN:m(w);break;case c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION:n(w);break;case c('UFIConstants').UFIActionType.DISABLE_COMMENTS:o(w);break;case c('UFIConstants').UFIActionType.REACTION:p(w);break;}}}function k(t){for(var u=0;u<t.length;u++){var v=t[u];if(v.orig_ftentidentifier)r(v.orig_ftentidentifier,v.ftentidentifier);}}function l(t,u){var v=q(t);if(v){var w=t.clientid&&c('ClientIDs').isExistingClientID(t.clientid);if(u===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('like').setOriginatedLocally(w).log();t.hasviewerliked=!!t.hasviewerliked;if(w&&t.hasviewerliked!=v.hasviewerliked)return;v.likecount=t.likecount||0;v.likesentences=t.likesentences;if(t.actorid==v.actorforpost){v.hasviewerliked=t.hasviewerliked;}else if(t.hasviewerliked!=v.hasviewerliked){v.likesentences={current:t.likesentences.alternate,alternate:t.likesentences.current};if(v.hasviewerliked){v.likecount++;}else v.likecount--;}if(t.actorid!=v.actorforpost)v.likesentences.isunseen=true;i([v]);}}function m(t){var u=q(t),v=t.newcommenttoken,w=t.newpinstate;if(w==='PIN'){u.pinnedcommenttoken=v;}else if(v===u.pinnedcommenttoken)u.pinnedcommenttoken=null;i([u]);}function n(t){var u=q(t);if(u){t.hasviewersubscribed=!!t.hasviewersubscribed;if(t.clientid&&c('ClientIDs').isExistingClientID(t.clientid)&&t.hasviewersubscribed!=u.hasviewersubscribed)return;if(t.actorid==u.actorforpost)u.hasviewersubscribed=t.hasviewersubscribed;i([u]);}}function o(t){var u=q(t);if(u){u.cancomment=!!t.cancomment;u.arecommentsdisabled=!!t.arecommentsdisabled;u.commentdisablednotice=t.commentdisablednotice;i([u]);}}function p(t){var u=q(t);if(u){if(t.clientid&&c('ClientIDs').isExistingClientID(t.clientid)&&t.viewerreaction!==u.viewerreaction)return;if(u.actorforpost==t.actorid||u.viewerreaction==t.viewerreaction){u.importantreactorids=t.importantreactorids;u.reactioncount=t.reactioncount;u.reactioncountmap=t.reactioncountmap;u.reactioncountreduced=t.reactioncountreduced;u.reactionsentences=t.reactionsentences;u.reactorids=t.reactorids;u.userreactions=t.userreactions;u.viewerreaction=t.viewerreaction;}i([u]);}}function q(t){if(t.orig_entidentifier)r(t.orig_entidentifier,t.entidentifier);return h.getResource(t.entidentifier);}function r(t,u){var v=h.getResource(t);if(v){h.setResource(t,null);v.entidentifier=u;h.setResource(u,v);c('UFICentralUpdates').didUpdateFeedbackID(t,u);}}var s={getFeedbackTarget:function(t,u){var v=h.executeOrEnqueue(t,u),w=h.getUnavailableResources(v);w.length;return v;},getFeedbackTargetIfExists:function(t){return h.getResource(t)||null;},getActorIDForFeedbackTargetIfExists:function(t){var u=h.getResource(t);return u?u.actorforpost:null;},handleNFB:function(t,u){var v=h.getResource(t);if(v){v.nfbcount=u||0;i([v]);}},unsubscribe:function(t){h.unsubscribe(t);}};c('UFICentralUpdates').subscribe('update-feedback',function(t,u){var v=u.feedbacktargets;if(v&&v.length)i(v);});c('UFICentralUpdates').subscribe('update-actions',function(t,u){if(u.actions&&u.actions.length)j(u.actions,u.payloadsource);});c('UFICentralUpdates').subscribe('update-comments',function(t,u){if(u.comments&&u.comments.length)k(u.comments);});f.exports=s;},6);
__d('UFIInstanceState',['UFICentralUpdates'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};function i(k){if(!h[k])h[k]={};}var j={getKeyForInstance:function(k,l){i(k);return h[k][l];},updateState:function(k,l,m){i(k);h[k][l]=m;c('UFICentralUpdates').didUpdateInstanceState(k,l);},updateStateField:function(k,l,m,n){var o=this.getKeyForInstance(k,l)||{};o[m]=n;this.updateState(k,l,o);},updateStateFields:function(k,l,m){var n=this.getKeyForInstance(k,l)||{};n=babelHelpers['extends']({},n,m);this.updateState(k,l,n);}};f.exports=j;},null);
__d('UFIComments',['invariant','ClientIDs','ImmutableObject','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIInstanceState','randomInt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j={};function k(ba){return ba in j?j[ba]:ba;}function l(ba,ca){ba.forEach(function(da){var ea=da.ftentidentifier,fa=c('UFIConstants').UFIPayloadSourceType,ga=da.clientid,ha=false,ia=babelHelpers['extends']({},da);if(ga){delete ia.clientid;ha=c('ClientIDs').isExistingClientID(ga);if(ha&&j[ga]){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setOriginatedLocally(true).setCommentID(da.id).log();return;}}if(ca===fa.LIVE_SEND||ca===fa.USER_ACTION||ca===fa.ENDPOINT_ADD_COMMENT||ca===fa.ENDPOINT_EDIT_COMMENT)ia.isunseen=true;if(ca===fa.LIVE_SEND)ia.islive=true;if(ca===fa.ENDPOINT_COMMENT_FETCH||ca===fa.ENDPOINT_ID_COMMENT_FETCH)ia.fromfetch=true;if(ha&&i[ga]){if(i[ga].ufiinstanceid)c('UFIInstanceState').updateStateField(i[ga].ufiinstanceid,'locallycomposed',da.id,true);ia.ufiinstanceid=i[ga].ufiinstanceid;j[ga]=da.id;i[da.id]=i[ga];delete i[ga];c('UFICentralUpdates').didUpdateComment(ga);}aa.setComment(da.id,new (c('ImmutableObject'))(ia));c('UFICentralUpdates').didUpdateComment(da.id);c('UFICentralUpdates').didUpdateFeedback(ea);});}function m(ba,ca){for(var da=0;da<ba.length;da++){var ea=ba[da];switch(ea.actiontype){case c('UFIConstants').UFIActionType.LIKE_ACTION:if(aa.getComment(ea.entidentifier))n(ea.clientid,ea.entidentifier,ea.hasviewerliked,ea.likecount,ca);break;case c('UFIConstants').UFIActionType.COMMENT_LIKE:n(ea.clientid,ea.commentid,ea.viewerliked,ea.likecount,ca);break;case c('UFIConstants').UFIActionType.COMMENT_REACTION:o(ea);break;case c('UFIConstants').UFIActionType.TOGGLE_PIN:p(ea.newcommenttoken,ea.oldcommenttoken);break;case c('UFIConstants').UFIActionType.DELETE_COMMENT:t(ea);break;case c('UFIConstants').UFIActionType.LIVE_DELETE_COMMENT:u(ea);break;case c('UFIConstants').UFIActionType.REMOVE_PREVIEW:v(ea);break;case c('UFIConstants').UFIActionType.COMMENT_SET_SPAM:w(ea);break;case c('UFIConstants').UFIActionType.CONFIRM_COMMENT_REMOVAL:x(ea);break;case c('UFIConstants').UFIActionType.TRANSLATE_COMMENT:r(ea);break;case c('UFIConstants').UFIActionType.COMMENT_LIKECOUNT_UPDATE:q(ea);break;}}}function n(ba,ca,da,ea,fa){var ga=aa.getComment(ca);if(ga){var ha={},ia=ba&&c('ClientIDs').isExistingClientID(ba);if(!ia){ha.hasviewerliked=da;ha.likecount=ea;}if(fa===c('UFIConstants').UFIPayloadSourceType.LIVE_SEND)new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment_like').setOriginatedLocally(ia).setCommentID(ca).log();ha.likeconfirmhash=c('randomInt')(0,1024);z(ca,ha);}}function o(ba){var ca=aa.getComment(ba.commentid);if(ca){var da={};if(ba.clientid&&c('ClientIDs').isExistingClientID(ba.clientid)&&ba.viewerreaction!==ca.viewerreaction)return;da.hasviewerliked=ba.hasviewerliked;da.likecount=ba.likecount;da.reactioncount=ba.reactioncount;da.reactioncountmap=ba.reactioncountmap;da.reactioncountreduced=ba.reactioncountreduced;da.viewerreaction=ba.viewerreaction;z(ba.commentid,da);}}function p(ba,ca){z(ba,{});z(ca,{});}function q(ba){var ca=aa.getComment(ba.commentid);if(ca&&ba.hasviewerliked===ca.hasviewerliked){var da={likecount:ba.likecount,likeconfirmhash:c('randomInt')(0,1024)};z(ba.commentid,da);}}function r(ba){var ca=ba.commentid,da=aa.getComment(ca);if(da){var ea={translatedbody:ba.translatedbody,translatorapp:ba.translatorapp};z(ca,ea);}}function s(ba){var ca={reportLink:ba.reportLink,commenterIsFOF:ba.commenterIsFOF,userIsMinor:ba.userIsMinor,giveFeedbackLink:ba.giveFeedbackLink,reportGroupAdminLink:ba.reportGroupAdminLink};return ca;}function t(ba){var ca=aa.getComment(ba.commentid);y(ca,c('UFIConstants').UFIStatus.DELETED);}function u(ba){var ca=aa.getComment(ba.commentid);if(ca&&ca.status!==c('UFIConstants').UFIStatus.DELETED)y(ca,c('UFIConstants').UFIStatus.LIVE_DELETED);}function v(ba){z(ba.commentid,{attachment:null});}function w(ba){var ca=aa.getComment(ba.commentid),da=ba.shouldHideAsSpam?c('UFIConstants').UFIStatus.SPAM_DISPLAY:null;y(ca,da);}function x(ba){z(ba.commentid,s(ba));}function y(ba,ca){z(ba.id,{priorstatus:ba.status,status:ca});}function z(ba,ca){var da=aa.getComment(ba)||new (c('ImmutableObject'))({});aa.setComment(ba,c('ImmutableObject').set(da,ca));c('UFICentralUpdates').didUpdateComment(da.id);c('UFICentralUpdates').didUpdateFeedback(da.ftentidentifier);}var aa={getComment:function(ba){if(ba===c('UFIConstants').unavailableCommentKey)return null;return i[k(ba)];},setComment:function(ba,ca){!(ca instanceof c('ImmutableObject'))?h(0):void 0;i[k(ba)]=ca;},resetComments:function(ba){for(var ca in ba)delete i[k(ca)];}};c('UFICentralUpdates').subscribe('update-comments',function(ba,ca){if(ca.comments&&ca.comments.length)l(ca.comments,ca.payloadsource);});c('UFICentralUpdates').subscribe('update-actions',function(ba,ca){if(ca.actions&&ca.actions.length)m(ca.actions,ca.payloadsource);});f.exports=aa;},6);
__d('UFIReactionsUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getReactionData:function(i,j,k){j=parseInt(j,10);var l=!!j,m=i.reactorids?i.reactorids.slice(0):[],n=m.indexOf(k),o=0;if(l){if(n<0){m.unshift(k);o=1;}}else if(n>-1){m.splice(n,1);o=-1;}var p=Math.max(i.reactioncount+o,0),q=i.reactioncountreduced;if(q&&!isNaN(q))q=p.toString();var r=i.reactioncountmap||{},s,t=i.viewerreaction;if(t&&r[t]){r[t]['default']=Math.max((r[t]['default']||0)-1,0);s=r[t].reduced;if(s&&!isNaN(s))r[t].reduced=r[t]['default'].toString();}if(l&&r[j]){r[j]['default']=(r[j]['default']||0)+1;s=r[j].reduced;if(s&&!isNaN(s))r[j].reduced=r[j]['default'].toString();}var u=i.userreactions;if(!u||Array.isArray(u))u={};if(l){u[k]=j;}else delete u[k];var v=i.importantreactorids||[],w=v.indexOf(k);if(l&&w===-1){v.unshift(k);}else if(!l&&w!==-1)v.splice(w,1);var x=null;if(i.reactionsentences){var y=!(t&&j);x={current:i.reactionsentences[y?'alternate':'current'],alternate:i.reactionsentences[y?'current':'alternate']};}return {importantreactorids:v,reactioncount:p,reactioncountmap:r,reactioncountreduced:q,reactionsentences:x,reactorids:m,userreactions:u,viewerreaction:j};},getReactionCountMapFromSummary:function(i){var j={};if(!i)return j;for(var k=0;k<i.length;k++){var l=i[k],m=l.feedback_reaction.key;j[m]={'default':l.reactors&&l.reactors.count,reduced:l.reactors&&l.reactors.display_count};}return j;}};f.exports=h;},null);
__d('UFICommentOrdering',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={inverted:function(i){switch(i){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:case c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING:return true;}return false;}};f.exports=h;},null);
__d('UFIPagedCommentList',['ClientIDs','KeyedCallbackManager','UFICentralUpdates','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','keyMirror'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('keyMirror')({actorID:true});function i(j){this.count=0;this.overriddenDisplayCount=null;this.deletedComments={};this.deletedCount=0;this.dataSource=new (c('KeyedCallbackManager'))();this.feedbackTargetID=j;this.lastRequestedOffset=0;this.lastRequestedLength=0;this.basePermalink="";this.commentPermalinks={};c('UFIFeedbackTargets').getFeedbackTarget(this.feedbackTargetID,function(k){this.actorID=k.actorforpost;this.basePermalink=k.permalink;}.bind(this));}i.prototype.addOrUpdateComment=function(j){if(j.islocal){this.$UFIPagedCommentList1(j.id);}else this.$UFIPagedCommentList2(j.id,j.clientid,j.legacyid);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);};i.prototype.$UFIPagedCommentList1=function(j){this.dataSource.setResource(this.count,j);this.count++;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount++;};i.prototype.$UFIPagedCommentList2=function(j,k,l){var m=k&&c('ClientIDs').isExistingClientID(k),n=this.dataSource.getAllResources(),o={};for(var p in n){var q=n[p];o[q]=p;}if(m&&k in o){o[j]=o[k];var r=o[k];this.dataSource.setResource(r,j);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentReceived(k,Date.now());}else if(!o[j]&&k)this.$UFIPagedCommentList1(j);if(l&&j in o)this.commentPermalinks[j]=this.buildCommentPermalink(j,l,o[j]);};i.prototype.addCommentIDs=function(j,k,l){var m={};for(var n=0;n<k;n++)m[j+n]=l[n]||c('UFIConstants').unavailableCommentKey;this.dataSource.addResourcesAndExecute(m);c('UFICentralUpdates').didUpdateFeedback(this.feedbackTargetID);return this;};i.prototype.getComments=function(j,k,l,m){var n=[];for(var o=0;o<k;o++)n.push(j+o);var p=this.dataSource.getUnavailableResourcesFromRequest(n);if(p.length){var q=Math.min.apply(Math,p),r=Math.max.apply(Math,p),s=q,t=r-q+1;if(s<this.lastRequestedOffset||s+t>this.lastRequestedOffset+this.lastRequestedLength){this.lastRequestedOffset=s;this.lastRequestedLength=t;this.fetchComments(s,t,l);}}else this.dataSource.executeOrEnqueue(n,this.deferredCallback.bind(this,j,k,m));};i.prototype.fetchComments=function(j,k,l){};i.prototype.deferredCallback=function(j,k,l,m){};i.prototype.reset=function(){var j=this.dataSource.getAllResources();this.dataSource.reset();this.count=0;this.deletedCount=0;this.deletedComments={};this.lastRequestedOffset=0;this.lastRequestedLength=0;return j;};i.prototype.deleteComment=function(j){if(!(j in this.deletedComments)){this.deletedComments[j]=true;this.deletedCount++;}};i.prototype.updateCommentCount=function(j){this.count=j;if(this.overriddenDisplayCount!==null)this.overriddenDisplayCount=j;this.deletedCount=0;return this;};i.prototype.updateOverriddenDisplayCount=function(j){this.overriddenDisplayCount=j;return this;};i.prototype.getFeedbackTargetID=function(){return this.feedbackTargetID;};i.prototype.getCommentCount=function(){return this.count;};i.prototype.getDeletedCount=function(){return this.deletedCount;};i.prototype.getDisplayedCommentCount=function(){if(this.overriddenDisplayCount===null){return this.count-this.deletedCount;}else return this.overriddenDisplayCount;};i.prototype.getBasePermalink=function(){return this.basePermalink;};i.prototype.buildCommentPermalink=function(j,k,l){};i.prototype.getPermalinkForComment=function(j){return this.commentPermalinks[j];};i.isValidContextPropertyForReset=function(j){return j in h;};f.exports=i;},null);
__d('UFIReplyCommentList',['ActorURI','getObjectValues','JSLogger','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFIComments','UFIConfig','UFIConstants','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={},k=c('JSLogger').create('ufi_reply_comment_list');h=babelHelpers.inherits(l,c('UFIPagedCommentList'));i=h&&h.prototype;l.getCommentList=function(n,o,p){if(!j[o])j[o]={};if(!j[o][p]){var q=new l(n,o,p),r=l.getReplyListsForParentCommentID(o);if(r.length)q.updateCommentCount(r[0].getCommentCount());j[o][p]=q;}return j[o][p];};l.getReplyListsForParentCommentID=function(n){return c('getObjectValues')(j[n]||{});};l.resetWithContext=function(n,o,p,q){var r=j[o][q];if(!r)return;r.reset();for(var s in p)if(this.isValidContextPropertyForReset(s))r[s]=p[s];};function l(n,o,p){i.constructor.call(this,n);this.parentCommentID=o;this.containerOrderingMode=p;}l.prototype.fetchComments=function(n,o,p){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:o,is_reply:true});var q={ft_ent_identifier:this.feedbackTargetID,parent_comment_ids:[this.parentCommentID],source:null,offsets:[n],lengths:[o],feed_context:p?p.feedContext:null,numpagerclicks:p?p.numPagerClicks:null,containerorderingmode:this.containerOrderingMode};if(!p||!p.viewAs)q[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/reply_fetch.php',q);};l.prototype.deferredCallback=function(n,o,p,q){var r={};for(var s=0;s<o;s++){var t=c('UFIComments').getComment(q[n+s]);if(t)r[n+s]=t;}p(r);};l.prototype.reset=function(){var n=i.reset.call(this),o={};for(var p in n){var q=n[p];o[q]=true;}c('UFIComments').resetComments(o);};l.prototype.getParentCommentID=function(){return this.parentCommentID;};l.prototype.buildCommentPermalink=function(n,o,p){if(!this.basePermalink)return null;var q=this.getParentCommentID().split("_"),r=o;if(q.length===2){r=q[1];}else k.error("Bad reply comment ID: "+this.getParentCommentID());return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:r,reply_comment_id:o}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/reply_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function m(n){var o=c('UFIComments').getComment(n.commentid),p=o.id,q=o.parentcommentid;if(!q)return;if(o.status!==c('UFIConstants').UFIStatus.DELETED&&o.status!==c('UFIConstants').UFIStatus.FAILED_ADD)l.getReplyListsForParentCommentID(q).forEach(function(r){r.deleteComment(p);});}c('UFICentralUpdates').subscribe('update-actions',function(n,o){if(o.actions&&o.actions.length)for(var p=0;p<o.actions.length;p++){var q=o.actions[p];switch(q.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:m(q);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(n,o){var p=o.commentlists;if(p&&p.replies&&Object.keys(p).length)for(var q in p.replies){var r=p.replies[q],s=r.ftentidentifier,t=r.containerorderingmode;l.getCommentList(s,q,t).addCommentIDs(r.range.offset,r.range.length,r.values).updateCommentCount(r.count);}});c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){var q=p.parentcommentid;if(!q)return;l.getReplyListsForParentCommentID(q).forEach(function(r){r.addOrUpdateComment(p);});});});f.exports=l;},6);
__d('UFIToplevelPagedCommentList',['ActorURI','MercuryServerDispatcher','UFICentralUpdates','UFIPagedCommentList','UFICommentLogger','UFICommentOrdering','UFIComments','UFIConfig','UFIConstants','UFIReplyCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();var j={};h=babelHelpers.inherits(k,c('UFIPagedCommentList'));i=h&&h.prototype;k.getCommentList=function(m,n){if(!j[m])j[m]={};if(!j[m][n]){var o=new k(m,n),p=k.getCommentListsForFeedbackTargetID(m);if(p.length)o.updateCommentCount(p[0].getCommentCount());j[m][n]=o;}return j[m][n];};k.getCommentListsForFeedbackTargetID=function(m){var n=[],o=j[m]||{};for(var p in o)n.push(o[p]);return n;};k.getCommentListForFeedbackTargetID_UNSAFE=function(m){var n=k.getCommentListsForFeedbackTargetID(m);return n.length?n[0]:null;};k.resetCommentListsForFeedbackTargetID=function(m){if(!j[m])return;var n={};for(var o in j[m]){var p=j[m][o],q=p.reset();for(var r in q){var s=q[r];n[s]=true;}}c('UFIComments').resetComments(n);};k.resetCommentListsWithContext=function(m,n){if(!j[m])return;var o={};for(var p in j[m]){var q=j[m][p];for(var r in n)if(this.isValidContextPropertyForReset(r))q[r]=n[r];var s=q.reset();for(var t in s){var u=s[t];o[u]=true;c('UFIReplyCommentList').resetWithContext(m,u,n,p);}}c('UFIComments').resetComments(o);};function k(m,n){i.constructor.call(this,m);this.orderReversed=false;if(c('UFICommentOrdering').inverted(n))this.orderReversed=true;this.orderingMode=n;this.clientHasAll=false;}k.prototype.fetchComments=function(m,n,o){if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetch(this.feedbackTargetID,Date.now(),{request_length:n,is_reply:false});var p={ft_ent_identifier:this.feedbackTargetID,viewas:o&&o.viewAs?o.viewAs+'':null,source:o&&o.feedbackSource,offset:m,length:n,orderingmode:this.orderingMode,feed_context:o?o.feedContext:null,numpagerclicks:o?o.numPagerClicks:null};switch(this.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY:case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:p.clientcommentcount=this.count;}if(!o||!o.viewAs)p[c('ActorURI').PARAMETER_ACTOR]=this.actorID;c('MercuryServerDispatcher').trySend('/ajax/ufi/comment_fetch.php',p);};k.prototype.deferredCallback=function(m,n,o,p){var q={},r=m,s=m+n-1;for(var t=0;t<n;t++){var u=this.orderReversed?s-t:r+t,v=c('UFIComments').getComment(p[u]);if(v)q[m+t]=v;}o(q);};k.prototype.getOrderingMode=function(){return this.orderingMode;};k.prototype.setClientHasAll=function(m){this.clientHasAll=m;return this;};k.prototype.getClientHasAll=function(){return this.clientHasAll;};k.prototype.buildCommentPermalink=function(m,n,o){if(!this.basePermalink)return null;return (new (c('URI'))(this.basePermalink).addQueryData({comment_id:n}).toString());};c('MercuryServerDispatcher').registerEndpoints({'/ajax/ufi/comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE}});function l(m){var n=c('UFIComments').getComment(m.commentid),o=n.id,p=n.ftentidentifier,q=n.parentcommentid;if(q)return;if(m.islocal||n.status!==c('UFIConstants').UFIStatus.DELETED&&n.status!==c('UFIConstants').UFIStatus.FAILED_ADD)k.getCommentListsForFeedbackTargetID(p).forEach(function(r){r.deleteComment(o);});}c('UFICentralUpdates').subscribe('update-actions',function(m,n){if(n.actions&&n.actions.length)for(var o=0;o<n.actions.length;o++){var p=n.actions[o];switch(p.actiontype){case c('UFIConstants').UFIActionType.DELETE_COMMENT:l(p);break;}}});c('UFICentralUpdates').subscribe('update-comment-lists',function(m,n){var o=n.commentlists;if(o&&o.comments&&Object.keys(o).length)for(var p in o.comments)for(var q in o.comments[p]){var r=o.comments[p][q],s=k.getCommentList(p,q).addCommentIDs(r.range.offset,r.range.length,r.values);s.setClientHasAll(!!r.forcenotpageable);}});c('UFICentralUpdates').subscribe('update-comments',function(m,n){if(n.comments&&n.comments.length)n.comments.forEach(function(o){if(o.parentcommentid)return;var p=o.ftentidentifier;k.getCommentListsForFeedbackTargetID(p).forEach(function(q){q.addOrUpdateComment(o);});});});c('UFICentralUpdates').subscribe('update-feedback',function(m,n){if(n.feedbacktargets&&n.feedbacktargets.length)n.feedbacktargets.forEach(function(o){var p=o.entidentifier,q=o.defaultcommentorderingmode,r={};if(q)r[q]=true;if(o.orderingmodes)o.orderingmodes.forEach(function(t){r[t.value]=true;});for(var s in r)k.getCommentList(p,s).updateCommentCount(o.commentcount);});});f.exports=k;},6);
__d("XUFIActorChangeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/actor\/change\/",{});},null);
__d("XUFIAddCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/add\/comment\/",{});},null);
__d("XUFICommentLikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/like\/",{});},null);
__d("XUFICommentReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/reaction\/",{reaction_type:{type:"Enum",enumType:0}});},null);
__d("XUFIDeleteCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/delete\/comment\/",{});},null);
__d("XUFIEditCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/edit\/comment\/",{});},null);
__d("XUFIHideCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/hide\/comment\/",{});},null);
__d("XUFILikeController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/like\/",{});},null);
__d("XUFIReactionController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/",{client_id:{type:"String"},ft_ent_identifier:{type:"String"},reaction_type:{type:"Enum",enumType:0},story_render_location:{type:"Enum",enumType:1},basic_origin_uri:{type:"String"},aftercursor:{type:"String"},tab:{type:"String"},av:{type:"Int"},_ft_:{type:"String"}});},null);
__d("XUFITogglePinCommentAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/comment\/pin\/",{});},null);
__d("XUFITranslateCommentController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/translate\/comment\/",{});},null);
__d("XUFITypingIndicatorController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/typing\/{feedback_id}\/{update}\/",{feedback_id:{type:"String",required:true},parent_comment_id:{type:"String"},update:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIUserActions',['errorCode','fbt','ActorURI','AsyncRequest','AsyncResponse','requireWeak','ChannelClientID','ClientIDs','ImmutableObject','Nectar','UFICentralUpdates','UFIToplevelPagedCommentList','UFIComments','UFICommentLogger','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIReactionsUtils','MercuryServerDispatcher','XUFIActorChangeController','XUFIAddCommentController','XUFICommentLikeController','XUFICommentReactionController','XUFIDeleteCommentController','XUFIEditCommentController','XUFIHideCommentController','XUFILikeController','XUFIReactionController','XUFITogglePinCommentAsyncController','XUFITranslateCommentController','XUFITypingIndicatorController','XStickerAssetController','collectDataAttributes','emptyFunction','ifRequired','UnicodeBidi'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j;c('requireWeak')('CLoggerX',function(oa){j=oa;});var k;c('requireWeak')('StickerAssetType',function(oa){k=oa;});var l={BAN:'ban',UNDO_BAN:'undo_ban'},m={changeActor:function(oa,pa){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(qa){c('UFIToplevelPagedCommentList').resetCommentListsWithContext(oa,{actorID:pa});c('UFICentralUpdates').inform('actor-changed',{actorID:pa});var ra={from_actor_id:qa.actorforpost,ft_ent_identifier:oa};ra[c('ActorURI').PARAMETER_ACTOR]=pa;var sa=c('XUFIActorChangeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(sa,ra);});},changeCommentLike:function(oa,pa,qa){var ra=c('UFIComments').getComment(oa);if(ra.hasviewerliked!=pa){var sa=n(qa.target),ta=pa?1:-1,ua={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:pa,likecount:(ra.likecount||0)+ta};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ua]});c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(va){var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=va.actorforpost;var xa=c('XUFICommentLikeController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(xa,babelHelpers['extends']({comment_id:oa,legacy_id:ra.legacyid,like_action:pa,ft_ent_identifier:ra.ftentidentifier,source:qa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},sa,wa));});}},changeCommentReaction:function(oa,pa,qa){var ra=c('UFIComments').getComment(oa);if(ra.viewerreaction!=pa)c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(sa){var ta=n(qa.target),ua=parseInt(pa,10)!==0,va=[na(ra,pa,oa,sa.actorforpost)];if(sa.hasviewerliked!==ua){var wa=ua?1:-1;va.push({commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:ua,likecount:(ra.likecount||0)+wa});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:va});var xa={};xa[c('ActorURI').PARAMETER_ACTOR]=sa.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFICommentReactionController').getURIBuilder().getURI(),babelHelpers['extends']({comment_id:oa,legacy_id:ra.legacyid,reaction_type:pa,ft_ent_identifier:ra.ftentidentifier,source:qa.source,client_id:c('ClientIDs').getNewClientID(),session_id:c('ChannelClientID').getID()},ta,xa));});},changeCommentPin:function(oa,pa){var qa=c('UFIComments').getComment(oa);c('UFIFeedbackTargets').getFeedbackTarget(qa.ftentidentifier,function(ra){var sa=oa,ta=ra.pinnedcommenttoken,ua=sa===ta?'UNPIN':'PIN',va={newcommenttoken:sa,oldcommenttoken:ta,newpinstate:ua,actiontype:c('UFIConstants').UFIActionType.TOGGLE_PIN,entidentifier:ra.entidentifier};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[va]});var wa=c('XUFITogglePinCommentAsyncController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,{comment_token:oa,pin_action:ua});});},_getAttachment:function(oa){if(!c('UFIConfig').optimisticStickers||!oa||!oa.fbid)return oa;var pa=void 0;c('ifRequired')('StickerImages',function(sa){return pa=sa;},c('emptyFunction'));var qa=pa?pa.getSticker(oa.fbid):null;if(!qa)return oa;var ra=c('XStickerAssetController').getURIBuilder().setInt('sticker_id',oa.fbid);ra=ra.setEnum('image_type',k&&k.IMAGE).getURI().toString();return {type:'sticker',metadata:{frameCount:qa.frameCount,framesPerCol:qa.framesPerCol,framesPerRow:qa.framesPerRow,height:qa.height,source_uri:ra,sprite_uri:qa.spriteURI,source_uri_2x:ra,sprite_uri_2x:qa.spriteURI2x||qa.spriteURI,width:qa.width}};},_getLocalComment:function(oa,pa,qa,ra,sa){var ta=c('ClientIDs').getNewClientID(),ua=c('UnicodeBidi').isDirectionLTR(qa)?'ltr':'rtl',va=this._getAttachment(sa.attachedsticker);return {ftentidentifier:pa,body:{text:qa,dir:ua},author:oa.actorforpost,id:ta,islocal:true,ufiinstanceid:sa.ufiinstanceid,likecount:0,hasviewerliked:false,parentcommentid:sa.replyid,replycommentparentid:sa.replycommentparentid,attachment:va,photo_comment:sa.attachedphoto,video_comment:sa.attachedvideo,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}};},addComment:function(oa,pa,qa,ra){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(sa){var ta=this.createComment(oa,pa,qa,ra);if(!ta)return;var ua={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:sa.actorforpost,hasviewersubscribed:true,entidentifier:sa.entidentifier},va={actiontype:c('UFIConstants').UFIActionType.ADD_COMMENT_ACTION,feedbackfbid:sa.targetfbid};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta],actions:[ua,va]});}.bind(this));},createComment:function(oa,pa,qa,ra){var sa=c('UFIFeedbackTargets').getFeedbackTargetIfExists(oa);if(!sa.actorforpost)return null;var ta=this._getLocalComment(sa,oa,pa,qa,ra);this._sendCommentToServer(oa,sa.actorforpost,pa,qa,ra,ta.id);return ta;},_sendCommentToServer:function(oa,pa,qa,ra,sa,ta){var ua=null;if(sa.reply_fbid){ua=sa.reply_fbid;}else if(sa.replyid)ua=c('UFIComments').getComment(sa.replyid).fbid;var va;if(j)va=j.getCLParamsForTarget(sa.target,ua);if(c('UFIConfig').logCommentPost)c('UFICommentLogger').logNewCommentPost(ta,sa.timestamp,{has_photo:!!sa.attachedphoto,has_video:!!sa.attachedvideo,has_sticker:!!sa.attachedsticker,is_reply:!!sa.replyid});var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=pa;var xa=c('XUFIAddCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(xa,babelHelpers['extends']({ft_ent_identifier:oa,comment_text:ra,source:sa.source,client_id:ta,session_id:c('ChannelClientID').getID(),reply_fbid:ua,parent_comment_id:sa.parent_comment_id||sa.replyid,reply_comment_parent_id:sa.replycommentparentid,rootid:sa.rootid,clp:va,attached_sticker_fbid:sa.attachedsticker?sa.attachedsticker.fbid:0,attached_photo_fbid:sa.attachedphoto?sa.attachedphoto.fbid:0,attached_video_fbid:sa.attachedvideo?sa.attachedvideo.fbid:0,feed_context:sa.feedcontext},n(sa.target),wa));},_hasCommentTextChanged:function(oa,pa){return oa.body&&oa.body.text!=pa;},_hasCommentPhotoChanged:function(oa,pa){return (oa||pa)&&!(oa&&pa)||oa&&pa&&oa.fbid!=pa.fbid;},_hasCommentVideoChanged:function(oa,pa){return (oa||pa)&&!(oa&&pa)||oa&&pa&&oa.fbid!=pa.fbid;},_hasCommentStickerChanged:function(oa,pa){return (oa||pa)&&!(oa&&pa)||oa&&oa.type=="sticker"&&pa&&oa.fbid!=pa.fbid;},editComment:function(oa,pa,qa,ra){var sa=n(ra.target),ta=c('UFIComments').getComment(oa),ua=this._hasCommentTextChanged(ta,pa)||this._hasCommentPhotoChanged(ta.photo_comment,ra.attachedPhoto)||this._hasCommentStickerChanged(ta.attachment,ra.attachedSticker)||this._hasCommentVideoChanged(ta.video_comment,ra.attachedVideo);ta=c('ImmutableObject').set(ta,{status:c('UFIConstants').UFIStatus.PENDING_EDIT,body:{text:pa},editnux:null,attachment:ra.attachedSticker,photo_comment:ra.attachedPhoto,video_comment:ra.attachedVideo});if(ua)ta=c('ImmutableObject').set(ta,{originalTimestamp:ta.timestamp.time,timestamp:{time:Math.floor(Date.now()/1000),text:i._("a few seconds ago")}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ta]});c('UFIFeedbackTargets').getFeedbackTarget(ta.ftentidentifier,function(va){var wa={};wa[c('ActorURI').PARAMETER_ACTOR]=va.actorforpost;var xa=c('XUFIEditCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(xa,babelHelpers['extends']({ft_ent_identifier:ta.ftentidentifier,comment_text:qa,source:ra.source,comment_id:ta.id,parent_comment_id:ta.parentcommentid,attached_sticker_fbid:ra.attachedSticker?ra.attachedSticker.fbid:0,attached_photo_fbid:ra.attachedPhoto?ra.attachedPhoto.fbid:0,attached_video_fbid:ra.attachedVideo?ra.attachedVideo.fbid:0},sa,wa));});},translateComment:function(oa,pa){var qa=c('XUFITranslateCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(qa,{ft_ent_identifier:oa.ftentidentifier,comment_ids:[oa.id],source:pa.source});},setHideAsSpam:function(oa,pa,qa){var ra=n(qa.target),sa=c('UFIComments').getComment(oa),ta={commentid:oa,actiontype:c('UFIConstants').UFIActionType.COMMENT_SET_SPAM,shouldHideAsSpam:pa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});c('UFIFeedbackTargets').getFeedbackTarget(sa.ftentidentifier,function(ua){var va={};va[c('ActorURI').PARAMETER_ACTOR]=ua.actorforpost;var wa=c('XUFIHideCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(wa,babelHelpers['extends']({comment_id:oa,spam_action:pa,ft_ent_identifier:sa.ftentidentifier,source:qa.source},ra,va));});},removeComment:function(oa,pa){var qa=n(pa.target),ra=c('UFIComments').getComment(oa),sa={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:oa,islocal:true,oneclick:pa.oneclick};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});c('UFIFeedbackTargets').getFeedbackTarget(ra.ftentidentifier,function(ta){var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ta.actorforpost;var va=c('XUFIDeleteCommentController').getURIBuilder().getURI();c('MercuryServerDispatcher').trySend(va,babelHelpers['extends']({comment_id:ra.id,comment_legacyid:ra.legacyid,ft_ent_identifier:ra.ftentidentifier,one_click:pa.oneclick,source:pa.source,client_id:c('ClientIDs').getNewClientID()},qa,ua));});},banUser:function(oa,pa,qa,ra){var sa=qa?l.BAN:l.UNDO_BAN;c('MercuryServerDispatcher').trySend('/ajax/ufi/ban_user.php',{page_id:pa,commenter_id:oa.author,action:sa,comment_id:oa.id,client_side:true});},changeReaction:function(oa,pa,qa){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(ra){var sa=[ma(ra,pa)],ta=parseInt(pa,10)!==0;if(ra.hasviewerliked!==ta){var ua=ta?1:-1;sa.push({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ra.actorforpost,hasviewerliked:ta,likecount:(ra.likecount||0)+ua,entidentifier:oa,likesentences:{current:ra.likesentences.alternate,alternate:ra.likesentences.current}});}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:sa});var va=n(qa.target),wa={};wa[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;c('MercuryServerDispatcher').trySend(c('XUFIReactionController').getURIBuilder().getURI(),babelHelpers['extends']({client_id:c('ClientIDs').getNewClientID(),ft_ent_identifier:oa,reaction_type:pa,root_id:qa.rootid,session_id:c('ChannelClientID').getID(),source:qa.source},wa,va));});},changeSubscribe:function(oa,pa,qa){c('UFIFeedbackTargets').getFeedbackTarget(oa,function(ra){var sa=n(qa.target);if(ra.hasviewersubscribed!==pa){var ta={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ra.actorforpost,hasviewersubscribed:pa,entidentifier:oa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});var ua={};ua[c('ActorURI').PARAMETER_ACTOR]=ra.actorforpost;c('MercuryServerDispatcher').trySend('/ajax/ufi/subscribe.php',babelHelpers['extends']({subscribe_action:pa,ft_ent_identifier:oa,source:qa.source,client_id:c('ClientIDs').getNewClientID(),rootid:qa.rootid,comment_expand_mode:qa.commentexpandmode},sa,ua));}});},fetchSpamComments:function(oa,pa,qa,ra){c('MercuryServerDispatcher').trySend('/ajax/ufi/id_comment_fetch.php',{ft_ent_identifier:oa,viewas:ra,comment_ids:pa,parent_comment_id:qa,source:null});},removePreview:function(oa,pa){var qa=n(pa.target),ra={commentid:oa.id,actiontype:c('UFIConstants').UFIActionType.REMOVE_PREVIEW};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ra]});c('MercuryServerDispatcher').trySend('/ajax/ufi/remove_preview.php',babelHelpers['extends']({comment_id:oa.id,ft_ent_identifier:oa.ftentidentifier,source:pa.source},qa));},typingChange:function(oa,pa){new (c('AsyncRequest'))(c('XUFITypingIndicatorController').getURIBuilder().setString('feedback_id',oa).setEnum('update',pa?'start':'stop').getURI()).send();}};function n(oa){if(!oa)return {ft:{}};var pa={ft:c('collectDataAttributes')(oa,['ft']).ft};c('Nectar').addModuleData(pa,oa);return pa;}function o(oa){c('AsyncResponse').defaultErrorHandler(oa);}function p(oa){var pa=oa.request.data;c('AsyncResponse').defaultErrorHandler(oa);var qa=pa.client_id||pa.comment_id,ra=c('UFIComments').getComment(qa),sa=ra.status===c('UFIConstants').UFIStatus.PENDING_EDIT?c('UFIConstants').UFIStatus.FAILED_EDIT:c('UFIConstants').UFIStatus.FAILED_ADD;ra=c('ImmutableObject').setDeep(ra,{status:sa,allowRetry:q(oa),body:{mentionstext:pa.comment_text,mentionsphoto:ra.photo_comment,mentionsvideo:ra.video_comment}});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ra]});}function q(oa){var pa=oa.getError();if(oa.isBlockedAction())return false;if(oa.silentError)return true;if(pa===1357012||pa===1357006)return false;return true;}function r(oa){var pa=oa.request.data,qa=pa.comment_id,ra=c('UFIComments').getComment(qa);ra=c('ImmutableObject').set(ra,{status:ra.priorstatus||null,priorstatus:undefined});c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{comments:[ra]});}function s(oa){var pa=oa.request.data,qa=pa.comment_id,ra=c('UFIComments').getComment(qa);if(pa.like_action===ra.hasviewerliked){var sa=ra.hasviewerliked?-1:1,ta={commentid:qa,actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,viewerliked:!ra.hasviewerliked,likecount:(ra.likecount||0)+sa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});}c('AsyncResponse').defaultErrorHandler(oa);}function t(oa){c('AsyncResponse').defaultErrorHandler(oa);}function u(oa){var pa=oa.request.data,qa=pa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(qa,function(ra){if(ra.hasviewerliked===pa.like_action){var sa=ra.hasviewerliked?-1:1,ta={actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:ra.actorforpost,hasviewerliked:!ra.hasviewerliked,likecount:(ra.likecount||0)+sa,entidentifier:qa,likesentences:{current:ra.likesentences.alternate,alternate:ra.likesentences.current}};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[ta]});}});c('AsyncResponse').defaultErrorHandler(oa);}function v(oa){var pa=oa.request.data,qa=pa.ft_ent_identifier;c('UFIFeedbackTargets').getFeedbackTarget(qa,function(ra){if(ra.hasviewersubscribed===pa.subscribe_action){var sa={actiontype:c('UFIConstants').UFIActionType.SUBSCRIBE_ACTION,actorid:ra.actorforpost,hasviewersubscribed:!ra.hasviewersubscribed,entidentifier:qa};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[sa]});}});c('AsyncResponse').defaultErrorHandler(oa);}var w={'/ajax/ufi/ban_user.php':{mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:o},'/ajax/ufi/subscribe.php':{mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:v,batch_if:ka,batch_function:la},'/ajax/ufi/id_comment_fetch.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/ajax/ufi/remove_preview.php':{mode:c('MercuryServerDispatcher').IMMEDIATE},'/profile/broadcast_request/async/add_composer_token/':{mode:c('MercuryServerDispatcher').IMMEDIATE}},x=c('XUFIAddCommentController').getURIBuilder().getURI();w[x]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var y=c('XUFIDeleteCommentController').getURIBuilder().getURI();w[y]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var z=c('XUFICommentLikeController').getURIBuilder().getURI();w[z]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:s,batch_if:ia,batch_function:la};var aa=c('XUFICommentReactionController').getURIBuilder().getURI();w[aa]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:t,batch_if:ia,batch_function:la};var ba=c('XUFIHideCommentController').getURIBuilder().getURI();w[ba]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:r};var ca=c('XUFILikeController').getURIBuilder().getURI();w[ca]={mode:c('MercuryServerDispatcher').BATCH_CONDITIONAL,error_handler:u,batch_if:ja,batch_function:la};var da=c('XUFIEditCommentController').getURIBuilder().getURI();w[da]={mode:c('MercuryServerDispatcher').IMMEDIATE,error_handler:p};var ea=c('XUFITranslateCommentController').getURIBuilder().getURI();w[ea]={mode:c('MercuryServerDispatcher').IMMEDIATE};var fa=c('XUFIActorChangeController').getURIBuilder().getURI();w[fa]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ga=c('XUFIReactionController').getURIBuilder().getURI();w[ga]={mode:c('MercuryServerDispatcher').IMMEDIATE};var ha=c('XUFITogglePinCommentAsyncController').getURIBuilder().getURI();w[ha]={mode:c('MercuryServerDispatcher').IMMEDIATE};c('MercuryServerDispatcher').registerEndpoints(w);function ia(oa,pa){return oa&&oa.ft_ent_identifier==pa.ft_ent_identifier&&oa.comment_id==pa.comment_id;}function ja(oa,pa){return oa&&oa.ft_ent_identifier==pa.ft_ent_identifier;}function ka(oa,pa){return oa&&oa.ft_ent_identifier==pa.ft_ent_identifier;}function la(oa,pa){return pa;}function ma(oa,pa){return Object.assign({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:oa.actorforpost,entidentifier:oa.entidentifier},c('UFIReactionsUtils').getReactionData(oa,pa,oa.actorforpost));}function na(oa,pa,qa,ra){var sa={};for(var ta in oa.reactioncountmap)sa[ta]={'default':oa.reactioncountmap[ta]['default'],reduced:oa.reactioncountmap[ta].reduced};var ua=c('UFIReactionsUtils').getReactionData({viewerreaction:oa.viewerreaction,reactioncount:oa.reactioncount,reactioncountreduced:oa.reactioncountreduced,reactioncountmap:sa,reactorids:oa.viewerreaction?[ra]:[]},pa,ra);return {actiontype:c('UFIConstants').UFIActionType.COMMENT_REACTION,commentid:qa,hasviewerliked:!!pa,likecount:ua.reactioncountmap[1]['default'],reactioncount:ua.reactioncount,reactioncountmap:ua.reactioncountmap,reactioncountreduced:ua.reactioncountreduced,viewerreaction:pa};}f.exports=m;},null);
__d('UFINewCommentNotifier',['Arbiter','UFIFeedbackTargets','UFIUserActions','UFIUIEvents'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={onNewComment:function(i,j,k,l,m,n){c('UFIUserActions').addComment(j.ftentidentifier,k.visibleValue,k.encodedValue,{source:j.source,ufiinstanceid:j.instanceid,target:l,replyid:m,rootid:j.rootid,attachedphoto:k.attachedPhoto,attachedvideo:k.attachedVideo,attachedsticker:k.attachedSticker,feedcontext:j.feedcontext,timestamp:n});c('UFIFeedbackTargets').getFeedbackTarget(j.ftentidentifier,function(o){if(i)c('Arbiter').inform(c('UFIUIEvents').Comment,{ft_id:o.entidentifier,target:l,form:i,isinverted:o.isranked||j.isstreaming});});}};f.exports=h;},null);
__d('UFIStoryAction',['UFIActionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={changeOrderingMode:function(i){return {type:c('UFIActionTypes').STORY.CHANGE_ORDER_MODE,mode:i};},commentsArrived:function(i,j,k){return {type:c('UFIActionTypes').STORY.COMMENTS_ARRIVED,newOffset:i,newLength:j,source:k};},pageInComments:function(i,j,k){return {type:c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,commentID:i,direction:j,nextRange:k};},showReplies:function(i,j){return {type:c('UFIActionTypes').STORY.SHOW_REPLIES,commentID:i,initiatorComment:j};},spamFetched:function(i,j,k,l){return {type:c('UFIActionTypes').STORY.SPAM_FETCHED,ftentidentifier:i,viewas:j,commentIDs:k,parentCommentID:l};},changeReaction:function(i,j,k){return {type:c('UFIActionTypes').STORY.CHANGE_REACTION,contextArgs:i,reactionType:j,target:k};},toggleReplies:function(i){return {type:c('UFIActionTypes').STORY.TOGGLE_REPLIES,commentID:i};}};f.exports=h;},null);
__d('ClickPointIdentifiersDEPRECATED',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={types:{TIMELINE_SEE_LIKERS:'timeline:seelikes'},getUserActionID:function(i){return '{"ua_id":"'+i+'"}';}};f.exports=h;},null);
__d('NumberFormat',['NumberFormatConfig'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=/(\d{3})(?=\d)/g;function i(l){return (''+l).split('').reverse().join('');}function j(l,m){if(Math.abs(l).toString().length<c('NumberFormatConfig').minDigitsForThousandsSeparator)return l.toString();var n=i(l);return i(n.replace(h,'$1'+m));}var k={formatIntegerWithDelimiter:j,formatInteger:function(l){return j(l,c('NumberFormatConfig').numberDelimiter);}};f.exports=k;},null);
__d('UFIBlingItem.react',['cx','fbt','React','NumberFormat','UFIConfig','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIBlingItem',propTypes:{contextArgs:j.object.isRequired,count:j.number.isRequired,countreduced:j.string,className:j.string,iconClassName:j.string,itemKey:j.string},render:function(){var l=c('joinClasses')(this.props.className,this.props.iconClassName,"UFIBlingBoxSprite"),m=c('NumberFormat').formatIntegerWithDelimiter(this.props.count,c('UFIConfig').numberDelimiter),n=m;switch(this.props.itemKey){case 'like':n=i._({"Like":"{count} Like","Likes":"{count} Likes"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Like':'Likes',{Like:'Like',Likes:'Likes'})]);break;case 'comment':n=i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})]);break;case 'reaction':n=i._({"Reaction":"{count} Reaction","Reactions":"{count} Reactions"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Reaction':'Reactions',{Reaction:'Reaction',Reactions:'Reactions'})]);break;case 'reshare':n=i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.countreduced&&isNaN(this.props.countreduced)?this.props.countreduced:n),i['enum'](this.props.count===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})]);break;}return (c('React').createElement('span',{className:"_2u_j"},n));}});f.exports=k;},null);
__d('UFIBlingBox.react',['cx','fbt','NumberFormat','React','UFIBlingItem.react','UFIConfig','UFIReactionTypes'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIBlingBox',propTypes:{contextArgs:j.object.isRequired,'data-ft':j.string,'data-comment-prelude-ref':j.string,comments:j.number,commentsreduced:j.string,likes:j.number,likesreduced:j.string,nfb:j.number,onClick:j.func,permalink:j.string,reactionCount:j.number,reactionCountMap:j.object,reactionCountReduced:j.string,reshares:j.number,resharesreduced:j.string,readOnly:j.bool},render:function(){var l=[],m='',n=this.props.contextArgs.ufiexperiments||{},o=this.props,p=o.likes,q=o.likesreduced,r=o.reactionCount,s=o.reactionCountMap,t=o.reactionCountReduced;if(p||r){var u=s&&s[c('UFIReactionTypes').LIKE]['default']!==r;l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:u?r:p,countreduced:u?t:q,iconClassName:'UFIBlingBoxLikeIcon',itemKey:u?'reaction':'like',key:'like'}));m+=this.props.likes==1?i._("1 like"):i._({"*":"{count} likes"},[i.param('count',this.props.likes,[0])]);m+=' ';}if(this.props.comments){var v=this.props.commentsreduced;if(this.props.contextArgs.isstreaming)v=c('NumberFormat').formatIntegerWithDelimiter(this.props.comments,c('UFIConfig').numberDelimiter);l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:v,iconClassName:'UFIBlingBoxCommentIcon',itemKey:'comment',key:'comment'}));m+=this.props.comments==1?i._("1 comment"):i._({"*":"{count} comments"},[i.param('count',this.props.comments,[0])]);m+=' ';}if(this.props.reshares){l.push(c('React').createElement(c('UFIBlingItem.react'),{className:l.length>0?"mls":'',contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxReshareIcon',itemKey:'reshare',key:'reshare'}));m+=this.props.reshares==1?i._("1 share"):i._({"*":"{count} shares"},[i.param('count',this.props.reshares,[0])]);}var w;if(this.props.readOnly){w=c('React').createElement('span',{'aria-label':m},l);}else{var x=this.props.contextArgs.commentajaxify;w=c('React').createElement('a',{ajaxify:x,href:this.props.permalink,'data-ft':this.props['data-ft'],'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'aria-label':m,onClick:this.props.onClick,rel:x?'dialog':'ignore'},l);}return w;}});f.exports=k;},null);
__d('UFIPrivateReplyIndicator.react',['fbt','PagesPrivateReplyConstants','React'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('PagesPrivateReplyConstants').Status;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.willRender=function(m){return m===k.ALREADY_REPLIED;};l.prototype.render=function(){if(this.props.replyStatus===k.ALREADY_REPLIED)return h._("Page responded privately");return null;};function l(){i.apply(this,arguments);}f.exports=l;},null);
__d('UFIReactionIconImpl.react',['cx','Image.react','React','UFIConfig','UFIReactionIcons','UFIReactionTypes','joinClasses'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.shouldComponentUpdate=function(m,n){'use strict';return (m.className!==this.props.className||m.reaction!==this.props.reaction||m.size!==this.props.size||m.grayscale!==this.props.grayscale);};l.prototype.render=function(){'use strict';return (c('React').createElement('span',{className:c('joinClasses')("_9zc"+(this.props.size==='13'?' '+"_2p79":'')+(this.props.size==='16'?' '+"_2p7a":'')+(this.props.size==='48'?' '+"_2p7b":'')+(this.props.size==='96'?' '+"_9-w":''),this.props.className)},c('React').createElement('i',{className:c('joinClasses')(c('UFIReactionTypes').reactions[this.props.reaction].class_name,"_2p78"+(this.props.size==='13'?' '+"_9-y":'')+(this.props.size==='16'?' '+"_9--":'')+(this.props.size==='48'?' '+"_9-_":'')+(this.props.size==='96'?' '+"_9_0":'')+(this.props.grayscale?' '+"_pxi":''))})));};function l(){'use strict';i.apply(this,arguments);}l.propTypes={className:k.string,grayscale:k.bool,reaction:k.number.isRequired,size:k.oneOf(['13','16','48','96'])};l.defaultProps={className:null,grayscale:false,size:'16'};f.exports=l;},null);
__d("XUFIReactionProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/browser\/",{ft_ent_identifier:{type:"String",required:true}});},null);
__d("XUFIReactionProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/profile\/dialog\/",{reaction_type:{type:"Enum",enumType:0},ft_ent_identifier:{type:"String",required:true},__asyncDialog:{type:"Int"}});},null);
__d('UFIReactionsProfileBrowserUtils',['ActorURI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getDialogURI:function(i,j){return c('ActorURI').create(c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).setEnum('reaction_type',j).getURI(),i.actorforpost);},getPageURI:function(i){return c('ActorURI').create(c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',i.entidentifier).getURI(),i.actorforpost);}};f.exports=h;},null);
__d('sortReactionTypes',['UFIReactionTypes'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={};c('UFIReactionTypes').ordering.forEach(function(j,k){h[j]=k;});function i(j,k){return Object.keys(j).map(function(l){return Number(l);}).sort(function(l,m){if(k&&l===c('UFIReactionTypes').LIKE)return -1;if(j[l]['default']===j[m]['default'])return h[l]-h[m];return j[m]['default']-j[l]['default'];});}f.exports=i;},null);
__d('UFIReactionsBlingTokens.react',['cx','fbt','Bootloader','BanzaiLogger','Event','JSResource','RTLKeys','React','ReactDOM','UFICommentAction','UFIConfig','UFIReactionIconImpl.react','UFIReactionTypes','UFIReactionsProfileBrowserUtils','UFIStoryAction','joinClasses','sortReactionTypes'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=null;j=babelHelpers.inherits(n,c('React').Component);k=j&&j.prototype;function n(o,p){'use strict';k.constructor.call(this);this.onFocus=this.onFocus.bind(this);this.onFocusIn=this.onFocusIn.bind(this);this.onKeyDown=this.onKeyDown.bind(this);this.state={active:null,selectedIndex:-1,reactionTypes:this.getReactionTypes(o.feedback.reactioncountmap,o.max)};}n.prototype.componentDidUpdate=function(){'use strict';if(this.state.selectedIndex>-1)c('ReactDOM').findDOMNode(this.refs[this.state.selectedIndex]).focus();};n.prototype.componentWillReceiveProps=function(o){'use strict';if(o.feedback.reactioncount!==this.props.feedback.reactioncount)this.setState({active:null});this.setState({reactionTypes:this.getReactionTypes(o.feedback.reactioncountmap,o.max)});};n.prototype.getReactionTypes=function(o,p){'use strict';var q=c('sortReactionTypes')(o,false).filter(function(r){return (c('UFIReactionTypes').reactions[r]&&o[r]['default']);});if(p)q=q.slice(0,p);return q;};n.prototype.onFocusIn=function(event){'use strict';if(!this.refs.tokens.contains(event.target)){this.setState({selectedIndex:-1});if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}}};n.prototype.onFocus=function(event){'use strict';if(event.target===this.refs.tokens){this.setState({selectedIndex:0});if(!this.focusInListener)this.focusInListener=c('Event').listen(document.documentElement,'focusin',this.onFocusIn.bind(this));}};n.prototype.onMouseEnter=function(o){'use strict';if(!m)c('Bootloader').loadModules(["UFIReactionsTooltipImpl.react"],function(p){m=p;this.forceUpdate();}.bind(this));this.setState({active:o});};n.prototype.onKeyDown=function(event){'use strict';switch(event.keyCode){case c('RTLKeys').RETURN:if(this.focusInListener){this.focusInListener.remove();this.focusInListener=null;}break;case c('RTLKeys').TAB:this.setState({selectedIndex:0});break;case c('RTLKeys').getLeft():case c('RTLKeys').getRight():event.preventDefault();this.setState({selectedIndex:Math.max(0,Math.min(this.state.selectedIndex+(event.keyCode===c('RTLKeys').getLeft()?-1:1),this.state.reactionTypes.length-1))});break;}};n.prototype.onTokenClick=function(o,event){'use strict';var p=this.props.feedback,q=event.currentTarget,r=c('UFIReactionTypes').reactions[o]&&c('UFIReactionTypes').reactions[o].name;if(c('UFIConfig').reactionsHasDirectReactTokens){var s=this.props.feedback.viewerreaction;if(s===o)o=c('UFIReactionTypes').NONE;var t=void 0;if(this.props.comment){t=c('UFICommentAction').changeReaction(this.props.comment,o,event.target);}else t=c('UFIStoryAction').changeReaction(this.props.contextArgs,o,event.target);this.context.dispatch(t);}else (function(){var u=c('UFIReactionsProfileBrowserUtils').getDialogURI(p,o);c('Bootloader').loadModules(["AsyncDialog"],function(v){v.bootstrap(u.toString(),q,'dialog');});event.preventDefault();})();c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'token',target_subtype:r});};n.prototype.renderToken=function(o,p){'use strict';var q=this.props.feedback,r=i._("{reduced_count} {reaction_type}",[i.param('reduced_count',q.reactioncountmap[o].reduced),i.param('reaction_type',c('UFIReactionTypes').reactions[o].display_name)]),s=c('UFIConfig').reactionsHasDirectReactTokens,t={'aria-label':r,className:"_27jf"+(' '+"_3emk")+(this.props.size==='13'?' '+"_26lk":'')+(s?' '+"_2f24":''),href:s?null:c('UFIReactionsProfileBrowserUtils').getPageURI(q),key:'reactionType-'+o,onClick:this.onTokenClick.bind(this,o),rel:'ignore',ref:p,role:'button',tabIndex:this.state.selectedIndex===p?0:-1},u=c('React').createElement(c('UFIReactionIconImpl.react'),{size:this.props.size,className:"_4-op",reaction:o}),v=c('React').createElement('span',{className:"_3chu"},q.reactioncountmap[o].reduced);if(c('UFIConfig').reactionsHasDirectReactTokens)return (c('React').createElement('a',babelHelpers['extends']({'data-hover':'tooltip','data-tooltip-content':c('UFIReactionTypes').reactions[o].display_name+' ('+q.reactioncountmap[o].reduced+')'},t),u,v));if(m)return (c('React').createElement(m,babelHelpers['extends']({active:this.state.active===o,feedback:q,reaction:o},t),u,v));return (c('React').createElement('a',babelHelpers['extends']({onMouseEnter:this.onMouseEnter.bind(this,o)},t),u,v));};n.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:c('joinClasses')("_3t53",this.props.className)},c('React').createElement('span',{'aria-label':i._("See who reacted to this"),className:"_3t54",onFocus:this.onFocus,onKeyDown:this.onKeyDown,ref:'tokens',role:'toolbar',tabIndex:this.state.selectedIndex>-1?-1:0},this.state.reactionTypes.map(this.renderToken,this)),this.props.children));};n.contextTypes={dispatch:l.func};n.propTypes={className:l.string,comment:l.object,contextArgs:l.object,hoistLike:l.bool,max:l.number,size:c('UFIReactionIconImpl.react').propTypes.size};n.defaultProps={className:null,hoistLike:false,size:'16'};f.exports=n;},null);
__d("XUFIReactionTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/reaction\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]},reaction_type:{type:"Enum",enumType:0},user_count:{type:"Int"}});},null);
__d('UFIReactionsSocialSentence.react',['cx','ActorURI','Bootloader','BanzaiLogger','React','UFIConfig','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','XUFIReactionTooltipController'],function a(b,c,d,e,f,g,h){var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;function k(l,m){'use strict';j.constructor.call(this,l,m);this.onSentenceClick=this.onSentenceClick.bind(this);}k.prototype.$UFIReactionsSocialSentence1=function(l){'use strict';var m=l.actorforpost,n=l.entidentifier;return {'data-hover':'tooltip','data-tooltip-uri':c('ActorURI').create(c('XUFIReactionTooltipController').getURIBuilder().setString('ft_ent_identifier',n).getURI(),m)};};k.prototype.onSentenceClick=function(event){'use strict';var l=this.props.feedback,m=event.currentTarget;c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:'click',target_type:'social_sentence'});var n=c('UFIReactionsProfileBrowserUtils').getDialogURI(l).toString();c('Bootloader').loadModules(["AsyncDialog"],function(o){o.bootstrap(n,m,'dialog');});event.preventDefault();};k.prototype.render=function(){'use strict';var l=c('UFIConfig').reactionsMultilineSocialSentence,m=this.props.feedback,n=m.likesentences,o=m.reactioncount,p=m.reactioncountreduced,q=m.reactionsentences,r=m.viewerreaction,s=r?o>3:o>2,t=null;if(s)t=this.$UFIReactionsSocialSentence1(m);var u=null;if(q&&q.current){u=q.current.text;}else if(n&&n.current){u=n.current.text;}else u=p;var v=void 0;if(u)v=c('React').createElement('span',{className:"_4arz"},c('React').createElement('span',t,u));var w=void 0;if((!l||!v)&&m.reactioncount)w=c('React').createElement('span',{'aria-hidden':v,className:"_1g5v"},c('React').createElement('span',t,m.reactioncountreduced));return (c('React').createElement('div',{className:"_ipp"+(l?' '+"_4m1f":'')},c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"_4ar- _ipn",contextArgs:this.props.contextArgs,feedback:m,max:3},c('React').createElement('a',{className:"_2x4v",href:c('UFIReactionsProfileBrowserUtils').getPageURI(m),onClick:this.onSentenceClick,rel:'ignore'},w,v))));};f.exports=k;},null);
__d("XUFICommentTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/comment\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d("XUFIGroupSeenByProfileBrowserController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/browser\/",{id:{type:"Int",required:true}});},null);
__d("XUFIGroupSeenByProfileDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/group\/seenby\/profile\/dialog\/",{id:{type:"Int",required:true},__asyncDialog:{type:"Int"}});},null);
__d("XUFIShareTooltipController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/ufi\/share\/tooltip\/",{ft_ent_identifier:{type:"String",required:true},seen_user_fbids:{type:"IntVector",defaultValue:[]}});},null);
__d('UFIReactionsBlingSocialSentence.react',['cx','fbt','ActorURI','BanzaiLogger','Bootloader','NumberFormat','PagesPrivateReplyConstants','ProfileBrowserLink','ProfileBrowserTypes','React','Tooltip.react','UFIPrivateReplyIndicator.react','UFIReactionsSocialSentence.react','UFIConfig','UnseenGatekeeper','URI','XUFICommentTooltipController','XUFIGroupSeenByProfileDialogController','XUFIGroupSeenByProfileBrowserController','XUFIShareTooltipController','XUIText.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'UFIReactionsBlingSocialSentence',onCommentsClick:function(event){var k=this.props.contextArgs.commentajaxify;if(k){if(this.props.contextArgs.showtheaterforcomment){this.launchSnowlift(k,event.currentTarget);}else this.launchDialog(k,event.currentTarget);}else if(this.props.onCommentClick)this.props.onCommentClick(event);this.logCountAction('comments','click');event.preventDefault();},onSeensClick:function(event){var k=this.props.feedback,l=void 0;if(c('UnseenGatekeeper').is_whitelisted){l=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',k.entidentifier).getURI();l=c('ActorURI').create(l,k.actorforpost);}else l=c('ProfileBrowserLink').constructDialogURI(c('ProfileBrowserTypes').GROUP_MESSAGE_VIEWERS,{id:k.targetfbid});this.launchDialog(l.toString(),event.currentTarget);this.logCountAction('seens','click');event.preventDefault();},onSharesClick:function(event){var k=this.props.feedback,l=k.sharefbid||k.targetfbid,m=c('ActorURI').create(new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:l}),k.actorforpost);this.launchDialog(m.toString(),event.currentTarget);this.logCountAction('shares','click');event.preventDefault();},onViewsClick:function(event){this.logCountAction('views','click');},onViewsHover:function(event){if(this.canSeeConsolidatedTooltip())this.logCountAction('views','hover');},launchSnowlift:function(k,l){c('Bootloader').loadModules(["PhotoSnowlift"],function(m){m.bootstrap(k,l);});},launchDialog:function(k,l){c('Bootloader').loadModules(["AsyncDialog"],function(m){m.bootstrap(k,l,'dialog');});},logCountAction:function(k,l){c('BanzaiLogger').log('WebReactionsBlingLoggerConfig',{feedback_id:this.props.feedback.entidentifier,'interface':'www',action:l,target_type:'count',target_subtype:k});},renderComments:function(){var k=this.props.contextArgs.isstreaming;if(!this.props.commentCount||this.props.contextArgs.feedbackMode==='expanded'&&!k)return null;var l=isNaN(this.props.feedback.commentcountreduced)&&!k?this.props.feedback.commentcountreduced:c('NumberFormat').formatIntegerWithDelimiter(this.props.commentCount,c('UFIConfig').numberDelimiter),m=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-comment-prelude-ref':this.props['data-comment-prelude-ref'],'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-uri':m,href:this.props.href,onClick:this.onCommentsClick,role:'button'},this.props.children,i._({"Comment":"{count} Comment","Comments":"{count} Comments"},[i.param('count',l),i['enum'](this.props.commentCount===1?'Comment':'Comments',{Comment:'Comment',Comments:'Comments'})])));},renderSeens:function(){if(this.props.contextArgs.entstream||!this.props.feedback.seencount)return null;var k=this.props.feedback,l=k.seencount,m=void 0;if(k.seenbyall){m=i._("Seen by everyone");}else if(l===1){m=i._("Seen by 1");}else m=i._("Seen by {count}",[i.param('count',l)]);if(c('UnseenGatekeeper').is_whitelisted){var n=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:k.entidentifier}),o=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',k.entidentifier).getURI();o=c('ActorURI').create(o,k.actorforpost);return (c('React').createElement('span',{ref:'seen_by_text'},c('React').createElement('a',{href:o,'data-hovercard':n.toString(),className:"_ipm",onClick:this.onSeensClick},m)));}else{var p=c('ProfileBrowserTypes').GROUP_MESSAGE_VIEWERS,q={id:k.targetfbid},r=new (c('URI'))('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:k.entidentifier,displayed_count:l});return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':r,href:c('ProfileBrowserLink').constructPageURI(p,q),onClick:this.onSeensClick},m));}},renderShares:function(){if(!this.props.feedback.sharecount)return null;var k=this.props.feedback.sharefbid||this.props.feedback.targetfbid,l=c('ActorURI').create(new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:k}),this.props.feedback.actorforpost),m=c('ActorURI').create(c('XUFIShareTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('a',{'aria-live':'polite',className:"_ipm",'data-hover':'tooltip','data-tooltip-uri':m,href:l,onClick:this.onSharesClick,role:'button'},i._({"Share":"{count} Share","Shares":"{count} Shares"},[i.param('count',this.props.feedback.sharecountreduced),i['enum'](this.props.feedback.sharecount===1?'Share':'Shares',{Share:'Share',Shares:'Shares'})])));},renderViews:function(){var k=this.props.contextArgs.viewCount,l=null;if(this.canSeeConsolidatedTooltip())l=this.renderViewsTooltip();if(!k)return null;return (c('React').createElement(c('Tooltip.react'),{tooltip:l,'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-position':'above','aria-live':'polite',className:"_ipm",onClick:this.onViewsClick,onMouseOver:this.onViewsHover},i._({"View":"{count} View","Views":"{count} Views"},[i.param('count',this.props.contextArgs.viewCountReduced),i['enum'](k==='1'?'View':'Views',{View:'View',Views:'Views'})])));},canSeeConsolidatedTooltip:function(){var k=this.props.contextArgs.postViewCount,l=this.props.contextArgs.totalPosts,m=this.props.contextArgs.otherPostsViewCount;return this.props.contextArgs.showConsolidatedViewCount&&!!l&&l>1&&!!k&&!!m;},renderViewsTooltip:function(){var k=this.props.contextArgs.totalPosts,l=this.props.contextArgs.postViewCount,m=this.props.contextArgs.otherPostsViewCount,n=k-1;return (c('React').createElement('div',null,c('React').createElement(c('XUIText.react'),{weight:'bold'},i._("Video Posted {number of posts} Times",[i.param('number of posts',k)])),c('React').createElement('br',null),i._({"view":"{post views} view from this post","views":"{post views} views from this post"},[i.param('post views',l),i['enum'](l==='1'?'view':'views',{view:'view',views:'views'})]),c('React').createElement('br',null),i._({"view":{"post":"{total views} view from {posts count} other post","posts":"{total views} view from {posts count} other posts"},"views":{"post":"{total views} views from {posts count} other post","posts":"{total views} views from {posts count} other posts"}},[i.param('total views',m),i['enum'](m==='1'?'view':'views',{view:'view',views:'views'}),i.param('posts count',n),i['enum'](n===1?'post':'posts',{post:'post',posts:'posts'})])));},renderPrivateReply:function(){var k=this.props.feedback.messagereplycontext;if(!k||k.status!==c('PagesPrivateReplyConstants').Status.ALREADY_REPLIED)return null;return (c('React').createElement('span',{className:"_ipm"},c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:k.status})));},render:function(){return (c('React').createElement('div',{className:"_ipn"},c('React').createElement('div',{className:"_ipo"},this.renderComments(),this.renderShares(),this.renderSeens(),this.renderViews(),this.renderPrivateReply()),c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:this.props.feedback,contextArgs:this.props.contextArgs})));}});f.exports=j;},null);
__d('UFIBling.react',['CommentPrelude','React','TrackingNodes','UFIBlingBox.react','UFIInstanceState','UFIReactionsBlingSocialSentence.react','UFIToplevelPagedCommentList','URI'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;function j(k,l){i.constructor.call(this,k,l);}j.prototype.render=function(){var k=this.props.contextArgs,l=this.props.feedbackTarget,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX);if(k.showtheaterforcomment&&k.commentredirecturi)k.commentajaxify=k.commentredirecturi;var n=new (c('URI'))(l.permalink).addQueryData({comment_tracking:m}).toString(),o=c('UFIToplevelPagedCommentList').getCommentList(k.ftentidentifier,l.defaultcommentorderingmode).getDisplayedCommentCount(),p=k.feedbackMode==='none'&&k.hasReactions&&l.displayreactions,q=function(event){event.preventDefault();if(p&&k.feedbackMode==='expanded'){this.$UFIBling1(false);}else{c('CommentPrelude').onBlingboxClick(event.currentTarget);this.props.onCommentVisibilityChanged&&this.props.onCommentVisibilityChanged();}}.bind(this);if(p){return (c('React').createElement(c('UFIReactionsBlingSocialSentence.react'),{commentCount:o,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,feedback:l,href:n,onCommentClick:q}));}else{var r,s,t;if(k.hasReactions){r=l.reactioncount;s=l.reactioncountmap;t=l.reactioncountreduced;}return (c('React').createElement(c('UFIBlingBox.react'),{comments:o,commentsreduced:l.commentcountreduced,contextArgs:k,'data-comment-prelude-ref':'action_link_bling','data-ft':m,likes:l.likecount,likesreduced:l.likecountreduced,nfb:l.nfbcount,onClick:q,permalink:n,reactionCount:r,reactionCountMap:s,reactionCountReduced:t,reshares:l.sharecount,resharesreduced:l.sharecountreduced,readOnly:k.readonly}));}};j.prototype.$UFIBling1=function(k){c('UFIInstanceState').updateStateFields(this.props.contextArgs.instanceid,'inlineShare',{active:k,toggling:true});};f.exports=j;},null);
__d('UFICommentLink.react',['cx','fbt','ix','React','TrackingNodes','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'UFICommentLink',propTypes:{onClick:k.func,href:k.string,ajaxify:k.string,rel:k.string},getDefaultProps:function(){return {ufiExperiments:{},onClick:c('emptyFunction')};},render:function(){var m=i._("Comment"),n=i._("Leave a comment"),o='{ "tn": "'+c('TrackingNodes').encodeTN(c('TrackingNodes').types.COMMENT_LINK)+'", "type": 24 }';return (c('React').createElement('a',{className:"comment_link _5yxe",role:'button',href:this.props.href?this.props.href:'#',title:n,ajaxify:this.props.ajaxify,rel:this.props.rel,onClick:this.props.onClick,'data-ft':o},m));}});f.exports=l;},null);
__d('UFICommentActionLink.react',['React','UFICommentLink.react','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentActionLink',propTypes:{contextArgs:h.object.isRequired},render:function(){var j=this.props.contextArgs,k=j.commentajaxify,l=j.commentredirecturi,m=j.instanceid,n=j.ufiexperiments,o=j.showtheaterforcomment,p=j.loggedOutLinkConfig;if(!k&&p&&p.showCommentLink)k=p.commentAjaxifyURI;if(k){return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,ajaxify:k,rel:'dialog'}));}else if(l)return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,href:l,rel:o?'theater':''}));return (c('React').createElement(c('UFICommentLink.react'),{ufiExperiments:n,onClick:function(event){event.preventDefault();c('UFIInstanceState').updateStateFields(m,'inlineShare',{active:false,toggling:true});c('UFIInstanceState').updateStateFields(m,'addCommentInput',{expanded:true});}}));}});f.exports=i;},null);
__d('UFIDispatcherContext.react',['React','UFIDispatcher'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIDispatcherContext',propTypes:{dispatcher:h.instanceOf(c('UFIDispatcher')).isRequired,stores:h.object.isRequired},childContextTypes:{dispatch:h.func,stores:h.object},getChildContext:function(){return {dispatch:this.props.dispatcher.dispatch.bind(this.props.dispatcher),stores:this.props.stores};},render:function(){return this.props.children;}});f.exports=i;},null);
__d('ReactionsWaterfallTypedLogger',['Banzai','GeneratedLoggerUtils','nullthrows'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.clear();}h.prototype.log=function(){c('GeneratedLoggerUtils').log('logger:ReactionsWaterfallLoggerConfig',this.$ReactionsWaterfallTypedLogger1,c('Banzai').BASIC);};h.prototype.logVital=function(){c('GeneratedLoggerUtils').log('logger:ReactionsWaterfallLoggerConfig',this.$ReactionsWaterfallTypedLogger1,c('Banzai').VITAL);};h.prototype.clear=function(){this.$ReactionsWaterfallTypedLogger1={};return this;};h.prototype.updateData=function(j){this.$ReactionsWaterfallTypedLogger1=babelHelpers['extends']({},this.$ReactionsWaterfallTypedLogger1,j);return this;};h.prototype.setClickDuration=function(j){this.$ReactionsWaterfallTypedLogger1.click_duration=j;return this;};h.prototype.setFinalState=function(j){this.$ReactionsWaterfallTypedLogger1.final_state=j;return this;};h.prototype.setHasReactions=function(j){this.$ReactionsWaterfallTypedLogger1.has_reactions=j;return this;};h.prototype.setHoverDuration=function(j){this.$ReactionsWaterfallTypedLogger1.hover_duration=j;return this;};h.prototype.setInitialState=function(j){this.$ReactionsWaterfallTypedLogger1.initial_state=j;return this;};h.prototype.setVC=function(j){this.$ReactionsWaterfallTypedLogger1.vc=j;return this;};var i={click_duration:true,final_state:true,has_reactions:true,hover_duration:true,initial_state:true,vc:true};f.exports=h;},null);
__d('UFILikeLink.react',['cx','fbt','ix','Image.react','React','TrackingNodes','UFILikeWebDriverIDs'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'UFILikeLink',propTypes:{ajaxify:k.string,href:k.string,likeAction:k.bool,rel:k.string,ufiExperiments:k.object,onClick:k.func},getDefaultProps:function(){return {ufiExperiments:{}};},onClick:function(m){if(this.props.href)return;m.preventDefault();this.props.onClick(m);},render:function(){var m=this.props.ufiExperiments,n=!this.props.likeAction,o=n?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,p=!n||!m.forcelegacyrendering?i._("Like"):i._("Unlike"),q=c('TrackingNodes').getTrackingInfo(n?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),r=n?i._("Unlike this"):i._("Like this");return (c('React').createElement('a',{className:"_48-k"+(' '+"UFILikeLink")+(n?' '+"UFILinkBright":''),'data-testid':o,href:this.props.href||'#',role:'button','aria-label':r,'aria-live':'polite','aria-pressed':n,rel:this.props.rel,ajaxify:this.props.ajaxify,onBlur:this.props.onBlur,onClick:this.onClick,onClickCapture:this.props.onClickCapture,onDragStart:this.props.onDragStart,onFocus:this.props.onFocus,onMouseDown:this.props.onMouseDown,onMouseEnter:this.props.onMouseEnter,onMouseLeave:this.props.onMouseLeave,onMouseMove:this.props.onMouseMove,onMouseUp:this.props.onMouseUp,onKeyDown:function(s,t){this.props.onKeyDown&&this.props.onKeyDown(s,t);}.bind(this),'data-ft':q},p));}});f.exports=l;},null);
__d('FunnelAction',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h='name',i='relative_time',j='tag';function k(l,m,n){this.$FunnelAction1={};this.$FunnelAction1[h]=l;this.$FunnelAction1[i]=m;if(n!==undefined)this.$FunnelAction1[j]=n;}k.prototype.getData=function(){return this.$FunnelAction1;};f.exports=k;},null);
__d('Funnel',['invariant','FunnelAction','FunnelRegistry','sprintf'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i='name',j='instance_id',k='start_time',l='tags',m='actions',n='sampling_rate',o='timeout_sec',p={EXPLICIT:'explicit',TIMEOUT:'timeout',SESSION_END:'session_end',RESTART:'restart',ACTIONS_FULL:'actions_full'},q={ACTION_END:'funnel_end',ACTION_WINDOW_BLUR:'window_blur',ACTION_WINDOW_FOCUS:'window_focus'},r=600;function s(t,u,v,w){!(c('FunnelRegistry')[t]===true)?h(0):void 0;this.$Funnel1=t;this.$Funnel2=u;this.$Funnel3=[];this.$Funnel4={};this.$Funnel5=v;this.$Funnel6=Date.now();this.timeout_sec=r;this.shouldTrackFocus=false;this.$Funnel7=w;this.devModeLogger('Started funnel');}s.prototype.addTag=function(t){!(typeof t==='string')?h(0):void 0;this.$Funnel4[t]=true;this.devModeLogger('Added funnel tag %s',t);return this;};s.prototype.appendAction=function(t,u){this.$Funnel3.push(new (c('FunnelAction'))(t,Date.now()-this.$Funnel6,u));if(u){this.devModeLogger('Appended action %s with tag %s',t,u);}else this.devModeLogger('Appended action %s',t);this.$Funnel8=t;return this;};s.prototype.appendActionIfNew=function(t,u){if(t!==this.$Funnel8)this.appendAction(t,u);return this;};s.prototype.getLogData=function(){var t={};t[i]=this.$Funnel1;if(this.$Funnel2!==undefined){t[j]=this.$Funnel2;}else t[j]=Math.floor(Math.random()*65536);t[k]=this.$Funnel6;t[n]=this.$Funnel5;t[o]=this.timeout_sec;t[l]=[];for(var u in this.$Funnel4)if(this.$Funnel4[u]===true)t[l].push(u);if(this.$Funnel3.length>0){t[m]=[];for(var v=0;v<this.$Funnel3.length;v++)t[m].push(this.$Funnel3[v].getData());}return t;};s.prototype.devModeLogger=function(){};f.exports={Funnel:s,EndType:p,ActionType:q};},null);
__d('FunnelLoggerSampler',['FunnelLoggerConfig'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(j){var k=i(j);if(k===0)return false;return Math.random()*k<1;}function i(j){var k=c('FunnelLoggerConfig').freq[j];if(k===undefined)k=c('FunnelLoggerConfig').freq['default'];return k;}f.exports={shouldLog:h,getSamplingRate:i};},null);
__d('FunnelLogger',['invariant','Banzai','Funnel','FunnelRegistry','FunnelLoggerSampler','MarauderLogger'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j=false,k=true;function l(la,ma){var na=w(la,ma);ka();fa(na);if(c('FunnelLoggerSampler').shouldLog(la)){i[na]=new (c('Funnel').Funnel)(la,ma,c('FunnelLoggerSampler').getSamplingRate(la),false);z(na);}}function m(la,ma){}function n(la,ma,na){if(na===undefined){y(la,undefined,ma);}else if(na)y(la,ma,na);}function o(la,ma){var na=w(la,ma);if(x(na)){i[na].devModeLogger('Cancelled funnel');aa(na);i[na]=undefined;}}function p(la,ma){var na=w(la,ma);if(x(na)){i[na].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.EXPLICIT);ga(na);}}function q(la,ma,na){if(typeof ma==='string'){ba(la,undefined,ma);}else if(typeof ma==='number'&&na)ba(la,ma,na);}function r(la,ma,na){if(typeof ma==='boolean'){ca(la,undefined,ma);}else if(typeof ma==='number')ca(la,ma,na);}function s(la,ma,na){if(typeof ma==='string'){da(la,undefined,ma,undefined);}else if(na)da(la,ma,na,undefined);}function t(la,ma,na){if(typeof ma==='string'){ea(la,undefined,ma,undefined);}else if(na)ea(la,ma,na,undefined);}function u(la,ma,na,oa){if(typeof ma==='string'){da(la,undefined,ma,na);}else da(la,ma,na,oa);}function v(la,ma,na,oa){if(typeof ma==='string'){ea(la,undefined,ma,na);}else ea(la,ma,na,oa);}function w(la,ma){!(c('FunnelRegistry')[la]===true)?h(0):void 0;if(ma===undefined||ma===null){return la;}else return la+ma.toString();}function x(la){return i[la]!==undefined;}function y(la,ma,na){var oa=w(la,ma);if(x(oa)){i[oa].timeout_sec=na;i[oa].devModeLogger('Timeout set to %d sec',na);z(oa);}}function z(la){aa(la);i[la].timeout_handle=setTimeout(function(){i[la].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.TIMEOUT);ga(la);},1000*i[la].timeout_sec);}function aa(la){if(i[la].timeout_handle)clearTimeout(i[la].timeout_handle);}function ba(la,ma,na){var oa=w(la,ma);if(x(oa)){i[oa].addTag(na);z(oa);}}function ca(la,ma,na){var oa=w(la,ma);if(x(oa)){i[oa].shouldTrackFocus=na;i[oa].devModeLogger('Focus tracking %s',na?'on':'off');}}function da(la,ma,na,oa){var pa=w(la,ma);if(x(pa)){i[pa].appendAction(na,oa);z(pa);}}function ea(la,ma,na,oa){var pa=w(la,ma);if(x(pa))i[pa].appendActionIfNew(na,oa);}function fa(la){if(x(la)){i[la].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.RESTART);ga(la);}}function ga(la){if(x(la)){var ma=i[la].getLogData();c('MarauderLogger').log('funnel_analytics',null,ma);i[la].devModeLogger('Logged: %s',JSON.stringify(ma));aa(la);i[la]=undefined;}}function ha(){for(var la in i)if(i.hasOwnProperty(la)&&x(la)){i[la].appendAction(c('Funnel').ActionType.ACTION_END,c('Funnel').EndType.SESSION_END);ga(la);}}function ia(){if(k){k=false;for(var la in i)if(i.hasOwnProperty(la)&&x(la)&&i[la].shouldTrackFocus){i[la].appendAction(c('Funnel').ActionType.ACTION_WINDOW_BLUR);aa(la);}}}function ja(){if(!k){k=true;for(var la in i)if(i.hasOwnProperty(la)&&x(la)&&i[la].shouldTrackFocus){i[la].appendAction(c('Funnel').ActionType.ACTION_WINDOW_FOCUS);aa(la);}}}function ka(){if(!j){j=true;if(window.addEventListener){c('Banzai').subscribe(c('Banzai').SHUTDOWN,ha);window.addEventListener('blur',ia);window.addEventListener('focus',ja);}}}f.exports={startFunnel:l,startFunnel_DEV_MODE:m,setFunnelTimeout:n,setFunnelTrackFocus:r,addFunnelTag:q,appendAction:s,appendActionIfNew:t,appendActionWithTag:u,appendActionWithTagIfNew:v,cancelFunnel:o,endFunnel:p};},null);
__d('UFIReactionsFunnelLogger',['FunnelLogger','UFIConfig','UFIReactionTypes'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('UFIConfig').reactionsHasFunnelLogging||false,i='WWW_REACTIONS_NUX_FUNNEL',j=c('UFIReactionTypes').reactions,k=60,l='like_button_enter',m='like_button_click',n='reaction_click',o='menu_show',p='nux_close_click',q={nuxShow:function(t){c('FunnelLogger').startFunnel(i);if(t)c('FunnelLogger').addFunnelTag(i,t);c('FunnelLogger').setFunnelTimeout(i,k);},nuxCloseClick:function(){c('FunnelLogger').appendAction(i,p);},likeButtonEnter:function(t){if(t&&j[t]){c('FunnelLogger').appendActionWithTag(i,l,j[t].name);}else c('FunnelLogger').appendAction(i,l);},likeButtonClick:function(){c('FunnelLogger').appendAction(i,m);},menuShow:function(){c('FunnelLogger').appendAction(i,o);},reactionSelection:function(t){if(t&&j[t]){var u=j[t].name;c('FunnelLogger').appendActionWithTag(i,n,u);}else c('FunnelLogger').appendAction(i,n);c('FunnelLogger').endFunnel(i);}};if(!h){var r=function(){};for(var s in q)q[s]=r;}f.exports=q;},null);
__d('SubscriptionList',['invariant'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(j,k){'use strict';this.$SubscriptionList1=[];this.$SubscriptionList2=j;this.$SubscriptionList3=k;}i.prototype.add=function(j){'use strict';var k={callback:j};this.$SubscriptionList1.push(k);if(this.$SubscriptionList2&&this.$SubscriptionList1.length===1)this.$SubscriptionList2();return {remove:function(){var l=this.$SubscriptionList1.indexOf(k);!(l!==-1)?h(0):void 0;this.$SubscriptionList1.splice(l,1);if(this.$SubscriptionList3&&this.$SubscriptionList1.length===0)this.$SubscriptionList3();}.bind(this)};};i.prototype.getCallbacks=function(){'use strict';return this.$SubscriptionList1.map(function(j){return j.callback;});};i.prototype.fireCallbacks=function(j){'use strict';this.$SubscriptionList1.forEach(function(k){k.callback(j);});};f.exports=i;},null);
__d('addFocusEvents',['Deferred','Event','React','SubscriptionList'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').Component,i=void 0,j=function(k){return function(){var l,m;l=babelHelpers.inherits(n,h);m=l&&l.prototype;n.prototype.componentDidMount=function(){'use strict';if(!i){var o,p;i=new (c('SubscriptionList'))(function(){o=c('Event').listen(window,'blur',function(){i&&i.fireCallbacks(true);p&&p.remove();p=c('Event').listen(document.documentElement,'focusin',function(){i&&i.fireCallbacks(false);p&&p.remove();p=null;});});},function(){o&&o.remove();p&&p.remove();o=null;p=null;i=null;});}this.subscription=i.add(function(q){this.locked=q;}.bind(this));};n.prototype.componentWillUnmount=function(){'use strict';this.subscription&&this.subscription.remove();};n.prototype.onClick=function(event){'use strict';this.props.onClick&&this.props.onClick(event);if(this.deferred)this.deferred.resolve(this.props.onMouseFocus);};n.prototype.onFocus=function(event){'use strict';if(this.deferred)this.deferred.reject();if(this.locked)return;this.deferred=new (c('Deferred'))();this.deferred.done(function(o){o&&o(event);this.deferred=null;}.bind(this),function(){this.deferred=null;}.bind(this));};n.prototype.onKeyUp=function(event){'use strict';this.props.onKeyUp&&this.props.onKeyUp(event);if(this.deferred)this.deferred.resolve(this.props.onKeyboardFocus);};n.prototype.render=function(){'use strict';var o=this.props,p=o.onKeyboardFocus,q=o.onMouseFocus,r=babelHelpers.objectWithoutProperties(o,['onKeyboardFocus','onMouseFocus']);return (c('React').createElement(k,babelHelpers['extends']({},r,{onClick:this.onClick.bind(this),onFocus:this.onFocus.bind(this),onKeyUp:this.onKeyUp.bind(this)})));};function n(){'use strict';l.apply(this,arguments);}return n;}();}.bind(this);f.exports=j;},null);
__d('onViewportChanged',['EventListener','emptyFunction','getViewportDimensions','requestAnimationFrame'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=[],i=false,j=null,k=void 0,l=void 0;function m(){var x=c('getViewportDimensions').withoutScrollbars();return {top:0,bottom:x.height,left:0,right:x.width};}function n(x,y){var z={transform:y||c('emptyFunction').thatReturnsArgument,callback:x,needsUpdate:true};h.push(z);u();p();return {remove:o.bind(null,z),scheduleCheck:s.bind(null,z)};}function o(x){var y=h.indexOf(x);if(y!==-1){h.splice(y,1);if(h.length===0){q();j=null;}}}function p(){if(!l){l=c('EventListener').listen(window,'scroll',t);k=c('EventListener').listen(window,'resize',r);}}function q(){if(l){l.remove();k.remove();l=k=null;}}function r(){j=null;t();}function s(x){x.needsUpdate=true;u();}function t(){h.map(function(x){return x.needsUpdate=true;});u();}function u(){if(!i){i=true;c('requestAnimationFrame')(function(){i=false;w();});}}function v(x){if(x.needsUpdate){x.needsUpdate=false;return true;}return false;}function w(){if(!j)j=m();var x=h.filter(v),y=x.map(function(z){return z.transform.call(null,j);});x.forEach(function(z,aa){return z.callback.call(null,y[aa]);});}f.exports=n;},null);
__d('UFIReactionsLinkImpl.react',['cx','fbt','BanzaiLogger','BootloadedComponent.react','Bootloader','Deferred','Event','JSResource','React','ReactDOM','ReactionNuxTypeEnum','ReactionsWaterfallTypedLogger','SubscriptionsHandler','UFIConfig','UFILikeWebDriverIDs','UFIReactionIconImpl.react','UFIReactionsFunnelLogger','UFIReactionTypes','UFICommentAction','UFIStoryAction','addFocusEvents','getElementRect','onViewportChanged','shallowCompare'],function a(b,c,d,e,f,g,h,i){var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=false,n=false,o=null,p=c('React').createElement('div',null),q=150,r=c('UFIReactionTypes').reactions,s=Object.keys(r),t=20,u=c('UFIConfig').reactionsHoverDelay||500,v=750,w=c('UFIConfig').reactionsHoverThreshold||5,x=c('UFIConfig').reactionsDisableMousemoveTrigger||false,y=500,z=5000,aa='ontouchstart' in window,ba=i._("Show more reactions"),ca=new (c('Deferred'))(),da=function(){if(!o){var ha=function(ia){o=ia;if(ca){ca.done(ea,ea);ca.resolve();}};if(c('UFIConfig').reactionsHasStaticVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithStaticVectorIcons.react"],ha);}else if(c('UFIConfig').reactionsHasAnimatedVectorDock){c('Bootloader').loadModules(["UFIReactionsMenuWithAnimatedVectorIcons.react"],ha);}else c('Bootloader').loadModules(["UFIReactionsMenuImpl.react"],ha);}},ea=function(){ca=null;},fa=c('addFocusEvents')('a');j=babelHelpers.inherits(ga,c('React').Component);k=j&&j.prototype;function ga(ha,ia){'use strict';k.constructor.call(this,ha,ia);this.hideDialog=this.hideDialog.bind(this);this.maybeShowNUX=this.maybeShowNUX.bind(this);this.onClick=this.onClick.bind(this);this.onClickCapture=this.onClickCapture.bind(this);this.onContextMenu=this.onContextMenu.bind(this);this.onDragStart=this.onDragStart.bind(this);this.onKeyboardFocus=this.onKeyboardFocus.bind(this);this.onMouseDown=this.onMouseDown.bind(this);this.onMouseEnter=this.onMouseEnter.bind(this);this.onMouseMove=this.onMouseMove.bind(this);this.onMouseLeave=this.onMouseLeave.bind(this);this.onMouseUp=this.onMouseUp.bind(this);this.onReactionChange=this.onReactionChange.bind(this);this.onReactionMenuMouseEnter=this.onReactionMenuMouseEnter.bind(this);this.onReactionMouseEnter=this.onReactionMouseEnter.bind(this);this.onReactionMouseLeave=this.onReactionMouseLeave.bind(this);this.onScreenReaderTrigger=this.onScreenReaderTrigger.bind(this);this.showDialog=this.showDialog.bind(this);this.dragStartX=null;this.dragStartY=null;this.subscriptionsHandler=new (c('SubscriptionsHandler'))();if(aa){this.onTouchEnd=this.onTouchEnd.bind(this);this.onTouchMove=this.onTouchMove.bind(this);this.onTouchStart=this.onTouchStart.bind(this);}if(ca)ca.done(function(){this.forceUpdate();}.bind(this),function(){ca=null;});this.state={dialogShown:false,isLongPressing:false,isMouseOver:false,isScrubbing:false,isTouchDown:false,NUXShown:false};}ga.prototype.shouldComponentUpdate=function(ha,ia){'use strict';return c('shallowCompare')(this,ha,ia);};ga.prototype.componentWillUpdate=function(ha,ia){'use strict';if(this.state.dialogShown&&!ia.dialogShown){this.$UFIReactionsLink1(this.props.reaction);if(!this.reactionSelected)this.$UFIReactionsLink2(this.props.reaction);}};ga.prototype.componentDidUpdate=function(ha,ia){'use strict';if(!ia.dialogShown&&this.state.dialogShown){if(aa){var ja;this.subscriptionsHandler.addSubscriptions(c('Event').listen(document.documentElement,'touchstart',function(event){ja=event.touches[0];}),c('Event').listen(document.documentElement,'touchmove',function(event){ja=event.touches[0];}),c('Event').listen(document.documentElement,'touchend',function(event){if(ja&&!this.refs.root.contains(document.elementFromPoint(ja.clientX,ja.clientY)))this.setState({dialogShown:false,isScrubbing:false});}.bind(this)));}}else if(ia.dialogShown&&!this.state.dialogShown){this.subscriptionsHandler.release();this.subscriptionsHandler=new (c('SubscriptionsHandler'))();}};ga.prototype.componentDidMount=function(){'use strict';this.initializeNux();this.$UFIReactionsLink3();};ga.prototype.componentWillUnmount=function(){'use strict';this.subscriptionsHandler.release();this.nuxSubscription&&this.nuxSubscription.remove();clearTimeout(this.nuxTimeout);ca&&ca.reject();};ga.prototype.initializeNux=function(){'use strict';if(!this.props.nuxConfig)return;var ha=this.props.nuxConfig.nuxType;if(ha===c('ReactionNuxTypeEnum').NOTIFICATION){this.maybeShowNUX();return;}if(ha===c('ReactionNuxTypeEnum').VIEWPORT&&!m)this.initializeViewportNux();};ga.prototype.initializeViewportNux=function(){'use strict';this.nuxSubscription=c('onViewportChanged')(function(ha){clearTimeout(this.nuxTimeout);if(ha)this.nuxTimeout=setTimeout(function(){this.nuxSubscription.remove();if(!this.state.dialogShown)this.maybeShowNUX();}.bind(this),this.props.nuxConfig.viewportDuration||z);}.bind(this),function(ha){var ia=c('getElementRect')(c('ReactDOM').findDOMNode(this.refs.root));return !(ia.bottom<ha.top||ia.top>ha.bottom||ia.right<ha.left||ia.left>ha.right);}.bind(this));};ga.prototype.maybeShowNUX=function(){'use strict';if(!m){m=true;this.setState({NUXShown:true,dialogShown:false});c('BanzaiLogger').log('WebReactionsNuxLoggerConfig',{feedback_id:this.props.id,'interface':'www'});}};ga.prototype.hideDialog=function(){'use strict';this.setState({dialogShown:false,isScrubbing:false});};ga.prototype.showDialog=function(){'use strict';if(this.dialogShownTime===0)this.dialogShownTime=Date.now();if(!this.state.dialogShown)c('UFIReactionsFunnelLogger').menuShow();m=true;this.setState({dialogShown:true,NUXShown:false});};ga.prototype.onClick=function(event){'use strict';var ha=this.props,ia=ha.reaction,ja=ha.suggestedReaction;if(!ia||ia===c('UFIReactionTypes').LIKE||!r[ia]){if(!ia&&this.props.nuxConfig){var ka=this.props.nuxConfig.nuxType;if(ka===c('ReactionNuxTypeEnum').LIKE_CLICK||ka===c('ReactionNuxTypeEnum').LIKE_CLICK_RENUX)this.maybeShowNUX();}var la=ja?ja:c('UFIReactionTypes').LIKE;ia=ia?c('UFIReactionTypes').NONE:la;this.onReactionChange(ia,event);this.$UFIReactionsLink1(ia,true);}else this.onReactionChange(0,event);this.setState({dialogShown:false,isMouseOver:false,isScrubbing:false});};ga.prototype.onClickCapture=function(event){'use strict';event.stopPropagation();this.setState({isLongPressing:false});};ga.prototype.onContextMenu=function(event){'use strict';if(this.state.isTouchDown)event.preventDefault();};ga.prototype.onDragStart=function(event){'use strict';event.preventDefault();};ga.prototype.onMouseDown=function(event){'use strict';clearTimeout(this.hoverTimeout);this.mouseDownTime=event.timeStamp;};ga.prototype.onMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);if(!this.state.dialogShown)this.hoverTimeout=setTimeout(this.showDialog,u);this.setState({isMouseOver:true});this.reactionSelected=false;this.initialReaction=this.props.reaction;this.mouseDownTime=0;this.mouseEnterTime=event.timeStamp;this.mouseLeaveTime=0;this.mouseUpTime=0;da();if(!this.state.dialogShown)this.logFunnelTimeout=setTimeout(function(){c('UFIReactionsFunnelLogger').likeButtonEnter(this.props.reaction);}.bind(this),q);};ga.prototype.onMouseMove=function(event){'use strict';if(x)return;var ha=event.clientX,ia=event.clientY;if(typeof this.hoverX==='number'&&typeof this.hoverY==='number'&&!(this.hoverX<ha+w&&this.hoverX>ha-w&&this.hoverY<ia+w&&this.hoverY>ia-w)){clearTimeout(this.hoverTimeout);this.hoverTimeout=setTimeout(this.showDialog,u);}this.hoverX=ha;this.hoverY=ia;};ga.prototype.onMouseLeave=function(event){'use strict';clearTimeout(this.hoverTimeout);clearTimeout(this.logFunnelTimeout);this.hoverX=null;this.hoverY=null;if(this.state.dialogShown)this.hoverTimeout=setTimeout(this.hideDialog,v);this.setState({isMouseOver:false});this.mouseLeaveTime=event.timeStamp;if(!this.state.dialogShown&&c('ReactDOM').findDOMNode(this.refs.trigger).contains(event.target))this.$UFIReactionsLink2(this.props.reaction);};ga.prototype.onReactionMenuMouseEnter=function(event){'use strict';clearTimeout(this.hoverTimeout);};ga.prototype.onMouseUp=function(event){'use strict';this.mouseUpTime=event.timeStamp;};ga.prototype.onTouchStart=function(event){'use strict';if(!this.state.dialogShown){this.mouseDownTime=Date.now();this.mouseUpTime=0;this.longPressTimeout=setTimeout(function(){if(this.dialogShownTime===0)this.dialogShownTime=Date.now();this.setState({dialogShown:true,NUXShown:false,isLongPressing:true});}.bind(this),y);da();}this.setState({isTouchDown:true,isLongPressing:false});};ga.prototype.onTouchEnd=function(event){'use strict';if(this.state.isLongPressing)this.mouseUpTime=Date.now();this.dragStartX=null;this.dragStartY=null;clearTimeout(this.longPressTimeout);this.setState({isTouchDown:false});};ga.prototype.onTouchMove=function(event){'use strict';if(this.state.isScrubbing)return;var ha=event.touches[0],ia=ha.clientX,ja=ha.clientY;if(this.dragStartX===null&&this.dragStartY===null){this.dragStartX=ia;this.dragStartY=ja;return;}if(typeof this.dragStartX==='number'&&typeof this.dragStartY==='number'&&(this.dragStartX>ia+t||this.dragStartX<ia-t||this.dragStartY>ja+t||this.dragStartY<ja-t))this.setState({isScrubbing:true});};ga.prototype.onReactionChange=function(ha,event){'use strict';this.$UFIReactionsLink1(ha);this.reactionSelected=true;this.$UFIReactionsLink2(ha);var ia=c('ReactDOM').findDOMNode(this.refs.trigger);if(event.target===ia){c('UFIReactionsFunnelLogger').likeButtonClick(ha);}else c('UFIReactionsFunnelLogger').reactionSelection(ha);var ja=void 0;if(this.props.comment){ja=c('UFICommentAction').changeReaction(this.props.comment,ha,ia);}else ja=c('UFIStoryAction').changeReaction({ftentidentifier:this.props.id,rootid:this.props.rootid,source:this.props.source},ha,ia);this.context.dispatch(ja);this.setState({dialogShown:false,isScrubbing:false});};ga.prototype.onReactionMouseEnter=function(ha,event){'use strict';if(this.reactionsHoverStartTimeMap[ha]===0)this.reactionsHoverStartTimeMap[ha]=Date.now();};ga.prototype.onReactionMouseLeave=function(ha,event){'use strict';if(this.reactionsHoverStartTimeMap[ha]){this.reactionsHoverTotalTimeMap[ha]+=Date.now()-this.reactionsHoverStartTimeMap[ha];this.reactionsHoverStartTimeMap[ha]=0;}};ga.prototype.onKeyboardFocus=function(){'use strict';this.allowKeyboardFocus=true;this.showDialog();};ga.prototype.onScreenReaderTrigger=function(){'use strict';n=true;this.allowKeyboardFocus=true;this.showDialog();};ga.prototype.renderMenu=function(){'use strict';if(this.state.dialogShown)da();if(!o)return null;var ha=this.allowKeyboardFocus;this.allowKeyboardFocus=false;return (c('React').createElement(o,{allowKeyboardFocus:ha,initialReaction:this.props.reaction,isLongPressing:this.state.isLongPressing,isScreenReader:n,onMouseEnter:this.onReactionMenuMouseEnter,onMouseLeave:this.onMouseLeave,onReactionClick:this.onReactionChange,onBlur:this.hideDialog,onFocus:this.showDialog,onReactionMouseEnter:this.onReactionMouseEnter,onReactionMouseLeave:this.onReactionMouseLeave,shown:this.state.dialogShown,supportedReactions:this.props.supportedReactions}));};ga.prototype.renderTrigger=function(){'use strict';var ha=this.props,ia=ha.reaction,ja=ha.suggestedReaction;if(ia&&!r[ia])ia=null;var ka=ia?c('UFILikeWebDriverIDs').UNLIKE_LINK:c('UFILikeWebDriverIDs').LIKE_LINK,la=void 0,ma=void 0,na=void 0,oa=void 0;if(this.props.comment){if(!ia){la=r[c('UFIReactionTypes').LIKE].display_name;}else la=r[ia].display_name;na="UFILikeLink"+(' '+"UFIReactionLink")+(ia?' '+"UFILinkBright":'');oa=ia?r[ia].color:null;}else{if(!ia){la=ja?r[ja].display_name:r[c('UFIReactionTypes').LIKE].display_name;}else la=r[ia].display_name;if(ia&&ia!=c('UFIReactionTypes').LIKE||!ia&&ja&&ja!=c('UFIReactionTypes').LIKE)ma=c('React').createElement(c('UFIReactionIconImpl.react'),{className:"_1ktw",grayscale:!ia&&!!ja,reaction:ia||ja,size:'13'});na="UFILikeLink"+(' '+"_4x9-")+(' '+"_4x9_")+(!ma?' '+"_48-k":'')+(ia?' '+"UFILinkBright":'');oa=ia?r[ia].color:null;}return (c('React').createElement(fa,{'aria-pressed':!!ia,className:na,'data-testid':ka,href:'#',onClick:this.onClick,onClickCapture:this.state.isLongPressing?this.onClickCapture:null,onContextMenu:this.onContextMenu,onDragStart:this.onDragStart,onKeyboardFocus:o?null:this.onKeyboardFocus,onMouseDown:this.onMouseDown,onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onMouseMove:this.state.isMouseOver?this.onMouseMove:null,onMouseUp:this.onMouseUp,onTouchEnd:aa?this.onTouchEnd:null,onTouchMove:aa?this.onTouchMove:null,onTouchStart:aa?this.onTouchStart:null,ref:'trigger',role:'button',style:{color:oa},tabIndex:o?-1:0},ma,la));};ga.prototype.renderNUX=function(){'use strict';var ha=c('ReactDOM').findDOMNode(this.refs.root);if(!this.state.NUXShown||!ha)return null;return (c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:p,bootloadLoader:c('JSResource')('UFIReactionsNUX.react'),context:ha,titleOverride:this.props.nuxConfig&&this.props.nuxConfig.titleOverride,textOverride:this.props.nuxConfig&&this.props.nuxConfig.textOverride,nuxKey:this.props.nuxConfig&&this.props.nuxConfig.nuxKey}));};ga.prototype.renderScreenReaderTrigger=function(){'use strict';if(o)return null;return (c('React').createElement('span',{role:'button',className:'accessible_elem',onClick:this.onScreenReaderTrigger,tabIndex:-1},ba));};ga.prototype.render=function(){'use strict';return (c('React').createElement('div',{className:"_khz"+(this.state.isScrubbing?' '+"_4bdq":''),ref:'root'},this.renderTrigger(),this.renderScreenReaderTrigger(),this.renderMenu(),this.renderNUX()));};ga.prototype.$UFIReactionsLink3=function(){'use strict';this.dialogShownTime=0;this.reactionsHoverStartTimeMap={};this.reactionsHoverTotalTimeMap={};s.forEach(function(ha){this.reactionsHoverStartTimeMap[ha]=0;this.reactionsHoverTotalTimeMap[ha]=0;}.bind(this));};ga.prototype.$UFIReactionsLink1=function(ha,ia){'use strict';if(this.dialogShownTime!==0){var ja={feedback_id:this.props.id,final_reaction:ha,initial_reaction:this.props.reaction,'interface':'www',long_press_duration:this.mouseDownTime!==0&&this.mouseUpTime!==0?this.mouseUpTime-this.mouseDownTime:0,non_reaction_like:ia,time_spent:Date.now()-this.dialogShownTime};for(var ka in this.reactionsHoverTotalTimeMap){var la='time_spent_'+r[ka].name.toLowerCase();ja[la]=this.reactionsHoverTotalTimeMap[ka];}c('BanzaiLogger').log('UserReactionsLoggerConfig',ja);this.$UFIReactionsLink3();}};ga.prototype.$UFIReactionsLink2=function(ha){'use strict';var ia=this.mouseUpTime>0&&this.mouseDownTime>0?this.mouseUpTime-this.mouseDownTime:0,ja=this.mouseLeaveTime-this.mouseEnterTime;if(ja>0)new (c('ReactionsWaterfallTypedLogger'))().setClickDuration(ia).setFinalState(ha).setHoverDuration(ja).setInitialState(this.initialReaction).setHasReactions(true).log();};ga.contextTypes={dispatch:l.func};ga.propTypes={id:l.string.isRequired,nuxConfig:l.object,reaction:l.number.isRequired,rootid:l.string,source:l.number,comment:l.object,supportedReactions:l.arrayOf(l.number).isRequired};f.exports=ga;},null);
__d('UFILikeActionLink.react',['React','ReactionsWaterfallTypedLogger','UFIConfig','UFILikeLink.react','UFIReactionsLinkImpl.react','UFIReactionTypes','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFILikeActionLink',contextTypes:{dispatch:h.func},propTypes:{feedback:h.object.isRequired,contextArgs:h.object.isRequired},_initialHasViewerLiked:0,_mouseDownTime:0,_mouseEnterTime:0,_mouseUpTime:0,onClick:function(event){event.preventDefault();var j=this.props.feedback.hasviewerliked;this.context.dispatch(c('UFIStoryAction').changeReaction(this.props.contextArgs,j?c('UFIReactionTypes').NONE:c('UFIReactionTypes').LIKE,event.target));},render:function(){var j=this.props.feedback;if(this.props.contextArgs.hasReactions&&j.canviewerreact&&c('UFIReactionsLinkImpl.react')){return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:this.props.contextArgs.ftentidentifier,hasNUX:c('UFIConfig').hasReactionsNUX&&!j.hasviewerliked,nuxConfig:this.props.contextArgs.reactionsNuxConfig,reaction:j.viewerreaction,rootid:this.props.contextArgs.rootid,source:this.props.contextArgs.source,suggestedReaction:j.suggestedreaction,supportedReactions:j.supportedreactions}));}else{var k=function(event){this._initialHasViewerLiked=Number(j.hasviewerliked);this._mouseDownTime=0;this._mouseEnterTime=event.timeStamp;this._mouseUpTime=0;}.bind(this),l=function(event){var q=this._mouseUpTime>0&&this._mouseDownTime>0?this._mouseUpTime-this._mouseDownTime:0,r=Number(j.hasviewerliked);new (c('ReactionsWaterfallTypedLogger'))().setClickDuration(q).setFinalState(r).setHoverDuration(event.timeStamp-this._mouseEnterTime).setInitialState(this._initialHasViewerLiked).setHasReactions(false).log();}.bind(this),m=function(event){this._mouseDownTime=event.timeStamp;}.bind(this),n=function(event){this._mouseUpTime=event.timeStamp;}.bind(this),o=this.props.contextArgs.loggedOutLinkConfig,p=null;if(o&&o.showLikeLink)p=o.likeAjaxifyURI;return (c('React').createElement(c('UFILikeLink.react'),{ajaxify:p,likeAction:!j.hasviewerliked,onClick:this.onClick,onMouseDown:m,onMouseEnter:k,onMouseLeave:l,onMouseUp:n,rel:p?'dialog':null,ufiExperiments:this.props.contextArgs.ufiexperiments}));}}});f.exports=i;},null);
__d("XPagesMessagingPrivateReplyDialogController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/private_reply\/dialog\/",{activity_id:{type:"String",required:true}});},null);
__d('UFIPrivateReplyLink.react',['cx','fbt','ActorURI','Link.react','PagesPrivateReplyConstants','React','XUIGrayText.react','XPagesMessagingPrivateReplyDialogController'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('PagesPrivateReplyConstants').Status,k=c('PagesPrivateReplyConstants').Type,l=c('React').PropTypes,m=c('React').createClass({displayName:'UFIPrivateReplyLink',propTypes:{actorID:l.string.isRequired,activityID:l.string.isRequired,context:l.shape({activityType:l.string.isRequired,status:l.string.isRequired,hasReplyPermission:l.bool.isRequired,pageID:l.string.isRequired,permalink:l.string}).isRequired,seeResponseLabel:l.bool.isRequired},statics:{willRender:function(n,o){if(!n)return false;if(n.hasReplyPermission&&o===n.pageID)return true;return false;}},render:function(){var n=this.props.context;if(n.hasReplyPermission&&this.props.actorID===n.pageID){if(n.status===j.REPLYABLE){return this._renderMessageLink();}else if(n.status===j.ALREADY_REPLIED)return this._renderSeeReplyLink();return this._renderTooltip();}return null;},_renderMessageLink:function(){var n=c('ActorURI').create(c('XPagesMessagingPrivateReplyDialogController').getURIBuilder().setString('activity_id',this.props.activityID).getURI(),this.props.context.pageID);return (c('React').createElement(c('Link.react'),{className:"_50u0",href:n,rel:'dialog'},this._getLabel()));},_renderTooltip:function(){var n;switch(this.props.context.status){case j.EXPIRED:n=i._({"comments":"You can't send a message response to comments that are older than 6 months.","reviews":"You can't send a message response to reviews that are older than 6 months.","posts":"You can't send a message response to posts that are older than 6 months."},[i['enum'](this._getActivityTypeLabel(),{comments:'comments',reviews:'reviews',posts:'posts'})]);break;case j.NOT_USER_CREATED:n=i._("Pages can't send private messages to other Pages.");break;case j.CANNOT_MESSAGE:n=i._("This person can't receive a message reply from your Page.");break;}return (c('React').createElement('span',{className:"_50u0 _50u4",'data-hover':n?'tooltip':null,'data-tooltip-content':n},this._getLabel()));},_renderSeeReplyLink:function(){return (c('React').createElement(c('Link.react'),{className:"_50u0",href:this.props.context.permalink||'#'},this.props.seeResponseLabel?i._("See Response"):this._getLabel()));},_getLabel:function(){return i._("Message");},_getActivityTypeLabel:function(){switch(this.props.context.activityType){case k.COMMENT_PAGE_POST:case k.COMMENT_WALL_POST:case k.COMMENT_REVIEW:return 'comments';case k.REVIEW:return 'reviews';default:return 'posts';}}});f.exports=m;},null);
__d('UFIReactionStore',['Arbiter','FluxStore','UFIActionTypes','UFIReactionTypes','UFIUIEvents','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){switch(k.type){case c('UFIActionTypes').STORY.CHANGE_REACTION:c('UFIUserActions').changeReaction(k.contextArgs.ftentidentifier,k.reactionType,{rootid:k.contextArgs.rootid,source:k.contextArgs.source,target:k.target});c('Arbiter').inform(c('UFIUIEvents').ReactionButtonClicked,{ft_id:k.contextArgs.ftentidentifier,like_action:k.reactionType===c('UFIReactionTypes').LIKE,reaction_type:k.reactionType,target:k.target});c('Arbiter').inform('inlineShare/reflow');break;}};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('UFIShareLink.react',['cx','fbt','CurrentUser','Event','React','ReactDOM','TrackingNodes','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'UFIShareLink',componentDidMount:function(){if(!this.props.onShareClick)return;this._clickEvent=c('Event').listen(c('ReactDOM').findDOMNode(this),'click',this.props.onShareClick);},componentWillUnmount:function(){if(!this.props.onShareClick)return;this._clickEvent.remove();},_onClick:function(event){if(this.props.href&&this.props.href!=='#'&&!this.props.onClick)return;event.preventDefault();this.props.onClick&&this.props.onClick(event);},render:function(){var k=i._("Send this to friends or post it on your timeline.");if(c('CurrentUser').isWorkUser())k=i._("Send this to coworkers or post it on your timeline.");var l='{ "tn": "'+c('TrackingNodes').encodeTN(c('TrackingNodes').types.SHARE_LINK)+'", "type": 25 }',m=null;if(this.props.rel!=='dialog')m=c('React').createElement(c('XUISpinner.react'),{className:"UFIShareLinkSpinner _1wfk",showOnAsync:true});return (c('React').createElement('a',babelHelpers['extends']({},this.props,{className:c('joinClasses')(this.props.className,"share_action_link _5f9b"),onClick:this._onClick,'data-ft':l,title:k}),i._("Share"),m));}});f.exports=j;},null);
__d('UFIShareNowMenuBootloader.react',['BootloadedComponent.react','JSResource','React','UFIShareLink.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'UFIShareNowMenuBootloader',getInitialState:function(){return {openOnInit:false,focusOnInit:false,interacted:false};},render:function(){var i=this.state,j=i.openOnInit,k=i.focusOnInit,l=i.interacted,m=this.props,n=m.endpoint,o=m.endpointData,p=m.onShow,q=m.onHide,r=c('React').createElement(c('UFIShareLink.react'),{href:'#',onClick:function(){return this.setState({interacted:true,openOnInit:true});}.bind(this),onFocus:function(){return this.setState({interacted:true,focusOnInit:true});}.bind(this),onMouseOver:function(){return this.setState({openOnInit:false,focusOnInit:false,interacted:true});}.bind(this)});if(l)return (c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIShareNowMenu.react'),bootloadPlaceholder:r,endpoint:n,endpointData:o,onShow:p,onHide:q,openOnInit:j,focusOnInit:k}));return r;}});f.exports=h;},null);
__d('UFIShareActionLink.react',['ActorURI','React','UFIShareNowMenuBootloader.react','UFIShareLink.react','URI','UFIInstanceState'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIShareActionLink',propTypes:{feedbackTarget:h.object,ufiInstanceID:h.string,shareURI:h.string,shareRel:h.string,shareNowMenuURI:h.string,shareLinkHref:h.string},render:function(){var j=this.props,k=j.ufiInstanceID,l=j.shareURI,m=j.shareRel,n=j.shareNowMenuURI,o=j.shareLinkHref,p=!this._getInlineShareProp('active')&&n,q={ufi_id:k};if(this.props.feedbackTarget){var r=this.props.feedbackTarget.actorforpost;if(r){l=c('ActorURI').create(l,r);n=c('ActorURI').create(n,r);}}if(!p)if(o){return (c('React').createElement(c('UFIShareLink.react'),{href:o}));}else return (c('React').createElement(c('UFIShareLink.react'),{href:new (c('URI'))(l).addQueryData(q),rel:m,onShareClick:function(event){if(this._getInlineShareProp('loaded')){c('UFIInstanceState').updateStateFields(k,'inlineShare',{active:true,toggling:true});event.kill();}}.bind(this)}));return (c('React').createElement(c('UFIShareNowMenuBootloader.react'),{endpoint:n,endpointData:q}));},_getInlineShareProp:function(j){var k=c('UFIInstanceState').getKeyForInstance(this.props.ufiInstanceID,'inlineShare');return !!(k&&k[j]);}});f.exports=i;},null);
__d('UFISubscribeLink.react',['fbt','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFISubscribeLink',propTypes:{subscribeAction:i.bool,onClick:i.func},render:function(){var k=this.props.subscribeAction?h._("Turn On Notifications"):h._("Turn Off Notifications"),l=this.props.subscribeAction?h._("Get a notification whenever someone comments."):h._("Stop getting notifications when someone comments.");return (c('React').createElement('a',{className:'UFISubscribeLink',href:'#',role:'button','aria-live':'polite',title:l,onClick:this.props.onClick},k));}});f.exports=j;},null);
__d('UFITimelineBlingBox.react',['cx','fbt','ProfileBrowserLink','ProfileBrowserTypes','React','UFIBlingItem.react','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFITimelineBlingBox',propTypes:{contextArgs:j.object.isRequired,'data-ft':j.string,'data-gt':j.string,actorid:j.any,commentOnClick:j.func,comments:j.number,commentsreduced:j.string,enableShowComments:j.bool,enableShowLikes:j.bool,feedbackFBID:j.any,likes:j.number,likesreduced:j.string,reshares:j.number,resharesreduced:j.string},render:function(){var l=[];if(this.props.likes&&this.props.enableShowLikes){var m=this._getProfileBrowserURI(),n=i._("See who likes this"),o=c('React').createElement('a',{ajaxify:m.dialog,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-gt':this.props['data-gt'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-uri':this._getLikeToolTipURI(),href:m.page,key:'like',rel:'dialog',role:'button',title:n},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.likes,countreduced:this.props.likesreduced,iconClassName:'UFIBlingBoxTimelineLikeIcon',itemKey:'like'}));l.push(o);}if(this.props.comments&&this.props.enableShowComments){var p=i._("Show comments"),q=c('React').createElement('a',{'aria-label':p,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-content':p,href:'#',key:'comment',onClick:this.props.commentOnClick},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.comments,countreduced:this.props.commentsreduced,iconClassName:'UFIBlingBoxTimelineCommentIcon',itemKey:'comment'}));l.push(q);}if(this.props.reshares){var r=i._("Show shares"),s=this._getShareViewURI(),t=c('React').createElement('a',{ajaxify:s.dialog,'aria-label':r,className:this._getItemClassName(l),'data-ft':this.props['data-ft'],'data-hover':'tooltip','data-tooltip-alignh':'right','data-tooltip-content':r,href:s.page,key:'reshare',rel:'async'},c('React').createElement(c('UFIBlingItem.react'),{contextArgs:this.props.contextArgs,count:this.props.reshares,countreduced:this.props.resharesreduced,iconClassName:'UFIBlingBoxTimelineReshareIcon',itemKey:'reshare'}));l.push(t);}return (c('React').createElement('span',null,l));},_getItemClassName:function(l){return (l.length>0?"mls":'')+(' '+"UFIBlingBoxTimelineItem");},_getLikeToolTipURI:function(){if(this.props.feedbackFBID){var l=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:this.props.feedbackFBID});return l.toString();}else return null;},_getProfileBrowserURI:function(){if(this.props.feedbackFBID){var l=c('ProfileBrowserTypes').LIKES,m={id:this.props.feedbackFBID,actorid:this.props.actorid},n=c('ProfileBrowserLink').constructDialogURI(l,m),o=c('ProfileBrowserLink').constructPageURI(l,m),p={dialog:n.toString(),page:o.toString()};return p;}},_getShareViewURI:function(){if(this.props.feedbackFBID){var l=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:this.props.feedbackFBID}),m=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:this.props.feedbackFBID}),n={dialog:l.toString(),page:m.toString()};return n;}}});f.exports=k;},null);
__d('UFIActionLinkController',['cx','invariant','Arbiter','BootloadedComponent.react','ClickPointIdentifiersDEPRECATED','CommentPrelude','CSS','DataStore','DOM','DOMQuery','JSResource','Parent','React','ReactDOM','TrackingNodes','UFIBling.react','UFICentralUpdates','UFICommentActionLink.react','UFIConfig','UFIConstants','UFIDispatcher','UFIDispatcherContext.react','UFIFeedbackTargets','UFIInstanceState','UFILikeActionLink.react','UFIReactionStore','UFIShareActionLink.react','UFISubscribeLink.react','UFITimelineBlingBox.react','UFIToplevelPagedCommentList','UFIUserActions','UFIPrivateReplyLink.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(l,m,n){var o=c('DOMQuery').scry(l,m)[0];if(o){var p=document.createElement('span');o.parentNode.replaceChild(p,o);p.appendChild(o);if(typeof n==='function')n(p);}else var q=c('Arbiter').subscribe('PhotoSnowlift.DATA_CHANGE',function(){c('Arbiter').unsubscribe(q);j(l,m,n);},c('Arbiter').SUBSCRIBE_NEW);}var k=function(l,m,n,o){this._root=l;this._contextArgs=m;this._ftFBID=n.targetfbid;!(typeof o==='function')?i(0):void 0;this._visibilityToggler=o;this._isOnTimeline=this._isRenderingOnTimeline();this._dispatcher=new (c('UFIDispatcher'))();this._stores={UFIReactionStore:new (c('UFIReactionStore'))(this._dispatcher)};if(this._isOnTimeline){this._attemptInitializeTimelineBling();}else this._attemptInitializeBling();if(n.viewercanlike||n.hasviewerliked)this._attemptInitializeLike();if(n.cancomment)this._attemptInitializeComment();if(n.viewercansubscribetopost)this._attemptInitializeSubscribe();this._attemptInitializeShare();this._attemptInitializeMessageReply();if(c('UFIConfig').reactActionLinks){this._attemptInitializeInlineSearchFeedback();this._attemptInitializeActorSelector();}c('UFICentralUpdates').subscribe('feedback-updated',function(p,q){var r=q.updates;if(m.ftentidentifier in r)this.render();}.bind(this));c('UFICentralUpdates').subscribe('feedback-id-changed',function(p,q){var r=m.ftentidentifier,s=q.updates;if(r in s){this._contextArgs=babelHelpers['extends']({},m,{ftentidentifier:s[r]});m=this._contextArgs;}}.bind(this));c('UFICentralUpdates').subscribe('instance-updated',function(p,q){var r=q.updates[this._contextArgs.instanceid];if(r&&r.inlineShare)this.render();}.bind(this));};Object.assign(k.prototype,{_attemptInitializeBling:function(){j(this._root,'^form .uiBlingBox',function(l){this._blingRoot=l;if(this._dataReady)this._renderBling();}.bind(this));},_attemptInitializeTimelineBling:function(){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline')[0];if(l){var m=c('DOMQuery').scry(l,'.fbTimelineFeedbackLikes')[0];this._enableShowLikes=!!m;var n=c('DOMQuery').scry(l,'.fbTimelineFeedbackComments')[0];this._enableShowComments=!!n;}this._blingTimelineRoot=l;if(this._dataReady)this._renderTimelineBling();},_attemptInitializeInlineSearchFeedback:function(){j(this._root,'^form .inline_feedback',function(l){this._inlineSearchRoot=l;if(this._dataReact)this._renderInlineSearchFeedback();}.bind(this));},_attemptInitializeActorSelector:function(){j(this._root,'^form .actor_selector',function(l){this._actorSelectorRoot=l;if(this._dataReact)this._renderActorSelector();}.bind(this));},_attemptInitializeLike:function(){j(this._root,'^form .like_link',function(l){this._likeRoot=l;if(this._dataReady)this._renderLike();}.bind(this));},_attemptInitializeComment:function(){j(this._root,'^form .comment_link',function(l){this._commentRoot=l;if(this._dataReady)this._renderComment();}.bind(this));},_attemptInitializeSubscribe:function(){j(this._root,'^form .unsub_link',function(l){this._subscribeRoot=l;if(this._dataReady)this._renderSubscribe();}.bind(this));},_attemptInitializeMessageReply:function(){j(this._root,'^form .message_reply_action_link',function(l){this._messageReplyRoot=l;if(this._messageReplyRoot.previousSibling&&this._messageReplyRoot.previousSibling.nodeType===3){this._messageReplySeparator=this._messageReplyRoot.previousSibling;this._messageReplySeparatorData=this._messageReplySeparator.data;}if(this._dataReady)this._renderMessageReply();}.bind(this));},_attemptInitializeShare:function(){j(this._root,'^form .share_action_link',function(l){this._shareRoot=l;c('CSS').addClass(this._shareRoot,"share_root");var m=c('DOMQuery').scry(this._shareRoot,'.share_action_link')[0];if(m){this._shareURI=m.getAttribute('href');this._shareRel=m.getAttribute('rel');this._shareNowMenuURI=c('DataStore').get(m,'share-now-menu-uri');}if(this._dataReady)this._renderShare();}.bind(this));},render:function(){this._dataReady=true;if(this._isOnTimeline){this._renderTimelineBling();}else this._renderBling();this._renderLike();this._renderComment();this._renderSubscribe();this._renderShare();this._renderMessageReply();if(c('UFIConfig').reactActionLinks){this._renderInlineSearchFeedback();this._renderActorSelector();}},_renderBling:function(){if(this._blingRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._blingBox=c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getBling(l)),this._blingRoot);}.bind(this));},getBling:function(l){return (c('React').createElement(c('UFIBling.react'),{contextArgs:this._contextArgs,feedbackTarget:l,onCommentVisibilityChanged:this._visibilityToggler}));},_renderTimelineBling:function(){if(this._blingTimelineRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(this.getTimelineBling(l),this._blingTimelineRoot);}.bind(this));},getTimelineBling:function(l){var m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.BLINGBOX),n=c('ClickPointIdentifiersDEPRECATED').getUserActionID(c('ClickPointIdentifiersDEPRECATED').types.TIMELINE_SEE_LIKERS),o=function(event){var q=c('Parent').byTag(event.target,'form');c('CommentPrelude').uncollapse(q,'action_link_timeline_bling');var r=c('DOMQuery').scry(q,'a.UFIPagerLink');if(r.length)r[0].click();event.preventDefault();},p=c('UFIToplevelPagedCommentList').getCommentListForFeedbackTargetID_UNSAFE(this._contextArgs.ftentidentifier).getDisplayedCommentCount();return (c('React').createElement(c('UFITimelineBlingBox.react'),{comments:p,commentsreduced:l.commentcountreduced,commentOnClick:o,contextArgs:this._contextArgs,'data-ft':m,'data-gt':n,enableShowComments:this._enableShowComments,enableShowLikes:this._enableShowLikes,feedbackFBID:this._ftFBID,likes:l.likecount,likesreduced:l.likecountreduced,reshares:l.sharecount,resharesreduced:l.sharecountreduced,actorid:l.actorid}));},_renderInlineSearchFeedback:function(){if(this._inlineSearchRoot)c('ReactDOM').render(this.getInlineSearchFeedback(),this._inlineSearchRoot);},getInlineSearchFeedback:function(){return (c('React').createElement('div',null,c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react')},this._contextArgs.inlineSearchFeedbackConfig))));},_renderActorSelector:function(){if(this._actorSelector)c('ReactDOM').render(this.getActorSelector(),this._actorSelectorRoot);},getActorSelector:function(){var l=this._contextArgs.actorSelectorConfig,m=l.module,n=l.props;n.nuxHoverContext=c('Parent').byTag(event.target,'form');return (c('React').createElement(m,n));},_renderLike:function(){if(this._likeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this._dispatcher,stores:this._stores},this.getLike(l)),this._likeRoot);}.bind(this));},getLike:function(l){return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:l,contextArgs:this._contextArgs}));},_renderComment:function(){if(this._commentRoot)this._commentLink=c('ReactDOM').render(this.getComment(),this._commentRoot);},getComment:function(){return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this._contextArgs}));},_renderMessageReply:function(){if(this._messageReplyRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._messageReplyLink=null;var m=this.getMessageReply(l);if(m)this._messageReplyLink=c('ReactDOM').render(m,this._messageReplyRoot);if(!this._messageReplyLink||!c('ReactDOM').findDOMNode(this._messageReplyLink)){if(this._messageReplySeparator)this._messageReplySeparator.data='';c('DOM').setContent(this._messageReplyRoot,null);return;}if(this._messageReplySeparator)this._messageReplySeparator.data=this._messageReplySeparatorData;}.bind(this));},getMessageReply:function(l){if(l.messagereplycontext)return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:l.actorforpost,activityID:this._contextArgs.ftentidentifier,context:l.messagereplycontext,seeResponseLabel:false}));return null;},_renderSubscribe:function(){if(this._subscribeRoot)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._subscribeLink=c('ReactDOM').render(this.getSubscribe(l),this._subscribeRoot);}.bind(this));},getSubscribe:function(l){var m=!l.hasviewersubscribed,n=function(event){c('UFIUserActions').changeSubscribe(this._contextArgs.ftentidentifier,m,{source:this._contextArgs.source,target:event.target,rootid:this._contextArgs.rootid,commentexpandmode:l.commentexpandmode});event.preventDefault();}.bind(this);return (c('React').createElement(c('UFISubscribeLink.react'),{onClick:n,subscribeAction:m}));},_renderShare:function(){if(this._shareRoot&&this._shareURI)c('UFIFeedbackTargets').getFeedbackTarget(this._contextArgs.ftentidentifier,function(l){this._shareLink=c('ReactDOM').render(this.getShare(l),this._shareRoot);}.bind(this));},getShare:function(l){return (c('React').createElement(c('UFIShareActionLink.react'),{feedbackTarget:l,ufiInstanceID:this._contextArgs.instanceid,shareURI:this._shareURI,shareRel:this._shareRel,shareNowMenuURI:this._shareNowMenuURI}));},_setInlineShareActive:function(l){c('UFIInstanceState').updateStateFields(this._contextArgs.instanceid,'inlineShare',{active:l,toggling:true});},_isRenderingOnTimeline:function(){if(this._contextArgs.source===c('UFIConstants').UFIFeedbackSourceType.PROFILE){var l=c('DOMQuery').scry(this._root,'^form .fbTimelineFeedbackActions .UFIBlingBoxTimeline');return l.length>0;}return false;}});f.exports=k;},null);
__d('FbFeedCommentUFIScroller',['DOMScroll','containsNode','ge'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={reveal:function(i){if(i){var j=c('ge')('content');if(j&&c('containsNode')(j,i))c('DOMScroll').ensureVisible(i,null,60,250);}}};f.exports=h;},null);
__d('ShareNowConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={error:h._("This post could not be shared at this time. Please try again later."),success:h._("Your share was posted.")};},null);
__d('ClipboardPhotoUploader',['ArbiterMixin','AsyncRequest','mixin'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('mixin')(c('ArbiterMixin')));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this);this.uploadURIString=k;this.data=l;}j.prototype.handlePaste=function(event){'use strict';var k=j.getImages(event);for(var l=0;l<k.length;++l){var m=new FormData();m.append('pasted_file',k[l]);var n=new (c('AsyncRequest'))();n.setURI(this.uploadURIString).setData(this.data).setRawData(m).setHandler(function(o){this.inform('upload_success',o);}.bind(this)).setErrorHandler(function(o){this.inform('upload_error',o);}.bind(this)).setAbortHandler(function(o){this.inform('upload_error',o);}.bind(this));this.inform('upload_start');n.send();break;}};j.getImages=function(event){'use strict';if(!event.clipboardData)return [];var k=event.clipboardData.items;if(!k)return [];var l,m=[];for(var n=0;n<k.length;++n){l=k[n];if(l.kind==='string')return [];if(l.kind==='file'&&l.type.indexOf('image/')!==-1)m.push(l.getAsFile());if(l.kind==='blob')m.push(l.blob);}return m;};f.exports=j;},null);
__d("MentionsInputUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={generateDataFromTextWithEntities:function(i){var j=i.text,k=[];(i.ranges||[]).forEach(function(m){var n=m.entity;if(!n.external)k.push({uid:n.id,text:j.substr(m.offset,m.length),offset:m.offset,length:m.length,weakreference:!!n.weakreference});});var l={value:j,mentions:k};return l;}};f.exports=h;},null);
__d('UFIBusinessActorIcon.react',['cx','AppUserRoleConstants.brands','React','joinClasses','getObjectValues'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=/[^\u4e00-\u9eff]+/,k=c('React').createClass({displayName:'UFIBusinessActorIcon',propTypes:{firstName:i.string.isRequired,lastName:i.string.isRequired,classNames:i.string,textClassNames:i.string,businessRole:i.oneOf(c('getObjectValues')(c('AppUserRoleConstants.brands')))},render:function(){var l=this._getInitials(this.props.firstName,this.props.lastName),m=this.props.businessRole===c('AppUserRoleConstants.brands').ADMIN;return (c('React').createElement('div',{className:c('joinClasses')(this.props.classNames,"_1rpl")},c('React').createElement('div',{className:c('joinClasses')(this.props.textClassNames,m?"_1rpm":null)},l)));},_getInitials:function(l,m){if(!(typeof l==='string')||!(typeof m==='string'))return '?';var n=l.trim().charAt(0)+m.trim().charAt(0);if(this._isLatinLanguage(n)){n=n.toUpperCase();}else n=m.trim().charAt(0);return n;},_isLatinLanguage:function(l){if(!(typeof l==='string'))return false;var m=l.replace(/[\s.-]+/g,'');return j.test(m);}});f.exports=k;},null);
__d('UFIActorIconContainer.react',['cx','Image.react','React','ShortProfiles','UFIBusinessActorIcon.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createElement(c('XUISpinner.react'),{size:'large'}),k=c('React').createClass({displayName:'UFIActorIconContainer',propTypes:{actorID:i.string.isRequired,className:i.string},getInitialState:function(){return {actor:null};},componentWillMount:function(){this._fetchActorData();},componentDidUpdate:function(l){if(this.props.actorID!==l.actorID)this._fetchActorData();},_fetchActorData:function(){c('ShortProfiles').get(this.props.actorID,function(l){return this.setState({actor:l});}.bind(this));},render:function(){var l=this.state.actor;if(!l)return j;var m=c('joinClasses')("img UFIActorImage _54ru",this.props.className);return (l.isBusinessPersona?c('React').createElement(c('UFIBusinessActorIcon.react'),{classNames:m,firstName:l.firstName,lastName:l.lastName,textClassNames:"UFIBusinessActorIconText"}):c('React').createElement(c('Image.react'),{alt:l.name,className:m,src:l.thumbSrc}));}});f.exports=k;},null);
__d('UFIAddCommentLiveTypingController',['AbstractCommentLiveTypingController','Bootloader'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('AbstractCommentLiveTypingController'));i=h&&h.prototype;function j(k,l,m){i.constructor.call(this,k,l,m);}j.prototype.bootloadPublisherModule=function(k){c('Bootloader').loadModules(["UFIAddCommentLiveTypingPublisher"],k);};j.prototype.attemptPublishStartEvent=function(){i.attemptPublishStartEvent.call(this);};j.prototype.attemptPublishStopEvent=function(){i.attemptPublishStopEvent.call(this);};f.exports=j;},null);
__d("XFeedNUXSaveSeenStateController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/feed\/nux\/seen\/save\/",{link_id:{type:"String"},key:{type:"String",required:true},seen:{type:"Bool",defaultValue:false},env:{type:"Enum",enumType:0}});},null);
__d('dotAccess',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k){var l=j.split('.');do{var m=l.shift();i=i[m]||k&&(i[m]={});}while(l.length&&i);return i;}f.exports=h;},null);
__d('UFIAddComment.react',['cx','fbt','ActorURI','Arbiter','AsyncRequest','Bootloader','BootloadedComponent.react','ClipboardPhotoUploader','getActiveElement','Event','JSResource','Keys','Link.react','LitestandStoryInsertionStatus','MentionsInputUtils','React','ReactDOM','ReactLayeredComponentMixin','Run','SnowflakePermalinkUtils','TrackingNodes','UFIActorIconContainer.react','UFIAddCommentAction','UFIAddCommentLiveTypingController','UFIAttachMediaSection.react','UFIConfig','UFIImageBlock.react','UFIStickerButton.react','URI','XFeedNUXSaveSeenStateController','dotAccess','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=b.URL||b.webkitURL||{},k=c('React').PropTypes,l=i._("Write a comment..."),m=i._("Write a reply..."),n="fcg fss UFICommentTip",o=19,p='/ajax/ufi/upload/',q='/ajax/ufi/sticker_preview/';function r(){return !!c('UFIConfig').canPublishLive;}var s={UPLOAD:'uploading',ENCODE:'encoding'},t=c('React').createClass({displayName:'UFIAddComment',mixins:[c('ReactLayeredComponentMixin')],propTypes:{contextArgs:k.object.isRequired,viewerActorID:k.string.isRequired,editingComment:k.object.isRequired,className:k.string,allowPhotoAttachments:k.bool,allowVideoAttachments:k.bool,allowStickerAttachments:k.bool,isEditing:k.bool,isFirstComponent:k.bool,isLastComponent:k.bool,isQAndA:k.bool,mentionsDataSource:k.object,replyCommentID:k.string,showSendOnEnterTip:k.bool,subtitle:k.any,targetID:k.string,withoutSeparator:k.bool,markViewerHasInteracted:k.func},contextTypes:{dispatch:k.func},getInitialState:function(){var u=this.props.editingComment,v=u.attachment||{type:null},w=v.type==='photo'?v:null;return {attachedPhoto:u.photo_comment||w,attachedVideo:u.video_comment||null,videoStatus:null,videoFileURL:null,videoProgress:0,attachedSticker:v.type=='sticker'?v:null,fileInput:null,fileUploader:null,isCommenting:false,isLoadingPhoto:false,renderStickerNUX:null,rendervideosInCommentsNUX:null,stickerNUXVisible:false,isFocused:this.props.isEditing,videosInCommentsNUXVisible:false};},_onKeyDown:function(event){if(this.props.isEditing&&c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)this.context.dispatch(c('UFIAddCommentAction').cancel());if(this.isMounted()&&!this._isOnBeforeUnloadListenerAdded){c('Run').onBeforeUnload(this._handleUnsavedChanges);this._isOnBeforeUnloadListenerAdded=true;}var u=c('getActiveElement')();if(c('Event').getKeyCode(event.nativeEvent)===c('Keys').ESC)u.blur();},_onContentChange:function(u){if(u){this._attemptPublishStartEvent();}else this._attemptPublishStopEvent();},_handleUnsavedChanges:function(){var u=b.PageTransitions;if(u){var v=c('URI').getNextURI(),w=u.getMostRecentURI();if(v.getQueryData().hasOwnProperty('theater')||w.getQueryData().hasOwnProperty('theater')||v.getQueryData().hasOwnProperty('sdialog')||c('SnowflakePermalinkUtils').isPermalinkURI(v)||c('SnowflakePermalinkUtils').isPermalinkURI(w))return;var x=b.DialogNavigationStack;if(x&&x.isActiveURI(v))return;}if(this.refs&&this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return i._("You haven't finished your comment yet. Do you want to leave without finishing?");},_blur:function(){this.setState({stickerNUXVisible:false,videosInCommentsNUXVisible:false});setTimeout(function(){if(this.isMounted())this.setState({isFocused:false});}.bind(this),100);if(this.refs.mentionsinput&&this.refs.mentionsinput.hasEnteredText())return;this.setState({isCommenting:false});},_onPaste:function(event){var u=new (c('ClipboardPhotoUploader'))(p,this._getPhotoUploadData());this._cancelCurrentSubscriptions();this._subscriptions=[u.subscribe('upload_start',this._prepareForAttachedPhotoPreview),u.subscribe('upload_error',this._onRemoveAttachedMediaPreviewClicked),u.subscribe('upload_success',function(v,w){this._onPhotoUploadComplete(w);}.bind(this))];u.handlePaste(event);},_onEnterSubmit:function(u,event){var v=this.state.attachedPhoto||this.state.attachedVideo||this.state.attachedSticker,w=this.props.isEditing||v;if(this.state.isLoadingPhoto||this._isLoadingVideo()){return false;}else if(!u.encodedValue.trim()&&!w)return false;u.encodedValue=u.encodedValue.trim();if(v){u.attachedPhoto=this.state.attachedPhoto;u.attachedVideo=this.state.attachedVideo;u.attachedSticker=this.state.attachedSticker;this.setState({isLoadingPhoto:false,attachedPhoto:null,attachedVideo:null,attachedSticker:null});}else{u.attachedPhoto=null;u.attachedVideo=null;u.attachedSticker=null;}if(this.props.isEditing){this.context.dispatch(c('UFIAddCommentAction').submitEdit(this.props.editingComment,u,event.target));}else this.context.dispatch(c('UFIAddCommentAction').submitNew(u,event.target,this.props.replyCommentID));this._attemptPublishStopEvent();return true;},_isLoadingVideo:function(){return this.state.videoStatus===s.UPLOAD||this.state.videoStatus===s.ENCODE&&this.state.videoProgress!==100;},_cancelCurrentSubscriptions:function(){if(this._subscriptions)this._subscriptions.forEach(function(u){u.unsubscribe();});},_getFeedbackTarget:function(u){return u.contextArgs.ftentidentifier;},_initTypingEventController:function(){if(!this._typingEventController&&r())this._typingEventController=new (c('UFIAddCommentLiveTypingController'))(this._getFeedbackTarget(this.props),this.props.replyCommentID,this.props.viewerActorID);},_attemptPublishStartEvent:function(){if(!r())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStartEvent();},_attemptPublishStopEvent:function(){if(!r())return;this._initTypingEventController();this._typingEventController&&this._typingEventController.attemptPublishStopEvent();},componentWillMount:function(){this._typingEventController=null;this._isOnBeforeUnloadListenerAdded=false;this._storyInsertionBlocker=c('LitestandStoryInsertionStatus').registerBlocker(function(){return this.state.isCommenting;}.bind(this));},_destroyLiveTypingController:function(){this._typingEventController&&this._typingEventController.destroy();this._typingEventController=null;},componentWillReceiveProps:function(u){var v=this._getFeedbackTarget(this.props),w=this._getFeedbackTarget(u);if(w!==v||this.props.replyCommentID!==u.replyCommentID||this.props.viewerActorID!==u.viewerActorID)this._destroyLiveTypingController();},componentWillUnmount:function(){this._cancelCurrentSubscriptions();if(this._remixedImageToken)c('Arbiter').unsubscribe(this._remixedImageToken);if(this._focusCommentFieldToken)c('Arbiter').unsubscribe(this._focusCommentFieldToken);this._storyInsertionBlocker&&this._storyInsertionBlocker.unsubscribe();this._storyInsertionBlocker=null;this._destroyLiveTypingController();},focus:function(){var u={isCommenting:true,isFocused:true};if(this.props.allowStickerAttachments&&c('UFIConfig').shouldShowStickerNUX){var v=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','sticker_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(v).send();if(this.state.renderStickerNUX===null)c('Bootloader').loadModules(["XUIAmbientNUX.react"],function(w){u.renderStickerNUX=function(){return {ambientStickerNUX:c('React').createElement(w,{contextRef:function(){return this.refs.sticker_button;}.bind(this),shown:this.state.stickerNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hideStickerNUX},i._("Now you can comment with a sticker!"))};}.bind(this);}.bind(this));c('UFIConfig').shouldShowStickerNUX=false;u.stickerNUXVisible=true;}if(c('UFIConfig').shouldShowvideosInCommentsNUX){v=c('XFeedNUXSaveSeenStateController').getURIBuilder().setString('key','video_comments').setBool('seen',true).getURI();new (c('AsyncRequest'))(v).send();if(this.state.rendervideosInCommentsNUX===null)c('Bootloader').loadModules(["XUIAmbientNUX.react"],function(w){u.rendervideosInCommentsNUX=function(){return {ambientVideosNUX:c('React').createElement(w,{contextRef:function(){return this.refs.media_section;}.bind(this),shown:this.state.videosInCommentsNUXVisible,position:'above',width:'auto',alignment:'right',onCloseButtonClick:this._hidevideosInCommentsNUX},i._("You can now add videos to comments"))};}.bind(this);}.bind(this));c('UFIConfig').shouldShowvideosInCommentsNUX=false;u.videosInCommentsNUXVisible=true;}this.setState(u);if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();if(this.props.onFocus)this.props.onFocus();},renderLayers:function(){var u=!this.state.rendervideosInCommentsNUX?{}:this.state.rendervideosInCommentsNUX(),v=!this.state.renderStickerNUX?{}:this.state.renderStickerNUX();return Object.assign(u,v);},_setFileInput:function(u,v){this.setState({fileInput:u,fileUploader:v});},render:function(){var u=!this.props.contextArgs.collapseaddcomment||this.state.isCommenting,v=null;if(this.props.subtitle){v=c('React').createElement('span',{className:n},this.props.subtitle);}else if(!this.state.isFocused&&this.props.isEditing){v=c('React').createElement('span',{className:n},i._("{cancel}",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("Cancel")))]));}else if(this.props.isEditing){v=c('React').createElement('span',{className:n},i._("Press Esc to {cancel}.",[i.param('cancel',c('React').createElement(c('Link.react'),{onClick:function(){return (this.context.dispatch(c('UFIAddCommentAction').cancel()));}.bind(this)},i._("cancel")))]));}else if(this.props.showSendOnEnterTip)v=c('React').createElement('span',{className:n},i._("Press Enter to post."));var w=null,x=null,y=this.state.attachedPhoto||this.state.attachedSticker||this.state.attachedVideo,z=null;if(this.props.allowStickerAttachments&&!y)x=c('React').createElement(c('UFIStickerButton.react'),{ref:'sticker_button',onStickerSelected:this.onStickerSelected,onEmoticonSelected:this._insertEmoticonIntoCommentText,onStickerFlyoutShow:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});if(this.props.allowPhotoAttachments||this.props.allowVideoAttachments){z=this._onPaste;w=c('React').createElement(c('UFIAttachMediaSection.react'),{ref:'media_section',getPhotoUploadData:this._getPhotoUploadData,prepareForAttachedPhotoPreview:this._prepareForAttachedPhotoPreview,prepareForAttachedVideoPreview:this._prepareForAttachedVideoPreview,allowVideoAttachments:this.props.allowVideoAttachments,onPhotoUploadComplete:this._onPhotoUploadComplete,onVideoUploadComplete:this._onVideoUploadComplete,onVideoEncodeUpdate:this._onVideoEncodeUpdate,onVideoUploadUpdate:this._onVideoUploadUpdate,setFileInput:this._setFileInput,attachment:y,targetId:this.props.targetID,onClick:function(){if(this.props.markViewerHasInteracted)this.props.markViewerHasInteracted();}.bind(this)});}var aa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.ADD_COMMENT_BOX),ba='addComment_'+this.props.contextArgs.ftentidentifier,ca;if(!!this.props.replyCommentID){ca=m;}else if(this.props.isQAndA){ca=i._("Ask a question...");}else ca=l;var da=this.props.contextArgs.viewoptionstypeobjects,ea=this.props.contextArgs.viewoptionstypeobjectsorder;if(this.props.attachedPhoto&&!this.props.subtitle)v=null;var fa;if(this.state.attachedPhoto||this.state.isLoadingPhoto||this.state.attachedVideo||this.state.videoStatus===s.UPLOAD||this.state.attachedSticker)fa=c('React').createElement(c('BootloadedComponent.react'),{bootloadLoader:c('JSResource')('UFIAttachedMediaPreview.react'),bootloadPlaceholder:c('React').createElement('span',null),attachedPhoto:this.state.attachedPhoto,attachedVideo:this.state.attachedVideo,attachedSticker:this.state.attachedSticker,monitorHeight:this.props.contextArgs.monitorHeight,onRemoveAttachedMediaPreviewClicked:this._onRemoveAttachedMediaPreviewClicked,onRemoveAttachedStickerPreview:this._onRemoveAttachedStickerPreviewClicked,subtitle:this.props.subtitle,isLoadingPhoto:this.state.isLoadingPhoto,videoFileURL:this.state.videoFileURL,videoStatus:this.state.videoStatus,videoProgress:this.state.videoProgress});var ga=this.props.contextArgs.mentionsinput,ha=ga.inputComponent,ia=ga.viewComponent,ja=ga.viewProps,ka=this.props.editingComment.body,la=ka?c('MentionsInputUtils').generateDataFromTextWithEntities(ka):null;return (c('React').createElement('div',{id:ba,className:c('joinClasses')("UFIRow"+(' '+"_4oep")+(' '+"UFIAddComment")+(this.props.allowPhotoAttachments?' '+"UFIAddCommentWithPhotoAttacher":'')+(this.props.withoutSeparator?' '+"UFIAddCommentWithoutSeparator":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),this.props.className),onKeyDown:this._onKeyDown,'data-ft':aa},c('React').createElement(c('UFIImageBlock.react'),{className:"UFIMentionsInputWrap"+(this.props.allowStickerAttachments?' '+"UFIStickersEnabledInput":'')},c('React').createElement('div',{className:'UFIReplyActorPhotoWrapper',onClick:this.focus},c('React').createElement(c('UFIActorIconContainer.react'),{actorID:this.props.viewerActorID,className:!u?"hidden_elem":''})),c('React').createElement('div',{className:'UFICommentContainer'},c('React').createElement('div',{className:'UFIInputContainer'},c('React').createElement(ha,{replyCommentID:this.props.replyCommentID,initialData:la,placeholder:ca,datasource:this.props.mentionsDataSource,ref:'mentionsinput',viewComponent:ia,viewProps:ja,viewOptionsTypeObjects:da,viewOptionsTypeObjectsOrder:ea,hashtags:this.props.contextArgs.sht,showHashtagTypeahead:c('UFIConfig').showHashtagTypeahead,autoflip:this.props.contextArgs.addcommentautoflip,monitorHeight:this.props.contextArgs.monitorHeight,onEnterSubmit:this._onEnterSubmit,onFocus:this.focus,onBlur:this._blur,onContentChange:r()?this._onContentChange:null,onPaste:z,showBusinessTypeahead:this.props.contextArgs.showBusinessTypeahead,ftEntIdentifier:this.props.contextArgs.ftentidentifier}),c('React').createElement('div',{className:"UFICommentAttachmentButtons clearfix"},w,x)),fa,v))));},componentDidUpdate:function(u,v,w){if(!v.attachedPhoto&&this.state.attachedPhoto||!v.attachedSticker&&this.state.attachedSticker||!v.attachedVideo&&this.state.attachedVideo||!v.isCommenting&&this.state.isCommenting)this.refs.mentionsinput.focus();if(u.viewerActorID!==this.props.viewerActorID){if(this.state.fileInput)this.state.fileInput.clear();if(this.state.fileUploader)this.state.fileUploader.setData(this._getPhotoUploadData());this._onRemoveAttachedMediaPreviewClicked();}},componentDidMount:function(){if(!this.props.allowPhotoAttachments&&!this.props.allowVideoAttachments)return;if(this.props.replyCommentID===null){this._focusCommentFieldToken=c('Arbiter').subscribe('focusCommentField'+this.props.contextArgs.ftentidentifier,function(u){this.refs.mentionsinput.focus();}.bind(this));if(this.props.contextArgs.issnowlift)this._remixedImageToken=c('Arbiter').subscribe('newRemixedImage'+this.props.contextArgs.ftentidentifier,function(u,v){var event={clipboardData:{items:[v]}};this._onPaste(event);}.bind(this));}},insertMention:function(u){if(this.refs.mentionsinput&&this.refs.mentionsinput.insertMention)this.refs.mentionsinput.insertMention(u);},_getPhotoUploadData:function(){var u=this.props.viewerActorID,v={profile_id:u,target_id:this.props.targetID,source:o};v[c('ActorURI').PARAMETER_ACTOR]=u;return v;},_onPhotoUploadComplete:function(u){if(!this.state.isLoadingPhoto)return;var v=u.getPayload();if(v&&v.fbid){this.setState({attachedPhoto:v,isLoadingPhoto:false});}else this._onRemoveAttachedMediaPreviewClicked(null);},_onVideoEncodeUpdate:function(u,v){if(!this.state.attachedVideo||this.state.videoStatus!==s.ENCODE)return;if(v.obj.progress<this.state.videoProgress)return;v.obj.fbid=v.obj.videoID;this.setState({attachedVideo:v.obj,videoProgress:v.obj.progress,videoStatus:s.ENCODE});if(this._isEncodingFinished(v.obj.stage))this._onEncodeComplete();},_onVideoUploadUpdate:function(u){this.setState({videoProgress:u});},_isEncodingFinished:function(u){return u==='finish';},_onEncodeComplete:function(){this.state.fileInput.clear();},_onVideoUploadComplete:function(u){if(this.state.videoStatus!==s.UPLOAD)return;if(u&&u.video_id)this.setState({videoProgress:0,attachedVideo:u,videoStatus:s.ENCODE});},_onRemoveAttachedMediaPreviewClicked:function(event){this.setState({attachedPhoto:null,attachedVideo:null,videoStatus:null,isLoadingPhoto:false});},_prepareForAttachedPhotoPreview:function(){this.setState({attachedPhoto:null,isLoadingPhoto:true});},_prepareForAttachedVideoPreview:function(){var u,v=this.state.fileInput.input.files[0];if(v&&j.createObjectURL)u=j.createObjectURL(v);this.setState({attachedVideo:null,videoStatus:s.UPLOAD,videoFileURL:u,videoProgress:0});},_onStickerUploadComplete:function(u){if(!this.state.isLoadingPhoto)return;var v=u.getPayload();if(v&&v.fbid){this.setState({attachedSticker:v,isLoadingPhoto:false});}else{c('Bootloader').loadModules(["Dialog"],function(w){var x=i._("Sticker Failed"),y=i._("There was a problem attaching the sticker.");new w().setTitle(x).setBody(y).setButtons(w.OK).show();});this._onRemoveAttachedStickerPreviewClicked(null);}},_onRemoveAttachedStickerPreviewClicked:function(event){this.setState({attachedSticker:null,isLoadingPhoto:false});},onStickerSelected:function(u,event){if(this.props.isEditing||this.refs.mentionsinput.hasEnteredText()){this._prepareForAttachedStickerPreview(u);return;}this.sendSticker(u,event);},_prepareForAttachedStickerPreview:function(u){this.setState({attachedSticker:null,isLoadingPhoto:true});new (c('AsyncRequest'))(q).setData({sticker_id:u}).setErrorHandler(this._onRemoveAttachedStickerPreviewClicked).setHandler(this._onStickerUploadComplete).send();},sendSticker:function(u,event){var v={encodedValue:'',visibleValue:'',attachedPhoto:null,attachedSticker:{fbid:u}};this.context.dispatch(c('UFIAddCommentAction').submitNew(v,event.target,this.props.replyCommentID));},_insertEmoticonIntoCommentText:function(u){c('Bootloader').loadModules(["EmoticonsList","EmoticonUtils","TextAreaControl","SelectionPosition"],function(v,w,x,y){var z=v.symbols[u];if(!z)return;if(this.props.contextArgs.mentionsinput){this.refs.mentionsinput.insertEmoticon(z);return;}if(!this._selectionPosition)this._selectionPosition=new y(c('ReactDOM').findDOMNode(this.refs.mentionsinput.refs.textarea));var aa=this.refs.mentionsinput.refs.getTextFieldDOM(),ba=x.getInstance(aa),ca=ba.getValue(),da=w.insertEmoticon(z,ca,this._selectionPosition.getPos());ba.setValue(da.result);this._selectionPosition.setPos(da.start,da.end);}.bind(this));},_hideStickerNUX:function(){this.setState({stickerNUXVisible:false});},_hidevideosInCommentsNUX:function(){this.setState({videosInCommentsNUXVisible:false});}});f.exports=t;},null);
__d('UFIAddCommentLink.react',['cx','fbt','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('React').createClass({displayName:'UFIAddCommentLink',propTypes:{'data-ft':j.string,isFirstCommentComponent:j.bool,isFirstComponent:j.bool,isLastCommentComponent:j.bool,isLastComponent:j.bool,isQAndA:j.bool,onClick:j.func},render:function(){var l=c('joinClasses')("UFIRow"+(' '+"UFIAddCommentLink")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),m;if(this.props.isQAndA){m=i._("Ask a question...");}else m=i._("Write a comment...");return (c('React').createElement('div',{className:l,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},m)));}});f.exports=k;},null);
__d('ContentTranslationStrings',['fbt','TranslationRating'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={SEE_TRANSLATION:h._("See Translation"),SEE_TRANSLATION_TIP:h._("Translate this comment"),NO_TRANSLATION_AVAILABLE:h._("No translation available"),AUTOMATICALLY_TRANSLATED:h._("Automatically Translated"),HIDE_ORIGINAL:h._("Hide Original"),SEE_ORIGINAL:h._("See Original"),REPORT_LANGUAGE_DIALOG_TY:h._("Thank you for letting us know about this error. Your feedback improves translation for everyone on Facebook."),UNDO:h._("Undo"),CANCEL:h._("Cancel"),SUBMIT:h._("Submit"),DONE:h._("Done"),CLOSE:h._("Close"),ENTER_TRANSLATION:h._("Enter your translation"),EDIT_TRANSLATION_THANKS:h._("Thank you! We are constantly working to improve our translation quality. Your feedback helps us to train better models."),EDIT_TRANSLATION_DIALOG_TITLE_NORMAL:h._("Edit Translation"),EDIT_TRANSLATION_DIALOG_TITLE_ERROR:h._("Submission Unsuccessful"),EDIT_TRANSLATION_ERROR:h._("There was a problem with the submission. Please try again later. Thanks for the good work!"),EDIT_TRANSLATION_MENU:h._("I have a better translation"),RATE_TRANSLATION:h._("Rate this translation"),CHANGE_RATING:h._("Change Your Rating"),LANGUAGE_SETTINGS:h._("Language settings"),CLICK_TO_RATE:h._("Click a star to rate"),getTranslatedFromTo:function(j,k){return h._("Translated from {source language} to {target language}",[h.param('source language',j),h.param('target language',k)]);},getTranslatedFrom:function(j){return h._("Translated from {source language}",[h.param('source language',j)]);},getReportLanguageDialogHeader:function(j){return h._("This wasn't in {language}",[h.param('language',j)]);},getReportLanguage:function(j){return h._("Post was not in {language}",[h.param('language',j)]);},getNeverTranslate:function(j){return h._("Never Translate {language}",[h.param('language',j)]);},getNeverTranslateDialog:function(j){return h._("Posts in {language} won't be translated for you.",[h.param('language',j)]);},getDisableAutoTranslate:function(j){return h._("Disable automatic translation for {dialect}",[h.param('dialect',j)]);},getDisableAutoTranslateDialog:function(j){return h._("Posts in {dialect} won't be automatically translated for you.",[h.param('dialect',j)]);},getUserFeedbackDescriptionForScore:function(j){switch(j){case c('TranslationRating').VERY_BAD:return h._("I can't understand anything.");case c('TranslationRating').BAD:return h._("I can't understand most of this.");case c('TranslationRating').OK:return h._("I can understand enough of this.");case c('TranslationRating').GOOD:return h._("I can understand most of this.");case c('TranslationRating').VERY_GOOD:return h._("I can understand everything.");default:return null;}}};f.exports=i;},null);
__d('UFICommentLikeCount.react',['cx','ActorURI','NumberFormat','ProfileBrowserLink','ProfileBrowserTypes','React','UFIConfig','URI'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=function(l,m,n){var o=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:l.fbid,comment_from:l.author,comment_likecount:l.likecount||0,comment_id:l.id,cache_buster:l.likeconfirmhash||0});if(m)o.addQueryData({viewas:m});return c('ActorURI').create(o,n);},k=c('React').createClass({displayName:'UFICommentLikeCount',propTypes:{actorForPost:i.string,comment:i.object.isRequired,contextArgs:i.object.isRequired},render:function(){var l=this.props.comment,m=c('NumberFormat').formatIntegerWithDelimiter(l.likecount||0,c('UFIConfig').numberDelimiter),n=c('ProfileBrowserTypes').LIKES,o={id:l.fbid},p=j(this.props.comment,this.props.contextArgs.viewas,this.props.actorForPost),q=c('React').createElement('i',{className:"UFICommentLikeIcon"}),r=c('React').createElement('span',null,m),s="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),t=c('ProfileBrowserLink').constructDialogURI(n,o).toString(),u=c('ProfileBrowserLink').constructPageURI(n,o).toString(),v='dialog',w=this.props.contextArgs.loggedOutLinkConfig;if(w&&w.showLikeLink){t=w.likeAjaxifyURI;u='#';}return (c('React').createElement('a',{ajaxify:t,className:s,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':p.toString(),href:u,rel:v,role:'button'},q,r));}});f.exports=k;},null);
__d('UFICommentLikeLink.react',['fbt','React','ReactionNuxTypeEnum','TrackingNodes','UFICommentAction','UFIConfig','UFIReactionsLinkImpl.react'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j='ufi_comment_like_link',k='ufi_reply_like_link',l=c('React').createClass({displayName:'UFICommentLikeLink',propTypes:{comment:i.object.isRequired,contextArgs:i.object.isRequired,feedback:i.object.isRequired},contextTypes:{dispatch:i.func},render:function(){var m=this.props.comment,n=this.props.feedback,o=this.props.contextArgs;if(m.canviewerreact){return this._renderReactionsLink(m,n);}else if(m.viewercanlike)return this._renderLikeLink(m,n,o);return null;},_renderReactionsLink:function(m,n){var o=null;if(c('UFIConfig').reactionsHasCommentsNux)o={nuxKey:'reactions_comments',titleOverride:h._("New! React to a Comment"),textOverride:h._("Hover over the Like link to see all reactions."),nuxType:c('ReactionNuxTypeEnum').LIKE_CLICK};return (c('React').createElement(c('UFIReactionsLinkImpl.react'),{id:m.id,comment:m,nuxConfig:o,reaction:m.viewerreaction,supportedReactions:n.supportedreactions}));},_renderLikeLink:function(m,n,o){var p=o.loggedOutLinkConfig,q=c('TrackingNodes').getTrackingInfo(m.hasviewerliked?c('TrackingNodes').types.UNLIKE_LINK:c('TrackingNodes').types.LIKE_LINK),r=m.hasviewerliked?h._("Unlike this comment"):h._("Like this comment"),s=m.parentcommentid?k:j,t=!m.hasviewerliked||p?h._("Like"):h._("Unlike"),u=null,v=null;if(p&&p.showLikeLink){u='dialog';v=p.likeAjaxifyURI;}return (c('React').createElement('a',{className:'UFILikeLink','data-ft':q,'data-testid':s,href:'#',rel:u,ajaxify:v,onClick:function(event){return this.context.dispatch(c('UFICommentAction').toggleLike(m,event.target));}.bind(this),role:'button',title:r},t));}});f.exports=l;},null);
__d('UFICommentReactionCount.react',['cx','React','UFIReactionsBlingTokens.react','UFIReactionsProfileBrowserUtils','ActorURI','XUFIReactionTooltipController'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes;i=babelHelpers.inherits(l,c('React').Component);j=i&&i.prototype;l.prototype.render=function(){var m=this.props.comment,n={entidentifier:m.id,reactioncount:m.reactioncount,reactioncountmap:m.reactioncountmap,actorforpost:this.props.actorForPost},o="UFICommentLikeButton"+(this.props.comment.hasviewerliked?' '+"UFICommentLikedButton":''),p=c('UFIReactionsProfileBrowserUtils').getDialogURI(n),q=c('UFIReactionsProfileBrowserUtils').getPageURI(n),r=c('ActorURI').create(c('XUFIReactionTooltipController').getURIBuilder().setString('ft_ent_identifier',m.id).getURI(),this.props.actorForPost),s=this.props.contextArgs.loggedOutLinkConfig;if(s&&s.showLikeLink){p=s.likeAjaxifyURI;q='#';}return (c('React').createElement(c('UFIReactionsBlingTokens.react'),{className:"UFICommentReactionsBling _4ar- _ipn",feedback:n,contextArgs:this.props.contextArgs,comment:this.props.comment,max:3,size:'13'},c('React').createElement('a',{ajaxify:p,className:o,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':r.toString(),href:q,rel:'dialog',role:'button'},m.reactioncountreduced)));};function l(){i.apply(this,arguments);}l.propTypes={actorForPost:k.string,comment:k.object.isRequired,contextArgs:k.object.isRequired};f.exports=l;},null);
__d('UFISpamCount',['UFISpamCountImpl'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();f.exports=c('UFISpamCountImpl').module||{enabled:false};},null);
__d('UFICommentActions.react',['cx','fbt','Middot.react','React','ReactFragment','UFIAddCommentAction','UFICentralUpdates','UFICommentAction','UFICommentLikeCount.react','UFICommentLikeLink.react','UFICommentMetadata.react','UFICommentReactionCount.react','UFIConstants','UFIPrivateReplyIndicator.react','UFIPrivateReplyLink.react','UFISpamCount','UFIStoryAction'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=c('UFIConstants').UFIStatus,l="fsm fwn fcg UFICommentActions",m="UFIDeletedMessageIcon",n="UFIDeletedMessage",o=c('React').createClass({displayName:'UFICommentActions',propTypes:{comment:j.object.isRequired,contextArgs:j.object.isRequired,feedback:j.object.isRequired,hideAsSpamForPageAdmin:j.bool,markedAsSpamHere:j.bool,permalink:j.string,shareLink:j.string,showPermalink:j.bool,isStreaming:j.bool,showReplyLink:j.bool,viewerCanMarkNotSpam:j.bool},contextTypes:{dispatch:j.func},render:function(){var p=this.props,q=p.comment,r=p.permalink,s=p.feedback,t=p.parentCanComment,u=p.markedAsSpamHere,v=q.status===k.SPAM_DISPLAY,w=p.showReplyLink,x=p.hideAsSpamForPageAdmin,y,z,aa,ba,ca,da,ea,fa,ga,ha=!q.islocal&&q.status!==k.LIVE_DELETED;if(ha){if(v&&!u){if(p.viewerCanMarkNotSpam)y=c('React').createElement('a',{onClick:function(event){return this.context.dispatch(c('UFICommentAction').markAsNotSpam(q,event));}.bind(this),className:"UFICommentNotSpamLink",href:'#',role:'button'},i._("Unhide"));if(x&&s.isthreaded&&q.cancomment&&w)ea=this.renderCommentReply(q);}else{z=c('React').createElement(c('UFICommentLikeLink.react'),{comment:q,contextArgs:this.props.contextArgs,feedback:s});if(s.isthreaded&&q.cancomment&&w||!!q.parentcommentid&&s.cancomment&&t)ea=this.renderCommentReply(q);if(q.canviewerreact){ca=q.reactioncount>0?c('React').createElement(c('UFICommentReactionCount.react'),{comment:q,actorForPost:s.actorforpost,contextArgs:p.contextArgs}):null;}else ca=q.likecount>0?c('React').createElement(c('UFICommentLikeCount.react'),{comment:q,actorForPost:s.actorforpost,contextArgs:p.contextArgs}):null;if(q.spamcount&&c('UFISpamCount').enabled)da=c('React').createElement(c('UFISpamCount'),{count:q.spamcount});fa=this.renderMessageReply(q,s);}if(q.attachment&&q.attachment.type==='share'&&!q.attachment.disableRemove&&q.canremove)ga=c('React').createElement('a',{href:'#',onClick:function(event){return this.context.dispatch(c('UFICommentAction').removePreview(q,event.target));}.bind(this),role:'button'},i._("Remove Preview"));if(this.props.contextArgs.shareablecomments)aa=c('React').createElement('a',{className:'share_action_link',href:p.comment.commentshareuri,role:'button',rel:'dialog',title:i._("Share this comment")},i._("Share"));if(s.canviewerpin&&!q.parentcommentid){var ia=q.id===s.pinnedcommenttoken,ja=ia?i._("Unpin this comment"):i._("Pin this comment"),ka=ia?i._("Unpin Comment"):i._("Pin Comment");ba=c('React').createElement('a',{className:'share_action_link',href:'#',role:'button',title:ja,onClick:function(event){return this.context.dispatch(c('UFICommentAction').togglePin(q,event.target));}.bind(this)},ka);}}var la=c('React').createElement(c('UFICommentMetadata.react'),{comment:q,onRetrySubmit:function(){return this.context.dispatch(c('UFIAddCommentAction').retrySubmit(q));}.bind(this),permalink:r,shortenTimestamp:p.contextArgs.shortenTimestamp,showPermalink:p.showPermalink}),ma={};if(s.customcommentactionlinks)for(var na in s.customcommentactionlinks){var oa=s.customcommentactionlinks[na];if(oa.showInMenu)continue;var pa=function(event){return c('UFICentralUpdates').inform(oa.type,{comment:q,feedback:s});};ma[oa.type]=c('React').createElement('a',{href:'#',onClick:pa,role:'button'},oa.title);}var qa;if(p.contextArgs.isstreaming){qa={likeToggle:z,spamToggle:y,likeCount:ca,spamCount:da};qa=Object.assign(qa,ma);}else if(s.isqanda){qa={likeCount:ca,spamCount:da,likeToggle:z,pinToggle:ba,commentReply:ea,shareComment:aa,messageReply:fa,spamToggle:y};qa=Object.assign(qa,ma);qa=Object.assign(qa,{metadata:la,removePreview:ga});}else if(p.contextArgs.entstream){qa={metadata:la,likeToggle:z,likeCount:ca,pinToggle:ba,commentReply:ea,messageReply:fa,shareComment:aa,spamCount:da,spamToggle:y,removePreview:ga};qa=Object.assign(qa,ma);}else if(s.isthreaded){qa={likeToggle:z,pinToggle:ba,commentReply:ea,messageReply:fa,spamToggle:y,removePreview:ga,shareComment:aa,likeCount:ca,spamCount:da};qa=Object.assign(qa,ma);qa=Object.assign(qa,{metadata:la});}else{qa={metadata:la,likeToggle:z,pinToggle:ba,shareComment:aa,likeCount:ca,spamCount:da,commentReply:ea,messageReply:fa,spamToggle:y,removePreview:ga};qa=Object.assign(qa,ma);}if(q.status===k.LIVE_DELETED){var ra=i._("Comment deleted"),sa=c('React').createElement('span',{className:n},c('React').createElement('i',{'aria-label':ra,className:m,'data-hover':'tooltip','data-tooltip-content':ra,role:'img'}));qa.deletionWarning=sa;}var ta=true,ua={};for(var va in qa){var pa=qa[va];if(pa){var wa=c('React').createElement(c('Middot.react'),{key:'middot-'+va});ua[va]=ta?pa:c('ReactFragment').create({middot:wa,action:pa});ta=false;}}return (c('React').createElement('div',{className:l},c('ReactFragment').create(ua)));},renderCommentReply:function(p){return (c('React').createElement('a',{className:"UFIReplyLink",href:'#',onClick:function(){var q=this.props.feedback;if(q.isthreaded&&p.cancomment){this.context.dispatch(c('UFIStoryAction').showReplies(p.id,p));}else if(p.parentcommentid)this.context.dispatch(c('UFIStoryAction').showReplies(p.parentcommentid,p));}.bind(this),role:'button'},i._("Reply")));},renderMessageReply:function(p,q){if(p.messagereply){if(c('UFIPrivateReplyLink.react').willRender(p.messagereply,q.actorforpost)){return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q.actorforpost,activityID:p.id,context:p.messagereply,seeResponseLabel:true}));}else if(c('UFIPrivateReplyIndicator.react').willRender(p.messagereply.status))return (c('React').createElement(c('UFIPrivateReplyIndicator.react'),{replyStatus:p.messagereply.status}));}else if(p.chattobuy)return (c('React').createElement('a',{href:p.chattobuy,role:'button',rel:'async-dialog'},i._("Message")));return null;}});f.exports=o;},null);
__d('UFICommentAuthorName.react',['Badge.react','React','TrackingNodes','ConstituentTitle.react','UFIActor.react','UFISocialContext.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentAuthorName',propTypes:{author:h.object.isRequired,authorProfiles:h.object.isRequired,showHovercard:h.bool,isAdminViewer:h.bool,isAuthorWeakReference:h.bool,focusOnMount:h.bool,groupOrEventID:h.number,isFeatured:h.bool,socialContext:h.object,useFirstName:h.bool,isPublic:h.bool,constituentTitle:h.string},render:function(){var j=this.props,k=j.author,l=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_NAME);return (c('React').createElement(c('UFIActor.react'),{author:k,showHovercard:j.showHovercard,isAdminViewer:j.isAdminViewer,key:'author',focusOnMount:j.focusOnMount,'data-ft':l,isAuthorWeakReference:j.isAuthorWeakReference,groupOrEventID:j.groupOrEventID,useFirstName:j.useFirstName,isPublic:this.props.isPublic},j.isFeatured?c('React').createElement(c('Badge.react'),{key:'badge',size:'xsmall',type:'verified'}):null,j.constituentTitle?c('React').createElement(c('ConstituentTitle.react'),{representativeName:j.constituentTitle}):null,j.socialContext?c('React').createElement(c('UFISocialContext.react'),{topMutualFriend:j.authorProfiles[j.socialContext.topmutualid],otherMutualCount:j.socialContext.othermutualcount,commentAuthor:k}):null));}});f.exports=i;},null);
__d('IntlLang',['UnicodeBidi'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={HE:'\u0590\u05BE\u05C0\u05C3\u05C6\u05C8-\u05CF\u05D0-\u05EA\u05EB-\u05EF'+'\u05F0-\u05F2\u05F3-\u05F4\u05F5-\u05FF\u07C0-\u07C9\u07CA-\u07EA'+'\u07F4-\u07F5\u07FA\u07FB-\u07FF\u0800-\u0815\u081A\u0824\u0828'+'\u082E-\u082F\u0830-\u083E\u083F\u0840-\u0858\u085C-\u085D\u085E'+'\u085F-\u089F\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB37\uFB38-\uFB3C'+'\uFB3D\uFB3E\uFB3F\uFB40-\uFB41\uFB42\uFB43-\uFB44\uFB45\uFB46-\uFB4F'},i=new RegExp('['+h.HE+']');function j(l){var m=c('UnicodeBidi').firstStrongChar(l);if(m===null)return null;if(i.exec(m))return 'he';return null;}var k={getLang:j};f.exports=k;},null);
__d('UFICommentBody.react',['cx','Locale','React','TrackingNodes','TruncatedTextWithEntities.react','UnicodeBidi','IntlLang','UFICommentUtils','UFIConfig','UFIConstants'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFICommentBody',propTypes:{commentText:i.string.isRequired,commentRanges:i.array,groupOrEventID:i.number,maxLength:i.number,maxLines:i.number,socialContext:i.object,markViewerHasInteracted:i.func},render:function(){var k=this.props,l=k.commentText,m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),n=c('UnicodeBidi').isDirectionLTR(l),o=!n,p=n&&c('Locale').isRTL()?'ltr':o&&!c('Locale').isRTL()?'rtl':null,q=c('IntlLang').getLang(l),r=c('UFICommentUtils').getCommentBodyInterpolator(k.groupOrEventID),s=c('React').createElement(c('TruncatedTextWithEntities.react'),{key:'comment-body',className:"UFICommentBody",interpolator:r,ranges:k.commentRanges,text:l,truncationPercent:c('UFIConstants').commentTruncationPercent,maxLength:k.maxLength,maxLines:k.maxLines,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji,'data-ft':m,dir:p,lang:q,markViewerHasInteracted:this.props.markViewerHasInteracted});if(k.socialContext){s=c('React').createElement('div',{key:'body'},s);}else{var t=(n&&c('Locale').isRTL()?"_5wjy":'')+(n&&c('Locale').isRTL()?' '+"_5wjz":'')+(o&&!c('Locale').isRTL()?' '+"_5wj-":'')+(o&&!c('Locale').isRTL()?' '+"_5wj_":'');s=t?c('React').createElement('div',{key:'body',className:t},s):[' ',s];}return c('React').createElement('span',null,s);}});f.exports=j;},null);
__d('XUIEditButton.react',['cx','fbt','XUIAbstractGlyphButton.react','React','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'XUIEditButton',render:function(){var k=this.props.label,l=this.props.title;if(!this.props.title&&!this.props.tooltip){if(!k)k=i._("Edit");l=k;}return (c('React').createElement(c('XUIAbstractGlyphButton.react'),babelHelpers['extends']({},this.props,{label:k,title:l,'data-hover':this.props.tooltip&&'tooltip','data-tooltip-alignh':this.props.tooltip&&'center','data-tooltip-content':this.props.tooltip,className:c('joinClasses')(this.props.className,"_5upq _5upr")})));}});f.exports=j;},null);
__d('UFICommentMenu.react',['ix','Bootloader','Image.react','React','XUICloseButton.react','XUIEditButton.react','keyMirror','fbglyph'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j,k,l,m,n=c('keyMirror')({EDIT:true,CLOSE:true,CHEVRON:true}),o=c('React').createClass({displayName:'UFICommentMenu',propTypes:{menuData:i.array,menuType:i.oneOf(Object.keys(n)).isRequired,onAction:i.func,onClick:i.func},getInitialState:function(){return {bootloading:false,bootloaded:false,needsExpand:false};},onClickGuard:function(event){if(this.state.bootloading){return;}else if(!this.state.bootloaded&&this.props.menuData){this.setState({bootloading:true});c('Bootloader').loadModules(["ContextualDialogArrow","PopoverMenu.react","ReactXUIMenu"],function(q,r,s){j=q,k=r;l=s;m=l.Item;this.setState({bootloading:false,bootloaded:true,needsExpand:true});}.bind(this));}else if(this.props.onClick)this.props.onClick(event);},shouldComponentUpdate:function(q,r,s){if(this.state.needsExpand&&!r.needsExpand)return false;return true;},render:function(){var q=null;if(this.props.menuType===n.EDIT){q=c('XUIEditButton.react');}else if(this.props.menuType===n.CLOSE){q=c('XUICloseButton.react');}else q=p;if(this.props.menuData&&this.state.bootloaded){var r=this.props.menuData.map(function(t){return (c('React').createElement(m,{'data-testid':t.testid,key:t.value,value:t.value},t.label));}),s=c('React').createElement(l,{onItemClick:this.props.onAction},r);return (c('React').createElement(k,babelHelpers['extends']({},this.props,{alignh:'right',layerBehaviors:[j],menu:s,ref:'menu'}),c('React').createElement(q,{href:'#',onClick:this.onClickGuard})));}return c('React').createElement(q,babelHelpers['extends']({},this.props,{href:'#',onClick:this.onClickGuard}));},componentDidUpdate:function(){if(this.state.needsExpand){this.refs.menu.showPopover();this.setState({needsExpand:false});}}}),p=c('React').createClass({displayName:'ChevronDropDown',render:function(){return (c('React').createElement('a',this.props,c('React').createElement(c('Image.react'),{'data-hover':'tooltip','data-tooltip-content':this.props.tooltip,'aria-label':this.props.tooltip,src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/chevron-down_16_fig-light-20.png")})));}});o.MenuType=n;f.exports=o;},null);
__d('OnVisible.react',['React','ReactDOM','getElementRect','onRectIsWithinViewport','onlyChild'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'OnVisible',propTypes:{onVisible:h.func,onHidden:h.func,buffer:h.number},componentDidMount:function(){this._createListener();},componentDidUpdate:function(){this._createListener();},componentWillUnmount:function(){this._removeListener();},reset:function(){this._removeListener();this._createListener();},check:function(){if(this._listener)this._listener.scheduleCheck();},_measureElementRect:function(){if(!this.isMounted())return null;var j=this.props.buffer||0,k=c('getElementRect')(c('ReactDOM').findDOMNode(this));k.left-=j;k.right+=j;k.top-=j;k.bottom+=j;return k;},_createListener:function(){var j=c('ReactDOM').findDOMNode(this);if(this._listener&&j!==this._element)this._removeListener();if(!this._listener){this._element=j;this._listener=c('onRectIsWithinViewport')(this._measureElementRect,function(k){var l=k?this.props.onVisible:this.props.onHidden;l&&l();}.bind(this));}},_removeListener:function(){if(this._listener){this._listener.remove();this._listener=null;}},render:function(){return c('onlyChild')(this.props.children);}});f.exports=i;},null);
__d('UFICommentVPVTracker.react',['OnVisible.react','React','UFICommentVPVs','UFIConfig','clearTimeout','setTimeout'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentVPVTracker',propTypes:{comment:h.object.isRequired,contextArgs:h.object.isRequired},render:function(){var j=this.props.comment.id,k=this.props.contextArgs.instanceid,l=this.props.children;if(!c('UFICommentVPVs').hasLoggedVPV(k,j))l=c('React').createElement(c('OnVisible.react'),{onVisible:this.maybeScheduleVPVLogging,onHidden:this.cancelScheduledVPVLogging},l);return l;},maybeScheduleVPVLogging:function(){if(this.state.timer!==null)return;var j=this.props.comment.id,k=this.props.contextArgs.instanceid;if(c('UFICommentVPVs').hasLoggedVPV(k,j))return;this.setState({timer:c('setTimeout')(function(){c('UFICommentVPVs').logVPV(k,j);this.setState({timer:null});}.bind(this),c('UFIConfig').vpvLoggingTimeout)});},cancelScheduledVPVLogging:function(){if(this.state.timer===null)return;c('clearTimeout')(this.state.timer);this.setState({timer:null});},getInitialState:function(){return {timer:null};},shouldComponentUpdate:function(j,k){return k.timer===this.state.timer;},componentWillReceiveProps:function(){this.cancelScheduledVPVLogging();},componentWillUnmount:function(){this.cancelScheduledVPVLogging();}});f.exports=i;},null);
__d('UFIComment.react',['ix','cx','fbt','invariant','Bootloader','ContentTranslationStrings','HovercardLink','Image.react','LiveWWWFeedbackTypedLogger','React','ReactDOM','TextWithEntities.react','Tooltip.react','TrackingNodes','UFIActorIconContainer.react','UFICentralUpdates','UFICommentAction','UFICommentActions.react','UFICommentAttachment.react','UFICommentAuthorName.react','UFICommentBody.react','UFICommentMenu.react','UFICommentUtils','UFICommentVPVTracker.react','UFIConfig','UFIConstants','UFIImageBlock.react','UserHovercardLocation','XUICloseButton.react','emptyFunction','fbglyph','joinClasses','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes,m=c('UFIConstants').UFIStatus,n=c('keyMirror')({edit:true,hide:true,remove:true,embed:true}),o='ufi_comment_close_button',p='ufi_highlighted_comment',q='ufi_comment_menu_delete',r='ufi_comment_menu_edit',s='ufi_comment_menu_hide',t='ufi_comment_menu_embed',u={testid:q,value:n.remove,label:j._("Delete Comment...")},v={testid:s,value:n.hide,label:j._("Hide Comment")},w={testid:t,value:n.embed,label:j._("Embed")},x={testid:q,value:n.remove,label:j._("Delete...")},y=null,z=function(ca){var da=ca.status;return da===m.FAILED_ADD||da===m.FAILED_EDIT;};function aa(ca){return ca.commenterIsFOF!==undefined&&ca.userIsMinor!==undefined&&ca.reportLink!==undefined;}var ba=c('React').createClass({displayName:'UFIComment',propTypes:{authorProfiles:l.object.isRequired,comment:l.object.isRequired,contextArgs:l.object.isRequired,feedback:l.object.isRequired,'data-ft':l.string,focusOnMount:l.bool,hasPartialBorder:l.bool,hideAsSpamForPageAdmin:l.bool,isFeatured:l.bool,isFirst:l.bool,isFirstCommentComponent:l.bool,isFirstComponent:l.bool,isLast:l.bool,isLastCommentComponent:l.bool,isLastComponent:l.bool,isLocallyComposed:l.bool,parentCanComment:l.bool,permalink:l.string,showPermalink:l.bool,showRemoveReportMenu:l.bool,showReplyLink:l.bool,viewerIsAuthor:l.bool,orderingMode:l.string,markViewerHasInteracted:l.func},contextTypes:{dispatch:l.func},getInitialState:function(){return {isHighlighting:this.props.comment.highlightcomment,wasHighlighted:this.props.comment.highlightcomment,markedAsSpamHere:false,isInlinePageDeleted:false,isInlineBanned:false,loggedLiveUpdate:false};},_onHideAsSpam:function(event){this.context.dispatch(c('UFICommentAction').markAsSpam(this.props.comment,event));this.setState({markedAsSpamHere:true});},_onMarkAsNotSpam:function(event){this.context.dispatch(c('UFICommentAction').markAsNotSpam(this.props.comment,event));this.setState({markedAsSpamHere:false});},_onDeleteSpam:function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,function(){return this.setState({isInlinePageDeleted:true});}.bind(this)));},_onRemove:function(event){this.context.dispatch(c('UFICommentAction').remove(this.props.comment,event.target,c('emptyFunction')));},_onInlineBan:function(event){this.context.dispatch(c('UFICommentAction').inlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:true});},_onUndoInlineBan:function(event){this.context.dispatch(c('UFICommentAction').undoInlineBan(this.props.comment,event,this.props.feedback.ownerid));this.setState({isInlineBanned:false});},_onAction:function(event,ca){var da=ca.item,ea=da.getValue();setTimeout(function(){if(ea===n.remove){this._onRemove(event);}else if(ea===n.edit){this.context.dispatch(c('UFICommentAction').edit(this.props.comment));}else if(ea===n.hide){this._onHideAsSpam(event);}else if(ea===n.embed){this.context.dispatch(c('UFICommentAction').embed(this.props.comment));}else c('UFICentralUpdates').inform(ea,{comment:this.props.comment,feedback:this.props.feedback});}.bind(this),0);},_createRemoveReportMenuData:function(){return [u,v];},_createEditDeleteMenuData:function(){return [{testid:r,value:n.edit,label:j._("Edit...")},x];},_renderCloseButton:function(){var ca=this.props.comment,da=null,ea=null,fa=null,ga=c('UFICommentMenu.react').MenuType.CLOSE,ha=ca.canembed&&c('UFIConfig').showCommentEmbedOption;if(ca.canremove&&!this.props.hideAsSpamForPageAdmin){if(this.props.viewerIsAuthor&&ca.canedit){fa=ha?j._("Edit, delete or embed this"):j._("Edit or delete this");ga=c('UFICommentMenu.react').MenuType.EDIT;ea=this._createEditDeleteMenuData();}else if(this.props.showRemoveReportMenu){fa=ha?j._("Remove, report or embed this"):j._("Remove or report this");ea=this._createRemoveReportMenuData();}else if(this.props.feedback.customcommentactionlinks){fa=ha?j._("Remove this"):j._("Remove or embed this");ea=[u];ga=c('UFICommentMenu.react').MenuType.EDIT;}else{fa=ha?j._("Remove or embed this"):j._("Remove this");if(!ha){da=this._onRemove;}else ea=[x];}}else if(this.props.feedback.customcommentactionlinks){fa=ha?j._("Hide or embed this"):j._("Hide this");ea=[v];ga=c('UFICommentMenu.react').MenuType.EDIT;}else if(ca.canreport){fa=ha?j._("Hide or embed this"):j._("Hide this");if(!ha){da=this._onHideAsSpam;}else ea=[v];}if(ha){!(ea.length>0)?k(0):void 0;ea.push(w);ga=c('UFICommentMenu.react').MenuType.CHEVRON;}if(this.props.feedback.customcommentactionlinks)for(var ia in this.props.feedback.customcommentactionlinks){var ja=this.props.feedback.customcommentactionlinks[ia];if(!ja.showInMenu)continue;ea.push({testid:ja.type,value:ja.type,label:ja.title});}var ka="UFICommentCloseButton"+(da===null&&ea===null?' '+"hdn":''),la=null,ma=null;if(this.props.contextArgs.viewas){la='/ajax/profile/link_disabled_in_viewas.php';ma='dialog';da=null;}return (c('React').createElement(c('UFICommentMenu.react'),{ajaxify:la,className:ka,'data-testid':o,onClick:da,rel:ma,tooltip:fa,menuData:ea,menuType:ga,onAction:this._onAction}));},_renderFakeCloseButton:function(){return (c('React').createElement(c('XUICloseButton.react'),{className:'UFICommentCloseButtonFake',tabIndex:'-1'}));},componentDidMount:function(){if(this.state.isHighlighting){var ca=c('ReactDOM').findDOMNode(this),da=parseInt(this.props.comment.scrolltopoffset||0,10);c('Bootloader').loadModules(["UFIScrollHighlight"],function(ea){setTimeout(ea.actOn.bind(null,ca,da),0);});this.setState({isHighlighting:false});}},shouldComponentUpdate:function(ca,da){var ea=this.props,fa=this.state;return (ca.comment!==ea.comment||ca.showReplyLink!==ea.showReplyLink||ca.isFirst!==ea.isFirst||ca.isLast!==ea.isLast||ca.isFirstCommentComponent!==ea.isFirstCommentComponent||ca.isLastCommentComponent!==ea.isLastCommentComponent||ca.isFirstComponent!==ea.isFirstComponent||ca.isLastComponent!==ea.isLastComponent||ca.isFeatured!==ea.isFeatured||ca.hasPartialBorder!==ea.hasPartialBorder||da.wasHighlighted!==fa.wasHighlighted||da.isHighlighting!==fa.isHighlighting||da.markedAsSpamHere!==fa.markedAsSpamHere||da.isInlinePageDeleted!==fa.isInlinePageDeleted||da.isInlineBanned!==fa.isInlineBanned);},render:function(){var ca=this.props.comment,da=this.props.feedback,ea=ca.status===m.DELETED,fa=ca.status===m.LIVE_DELETED,ga=ca.status===m.SPAM_DISPLAY;if(ea)return null;var ha=this.state.markedAsSpamHere,ia=this.state.isInlinePageDeleted,ja=this.props.hideAsSpamForPageAdmin,ka=this.state.isInlineBanned;if(ca.islive&&!this.state.loggedLiveUpdate){new (c('LiveWWWFeedbackTypedLogger'))().setEvent('update_view').setUpdateType('comment').setCommentID(ca.id).log();this.setState({loggedLiveUpdate:true});}var la=aa(ca),ma=!ca.status&&(ca.isunseen||ca.islocal);if(!ca.status&&da.lastseentime){var na=ca.originalTimestamp||ca.timestamp.time;ma=ma||na>da.lastseentime;}var oa=this.props.contextArgs.markedcomments;if(oa&&oa[ca.legacyid])ma=true;var pa="UFIRow"+(this.props.isFirst?' '+"_48ph":'')+(this.props.isLast?' '+"UFILastComment":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),qa=j._("Comment"),ra=j._("Comment reply"),sa=ca.parentcommentid?ra:qa;if(la)if(y){var ta=null,ua=null,va=null,wa=null;if(ja){va=ka?this._onUndoInlineBan:this._onInlineBan;if(ia){ta=j._("You've deleted this comment so no one can see it.");}else if(ha){ta=j._("Now this is only visible to the person who wrote it and their friends.");wa=this._onDeleteSpam;ua=this._onMarkAsNotSpam;}}else if(ha){ta=j._("This comment has been hidden.");wa=this._onDeleteSpam;ua=this._onMarkAsNotSpam;}if(ta)return (c('React').createElement('div',{className:pa,role:'article','aria-label':sa},c('React').createElement(y,{notice:ta,comment:this.props.comment,authorProfiles:this.props.authorProfiles,onUndo:ua,onBanAction:va,onDeleteAction:wa,isInlineBanned:ka,isInlinePageDeleted:ia,hideAsSpamForPageAdmin:ja,pageID:this.props.feedback.ownerid})));}else c('Bootloader').loadModules(["UFICommentRemovalControls.react"],function(za){y=za;setTimeout(function(){this.forceUpdate();}.bind(this));}.bind(this));var xa=c('joinClasses')(pa,"UFIComment"+(z(ca)?' '+"UFICommentFailed":'')+(fa||ga?' '+"UFITranslucentComment":'')+(this.state.isHighlighting?' '+"highlightComment":'')+(' '+"_4oep")+(this.props.hasPartialBorder?' '+"UFIPartialBorder":'')+(ma?' '+"UFIUnseenItem":'')),ya=this.renderComment();if(this.props.shouldLogVPVs&&!ca.islocal)ya=c('React').createElement(c('UFICommentVPVTracker.react'),{comment:ca,contextArgs:this.props.contextArgs},ya);return (c('React').createElement('div',{className:xa,role:'article','aria-label':sa,'data-testid':this.state.wasHighlighted?p:null,'data-ft':this.props['data-ft']},ya));},renderComment:function(){var ca=this.props,da=ca.comment,ea=ca.permalink,fa=ca.feedback,ga=da.body?da.body.text:'',ha=c('UFICommentUtils').shallowCopyRanges(da.body&&da.body.ranges),ia=ca.authorProfiles[da.author],ja=da.status===m.SPAM_DISPLAY,ka=da.status===m.LIVE_DELETED,la=!(ja||ka),ma=fa.canremoveall||da.hiddenbyviewer;ga=c('UFICommentUtils').getCommentTextWithTruncatedURIs(ha,ga);var na=null,oa=null;if(!ca.isLocallyComposed&&!this.state.wasHighlighted){oa=c('UFIConstants').commentTruncationLength;na=c('UFIConstants').commentTruncationMaxLines;}var pa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.SMALL_ACTOR_PHOTO),qa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.USER_MESSAGE),ra=null,sa=null,ta=null,ua=null;if(da.istranslatable&&da.translatedbody===undefined)ra=c('React').createElement('a',{href:'#',role:'button',title:c('ContentTranslationStrings').SEE_TRANSLATION_TIP,className:"UFITranslateLink",onClick:function(event){return this.context.dispatch(c('UFICommentAction').translate(da,event));}.bind(this)},c('ContentTranslationStrings').SEE_TRANSLATION);if(da.translatedbody!==undefined)if(da.translatedbody!==null&&da.translatedbody.text!==''){ua=c('React').createElement('span',{className:"UFITranslateAttribution"},c('ContentTranslationStrings').AUTOMATICALLY_TRANSLATED);var va=c('UFICommentUtils').shallowCopyRanges(da.translatedbody.ranges),wa=da.translatedbody.text,xa=da.translatedbody.dir,ya=c('React').createElement('span',{key:'comment-body','data-ft':qa,dir:xa},c('React').createElement(c('TextWithEntities.react'),{className:"UFICommentBody",interpolator:c('UFICommentUtils').getCommentBodyInterpolator(ca.feedback.grouporeventid),ranges:va,text:wa,renderEmoticons:c('UFIConfig').renderEmoticons,renderEmoji:c('UFIConfig').renderEmoji}));sa=ya;}else ta=c('React').createElement('span',{className:"UFITranslationErrorText"},c('ContentTranslationStrings').NO_TRANSLATION_AVAILABLE);var za=c('React').createElement(c('UFICommentBody.react'),{socialContext:da.socialcontext,commentText:ga,commentRanges:ha,groupOrEventID:fa.grouporeventid,maxLength:oa,maxLines:na,markViewerHasInteracted:this.props.markViewerHasInteracted}),ab=ca.contextArgs.viewas?null:c('HovercardLink').constructEndpointWithGroupLocationAndExtraParams(ia,fa.grouporeventid,c('UserHovercardLocation').UFI,da.isauthorweakreference,{on_public_ufi:fa.ispublic}).toString(),bb=c('React').createElement(c('UFICommentAuthorName.react'),{author:ia,authorProfiles:ca.authorProfiles,showHovercard:!!ab,isAuthorWeakReference:da.isauthorweakreference,isAdminViewer:ca.feedback.isadminviewer,focusOnMount:ca.focusOnMount,groupOrEventID:fa.grouporeventid,isFeatured:ca.isFeatured,socialContext:da.socialcontext,isPublic:fa.ispublic,constituentTitle:da.constituentTitle}),cb=null;if(da.photo_comment_status)cb=c('React').createElement('div',{className:"_50f8"},da.photo_comment_status);var db=null;if(da.sticker_attachment_status)db=c('React').createElement('div',{className:"_50f8"},da.sticker_attachment_status);var eb=c('React').createElement(c('UFICommentAttachment.react'),{comment:ca.comment}),fb=c('React').createElement(c('UFIActorIconContainer.react'),{actorID:da.author});if(ia.uri||ia.isBusinessPersona)fb=c('React').createElement('a',{'data-ft':pa,'data-hovercard':ab,href:c('UFICommentUtils').annotateProfileURIIfPublic(fa.ispublic,ia.uri)},fb);var gb=false;switch(ca.orderingMode){case c('UFIConstants').UFICommentOrderingMode.RANKED_THREADED:case c('UFIConstants').UFICommentOrderingMode.FILTERED:gb=true;}var hb=null,ib=ca.contextArgs.ownerName;if(gb&&this.props.comment.id===fa.pinnedcommenttoken){var jb=ib?j._("{post owner name} pinned this comment to the top",[j.param('post owner name',ib)]):j._("The person who posted pinned this comment to the top");hb=c('React').createElement(c('Tooltip.react'),{position:'above',tooltip:jb},c('React').createElement(c('Image.react'),{className:'UFIPinnedCommentGlyph',src:h("\/images\/assets_DO_NOT_HARDCODE\/fb_glyphs\/pushpin_16_bluegray-10.png")}));}return (c('React').createElement(c('UFIImageBlock.react'),{spacing:'medium'},fb,c('React').createElement('div',{className:'UFICommentContentBlock'},c('React').createElement('div',{className:'UFICommentContent'},bb,hb,za,ra,c('React').createElement('div',{className:"UFITranslatedText"},sa,ua),ta,eb),cb,db,c('React').createElement(c('UFICommentActions.react'),{comment:da,feedback:fa,parentCanComment:ca.parentCanComment,permalink:ea,viewerCanMarkNotSpam:ma,showPermalink:ca.showPermalink,showReplyLink:ca.showReplyLink,contextArgs:ca.contextArgs,markedAsSpamHere:this.state.markedAsSpamHere,hideAsSpamForPageAdmin:ca.hideAsSpamForPageAdmin}),la?this._renderCloseButton():null),la?this._renderFakeCloseButton():null));}});f.exports=ba;},null);
__d('UFICommentDisabledNotice.react',['React','TextWithEntities.react'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;function i(k,l){return (c('React').createElement('a',{href:l.entity.url,target:'_blank'},k));}var j=c('React').createClass({displayName:'UFICommentDisabledNotice',propTypes:{feedback:h.object.isRequired},render:function(){var k=this.props.feedback,l=k.commentdisablednotice,m=c('React').createElement('div',{className:'UFINotice'},c('React').createElement(c('TextWithEntities.react'),{interpolator:i,ranges:l.ranges,aggregatedranges:l.aggregated_ranges,text:l.text}));return (c('React').createElement('div',{className:'UFIRow'},m));}});f.exports=j;},null);
__d('UFICommentFilters',['UFIConstants'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getAuthors:function(i){return i.reduce(function(j,k){if(k.author)j=j.concat(k.author);if(k.socialcontext)j=j.concat(k.socialcontext.topmutualid);if(k.replyauthors&&k.replyauthors.length)j=j.concat(k.replyauthors);return j;},[]);},isDeleted:function(i){return i.status===c('UFIConstants').UFIStatus.DELETED;},isSpam:function(i){return i.status===c('UFIConstants').UFIStatus.SPAM;},collectSpamBuckets:function(i,j){var k=i.reduce(function(l,m){if(h.isSpam(m)){if(l.spamBucket){l.spamBucket.spamCommentIDs.push(m.id);l.collected.push(null);}else{l.spamBucket={status:c('UFIConstants').UFIStatus.SPAM,id:m.id,spamCommentIDs:[m.id]};l.collected.push(l.spamBucket);}}else if(j[m.author]){l.spamBucket=null;l.collected.push(m);}return l;},{spamBucket:null,collected:[]});return k.collected;}};f.exports=h;},null);
__d('UFICommentHeader.react',['cx','fbt','React'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('React').createClass({displayName:'UFICommentHeader',render:function(){return (c('React').createElement('h6',babelHelpers['extends']({},this.props,{className:"accessible_elem"}),i._("Comments")));}});f.exports=j;},null);
__d('UFICommentScrollableArea.react',['React','ScrollableArea.react'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFICommentScrollableArea',propTypes:{contextArgs:h.object},render:function(){var j=this.props,k=j.children,l=j.contextArgs;if(l.scrollcomments&&l.scrollwidth)return (c('React').createElement(c('ScrollableArea.react'),{width:l.scrollwidth},c('React').createElement('div',null,k)));return k;}});f.exports=i;},null);
__d('CommentsTimeSpentTracker.react',['invariant','Banzai','BanzaiLogger','Event','OnVisible.react','React','SubscriptionsHandler','UserActivity','pageID'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'CommentsTimeSpentTracker',firstVisibleTime:0,listeners:new (c('SubscriptionsHandler'))(),propTypes:{orderingMode:i.string.isRequired,targetFBID:i.string.isRequired,viewerHasInteracted:i.bool.isRequired,timeToConsiderViewerInactiveMillis:i.number,pollViewerActivityIntervalMillis:i.number},getDefaultProps:function(){return {timeToConsiderViewerInactiveMillis:30000,pollViewerActivityIntervalMillis:1000};},render:function(){return (c('React').createElement(c('OnVisible.react'),{ref:'onVisibleElement',onVisible:this.startInterval,onHidden:this.finishInterval},this.props.children));},startInterval:function(){if(this.firstVisibleTime===0){this.firstVisibleTime=this._getTimeInSeconds();this._checkForIdleViewer();}},finishInterval:function(){if(this.firstVisibleTime&&this.isMounted()){var k=this._getTimeInSeconds();if(k>this.firstVisibleTime)c('BanzaiLogger').log('CommentsTimeSpentLoggerConfig',{viewer_has_interacted:this.props.viewerHasInteracted,ordering_mode:this.props.orderingMode,post_fbid:this.props.targetFBID,start_time:this.firstVisibleTime,end_time:k,time_spent_id:c('pageID')});this.firstVisibleTime=0;}},componentWillReceiveProps:function(){this.finishInterval();},componentDidMount:function(){this.listeners.addSubscriptions(c('Banzai').subscribe(c('Banzai').SHUTDOWN,this.finishInterval),c('Event').listen(window,'blur',this.finishInterval),c('Event').listen(window,'focus',this._checkVisibility));},componentWillUnmount:function(){this.finishInterval();this.listeners.release();},componentDidUpdate:function(){this._checkVisibility();},_getTimeInSeconds:function(){return Math.floor(Date.now()/1000);},_checkVisibility:function(){if(this.isMounted()){!(this.refs.onVisibleElement!==null)?h(0):void 0;this.refs.onVisibleElement.reset();}},_checkForIdleViewer:function(){if(this.firstVisibleTime===0)return;if(c('UserActivity').isActive(this.props.timeToConsiderViewerInactiveMillis)){setTimeout(function(){this._checkForIdleViewer();}.bind(this),this.props.pollViewerActivityIntervalMillis);}else{this.finishInterval();c('UserActivity').subscribeOnce(function(){if(this.isMounted())this._checkVisibility();}.bind(this));}}});f.exports=j;},null);
__d('UFISeenTracker.react',['BanzaiODS','OnVisible.react','React','throttle'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').createClass({displayName:'UFISeenTracker',getInitialState:function(){return {seen:false};},render:function(){return this.state.seen?this.props.children:c('React').createElement(c('OnVisible.react'),{onVisible:c('throttle')(this.logSeen,100,this)},this.props.children);},logSeen:function(){this.setState({seen:true});c('BanzaiODS').bumpEntityKey('unsampled_feedback','rendered_ufi_client');}});f.exports=h;},null);
__d('UFIComponentLogger.react',['CommentsTimeSpentTracker.react','React','UFISeenTracker.react','UFIConfig'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes,i=c('React').createClass({displayName:'UFIComponentLogger',propTypes:{feedback:h.object.isRequired,hasComments:h.bool.isRequired,isPermalink:h.bool.isRequired,orderingMode:h.string.isRequired,viewerHasInteractedWithComments:h.bool.isRequired},render:function(){var j=this.props,k=j.children,l=j.feedback,m=j.hasComments,n=j.isPermalink,o=j.orderingMode,p=j.viewerHasInteractedWithComments;if(!k)return null;var q=c('React').createElement('div',null,k);if(m&&c('UFIConfig').logCommentsTimespent){var r=p||n;q=c('React').createElement(c('CommentsTimeSpentTracker.react'),{orderingMode:o,viewerHasInteracted:r,targetFBID:l.commentstargetfbid},q);}if(c('UFIConfig').logWhetherUFISeen)q=c('React').createElement(c('UFISeenTracker.react'),null,q);return q;}});f.exports=i;},null);
__d('UFIComponents',['React','UFICommentFilters'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=function(k){if(!k)return false;if(k.props.comment&&c('UFICommentFilters').isDeleted(k.props.comment))return false;return true;},i=function(k,l,m){var n,o=m?k.length-1:0,p=m?-1:k.length,q=m?-1:1;for(n=o;n!=p;n+=q)if(h(k[n])){l(k,n);return k;}return k;},j={applyToUFIComponents:function(k,l,m){k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],l);},false);k=i(k,function(n,o){n[o]=c('React').cloneElement(n[o],m);},true);return k;}};f.exports=j;},null);
__d('UFIContainer.react',['cx','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createElement('div',{className:"_xtv",role:'presentation'},c('React').createElement('i',null)),k=c('React').createClass({displayName:'UFIContainer',propTypes:{hasNub:i.bool,isParentLiveDeleted:i.bool,isReplyList:i.bool},render:function(){var l=(!this.props.isReplyList?"UFIList":'')+(this.props.isReplyList?' '+"UFIReplyList":'')+(this.props.isParentLiveDeleted?' '+"UFITranslucentReplyList":'')+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''),m=c('React').createElement('div',{className:l},this.props.hasNub?j:null,this.props.children);return m;}});f.exports=k;},null);
__d('UFIInlineShareConfirmation.react',['cx','React','UFIImageBlock.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=[i.object,i.string],k=c('React').createClass({displayName:'UFIInlineShareConfirmation',propTypes:{isError:i.bool.isRequired,isFirstComponent:i.bool,isLastComponent:i.bool,message:i.oneOfType(j).isRequired},render:function(){var l=c('joinClasses')("UFIRow"+(' '+"UFIInlineShareConfirmation")+(this.props.isError?' '+"UFIInlineShareError":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":''));return (c('React').createElement('div',{className:l},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('i',{className:'UFIConfirmationIcon',role:'presentation'}),this._getText())));},_getText:function(){if(this.props.message.__html)return c('React').createElement('span',{dangerouslySetInnerHTML:this.props.message});return c('React').createElement('span',null,this.props.message);}});f.exports=k;},null);
__d('UFILikeSentenceText.react',['ActorURI','HovercardLinkInterpolator','ProfileBrowserLink','ProfileBrowserTypes','React','TextWithEntities.react','URI','XUFIReactionProfileBrowserController','XUFIReactionProfileDialogController'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('React').PropTypes;function i(k,l,m,n){if(n.count!=null){var o=c('ProfileBrowserTypes').LIKES,p={id:k.targetfbid,actorid:k.actorid},q=[],r;for(var s=0;s<l.length;s++)if(!l[s].count){r=l[s];var t=r.entity;q.push(t.id);}var u=new (c('URI'))('/ajax/like/tooltip.php').setQueryData({comment_fbid:k.targetfbid,comment_from:k.actorforpost,seen_user_fbids:q.length?q:true});u=c('ActorURI').create(u,k.actorforpost);var v,w;if(k.displayreactions){v=c('XUFIReactionProfileDialogController').getURIBuilder().setString('ft_ent_identifier',k.entidentifier).getURI();v=c('ActorURI').create(v,k.actorforpost);w=c('XUFIReactionProfileBrowserController').getURIBuilder().setString('ft_ent_identifier',k.entidentifier).getURI();w=c('ActorURI').create(w,k.actorforpost);}else{v=c('ProfileBrowserLink').constructDialogURI(o,p).toString();w=c('ProfileBrowserLink').constructPageURI(o,p).toString();}return (c('React').createElement('a',{'data-testid':'n_other_people_link',className:'UFINoWrap',rel:'dialog',ajaxify:v,href:w,'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-uri':u.toString(),role:'button'},m));}else{var x={source_feedback_owner_id:k.ownerid,source_feedback_identifier:k.entidentifier};return c('HovercardLinkInterpolator')(m,n,null,null,'ufi',x);}}var j=c('React').createClass({displayName:'UFILikeSentenceText',propTypes:{contextArgs:h.object.isRequired,feedback:h.object.isRequired,likeSentenceData:h.object.isRequired},render:function(){var k=this.props.feedback,l=this.props.likeSentenceData,m,n=l.aggregatedranges||l.aggregated_ranges;m=i;m=m.bind(null,k,l.ranges);return (c('React').createElement(c('TextWithEntities.react'),{interpolator:m,ranges:l.ranges,aggregatedRanges:n,text:l.text}));}});f.exports=j;},null);
__d('UFILikeSentence.react',['cx','invariant','fbt','ActorURI','Bootloader','LeftRight.react','ProfileBrowserLink','ProfileBrowserTypes','React','UFIImageBlock.react','UFILikeSentenceText.react','UFIStoryAction','UFIReactionsSocialSentence.react','UnseenGatekeeper','URI','XUFIGroupSeenByProfileBrowserController','XUFIGroupSeenByProfileDialogController','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'UFILikeSentence',propTypes:{contextArgs:k.object.isRequired,feedback:k.object.isRequired,isFirstComponent:k.bool,isLastComponent:k.bool,onOrderingModeChange:k.func,showOrderingModeSelector:k.bool},contextTypes:{dispatch:k.func},getInitialState:function(){return {selectorModule:null,bootloadedSelectorModule:false};},componentWillMount:function(){this._bootloadSelectorModule(this.props);},componentWillReceiveProps:function(m){this._bootloadSelectorModule(m);},_bootloadSelectorModule:function(m){if(m.showOrderingModeSelector&&!this.state.bootloadedSelectorModule){var n=function(o){this.setState({selectorModule:o});}.bind(this);!!m.contextArgs.entstream?i(0):void 0;c('Bootloader').loadModules(["UFIOrderingModeSelector.react"],n);this.setState({bootloadedSelectorModule:true});}},render:function(){var m=this.props.feedback,n=m.likesentences.current||{},o=this.props.contextArgs.entstream,p=c('joinClasses')("UFIRow"+(m.likesentences.isunseen?' '+"UFIUnseenItem":'')+(' '+"UFILikeSentence")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')+(this.props.contextArgs.hasReactions?' '+"_4_dr":'')),q=null,r=null;if(this.props.contextArgs.hasReactions){r=c('React').createElement(c('UFIReactionsSocialSentence.react'),{feedback:m,contextArgs:this.props.contextArgs});}else if(n.text)r=c('React').createElement('div',{className:"UFILikeSentenceText"},c('React').createElement(c('UFILikeSentenceText.react'),{contextArgs:this.props.contextArgs,feedback:m,likeSentenceData:n}));var s=r,t=null;if(m.seencount>0&&!o){var u={id:m.targetfbid},v;if(m.seenbyall){v=j._("Seen by everyone");}else v=m.seencount==1?j._("Seen by 1"):j._("Seen by {count}",[j.param('count',m.seencount)]);if(c('UnseenGatekeeper').is_whitelisted){var w=new (c('URI'))('/ajax/ufi/seen_list_hovercard.php').setQueryData({id:m.entidentifier}),x=c('XUFIGroupSeenByProfileDialogController').getURIBuilder().setInt('id',m.entidentifier).getURI();x=c('ActorURI').create(x,m.actorforpost);var y=c('XUFIGroupSeenByProfileBrowserController').getURIBuilder().setInt('id',m.entidentifier).getURI();y=c('ActorURI').create(y,m.actorforpost);t=c('React').createElement('a',{rel:'dialog',ajaxify:x,href:y,'data-hovercard':w.toString(),className:"UFISeenCount"+(!!n.text?' '+"UFISeenCountRight":'')},c('React').createElement('span',{className:'UFISeenCountIcon'}),v);}else{var z=c('ProfileBrowserTypes').GROUP_MESSAGE_VIEWERS,aa=new (c('URI'))('/ajax/ufi/seen_tooltip.php').setQueryData({ft_ent_identifier:m.entidentifier,displayed_count:m.seencount}),ba=c('ProfileBrowserLink').constructDialogURI(z,u),ca=c('ProfileBrowserLink').constructPageURI(z,u);t=c('React').createElement('a',{rel:'dialog',ajaxify:ba.toString(),href:ca.toString(),'data-hover':'tooltip','data-tooltip-alignh':'left','data-tooltip-uri':aa.toString(),className:"UFISeenCount"+(!!n.text?' '+"UFISeenCountRight":'')},c('React').createElement('span',{className:'UFISeenCountIcon'}),v);}}else if(this.props.showOrderingModeSelector&&this.state.selectorModule){var da=this.state.selectorModule;t=c('React').createElement(da,{entstream:o,feedback:m,onOrderChanged:function(fa){return this.context.dispatch(c('UFIStoryAction').changeOrderingMode(fa));}.bind(this)});if(!s)s=c('React').createElement('div',null);}var ea=null;if(q&&r){ea=c('React').createElement(c('UFIImageBlock.react'),null,q,r,t);}else if(s){ea=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},s,t);}else ea=t;return (c('React').createElement('div',{className:p},ea));}});f.exports=l;},null);
__d('UFIPager.react',['cx','LeftRight.react','React','UFIImageBlock.react','XUISpinner.react','joinClasses'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFIPager',propTypes:{contextArgs:i.object.isRequired,pagerLabel:i.string.isRequired,'data-ft':i.string,countSentence:i.string,isFirstCommentComponent:i.bool,isFirstComponent:i.bool,isLastCommentComponent:i.bool,isLastComponent:i.bool,isLoading:i.bool,isReply:i.bool,isUnseen:i.bool,onPagerClick:i.func},onPagerClick:function(k){!this.props.isLoading&&this.props.onPagerClick&&this.props.onPagerClick();k.nativeEvent.prevent();},render:function(){var k=this.onPagerClick,l=c('joinClasses')("UFIRow"+(this.props.isUnseen?' '+"UFIUnseenItem":'')+(' '+"UFIPagerRow")+(' '+"_4oep")+(this.props.isFirstCommentComponent?' '+"_48pi":'')+(this.props.isLastCommentComponent?' '+"UFILastCommentComponent":'')+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),m=null;if(this.props.isLoading)m=c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'});var n=c('React').createElement('a',{className:'UFIPagerLink',onClick:k,href:'#',role:'button'},this.props.pagerLabel,m),o="fcg"+(' '+"UFIPagerCount"),p=c('React').createElement('span',{className:o},this.props.countSentence),q,r=this.props.contextArgs.ufiexperiments||{};if(this.props.contextArgs.entstream||!this.props.isReply){q=c('React').createElement(c('LeftRight.react'),{direction:c('LeftRight.react').DIRECTION.right},n,p);}else q=c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('a',{className:'UFIPagerIcon',onClick:k,href:'#',role:'button'}),n,p);return (c('React').createElement('div',{className:l,'data-ft':this.props['data-ft']},q));}});f.exports=j;},null);
__d('UFIPagerLabel',['fbt','intlList','NumberFormat'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={VIEW_ONE:'view_one',VIEW_ONE_MORE:'view_one_more',VIEW_ALL:'view_all',VIEW_MORE_EXPLICIT:'view_more_explicit',VIEW_MORE:'view_more',VIEW_PREVIOUS:'view_previous',_getReplyLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 reply");case i.VIEW_ONE_MORE:return h._("View 1 more reply");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} replies"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more replies"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more replies");case i.VIEW_PREVIOUS:return h._("View previous replies");default:return null;}},_getCommentLabel:function(j,k){if(k.commenters)return this._getCommentLabelWithCommentSentence(j,k);var l;switch(j){case i.VIEW_ONE:return h._("View 1 comment");case i.VIEW_ONE_MORE:return h._("View 1 more comment");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} comments"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more comments"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more comments");case i.VIEW_PREVIOUS:return h._("View previous comments");default:return null;}},_getCommentLabelWithCommentSentence:function(j,k){var l=c('intlList')(k.commenters),m=k.othersCount,n=c('NumberFormat').formatIntegerWithDelimiter(m,k.delimiter),o=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);switch(j){case i.VIEW_ONE:return h._("View 1 comment from {names}",[h.param('names',l)]);case i.VIEW_ONE_MORE:return h._("View 1 more comment from {names}",[h.param('names',l)]);case i.VIEW_ALL:switch(m){case 0:return h._({"*":"View all {count} comments from {names}"},[h.param('count',o,[0,k.count]),h.param('names',l)]);case 1:return h._({"*":"View all {count} comments from {names} and 1 other person"},[h.param('count',o,[0,k.count]),h.param('names',l)]);default:return h._({"*":{"*":"View all {count} comments from {names} and {othersCount} others"}},[h.param('count',o,[0,k.count]),h.param('names',l),h.param('othersCount',n,[0,m])]);}break;case i.VIEW_MORE_EXPLICIT:case i.VIEW_MORE:switch(m){case 0:return h._("View more comments from {names}",[h.param('names',l)]);case 1:return h._("View more comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View more comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}break;case i.VIEW_PREVIOUS:switch(m){case 0:return h._("View previous comments from {names}",[h.param('names',l)]);case 1:return h._("View previous comments from {names} and 1 other person",[h.param('names',l)]);default:return h._({"*":"View previous comments from {names} and {othersCount} others"},[h.param('names',l),h.param('othersCount',n,[0,m])]);}break;default:return null;}},_getQuestionLabel:function(j,k){var l;switch(j){case i.VIEW_ONE:return h._("View 1 question");case i.VIEW_ONE_MORE:return h._("View 1 more question");case i.VIEW_ALL:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View all {count} questions"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE_EXPLICIT:l=c('NumberFormat').formatIntegerWithDelimiter(k.count,k.delimiter);return h._({"*":"View {count} more questions"},[h.param('count',l,[0,k.count])]);case i.VIEW_MORE:return h._("View more questions");case i.VIEW_PREVIOUS:return h._("View previous questions");default:return null;}},getLabel:function(j,k,l,m){if(k){return i._getReplyLabel(j,m);}else if(l){return i._getQuestionLabel(j,m);}else return i._getCommentLabel(j,m);}};f.exports=i;},null);
__d('UFIPagerGenerator',['fbt','invariant','NumberFormat','React','TrackingNodes','UFICommentOrdering','UFIConfig','UFIConstants','UFIPager.react','UFIPagerLabel'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIPaging,k={isBottomPager:function(l,m){return c('UFICommentOrdering').inverted(m)&&!l;},needsStartOfRangePager:function(l){return l>0;},renderPagers:function(l,m,n,o,p){var q=l.deletedCounts[m],r=l.commentCounts[m],s=r-q,t=o-q,u=c('UFIConfig').numberDelimiter,v=m!==l.contextArgs.ftentidentifier,w=this.isBottomPager(v,l.orderingMode),x={topPager:null,bottomPager:null};!!isNaN(s)?i(0):void 0;!!isNaN(t)?i(0):void 0;var y=l.ranges[m],z=y.isLoadingPrev(),aa=y.isLoadingNext(),ba={delimiter:u,count:0},ca=l.feedback.commentsentenceinfo;if(ca){ba.commenters=ca.explicit_commenter_names;ba.othersCount=ca.other_commenter_count;}var da=n+o==r;if(r<l.contextArgs.pagesize&&da||t===0){var ea,fa,ga,ha,ia,ja=function(){var sa=Math.min(r,l.contextArgs.pagesize);ea=function(){return p(w?j.BOTTOM:j.TOP,{offset:r-sa,length:sa});};if(t===0){if(s==1){fa=c('UFIPagerLabel').VIEW_ONE;}else{ba.count=s;fa=c('UFIPagerLabel').VIEW_ALL;}}else if(s-t==1){fa=c('UFIPagerLabel').VIEW_ONE_MORE;}else{fa=c('UFIPagerLabel').VIEW_MORE_EXPLICIT;ba.count=s-t;}ga=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.VIEW_ALL_COMMENTS);ha=c('UFIPagerLabel').getLabel(fa,v,l.feedback.isqanda,ba);ia=c('React').createElement(c('UFIPager.react'),{key:'allPager'+m,ref:w?'topLevelBottomPager':null,contextArgs:l.contextArgs,isUnseen:l.feedback.hasunseencollapsed,isLoading:w?aa:z,isReply:v,pagerLabel:ha,onPagerClick:ea,'data-ft':ga});if(w){x.bottomPager=ia;}else x.topPager=ia;return {v:x};}();if(typeof ja==="object")return ja.v;}var ka=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_MORE,v,l.feedback.isqanda,ba),la=c('UFIPagerLabel').getLabel(c('UFIPagerLabel').VIEW_PREVIOUS,v,l.feedback.isqanda,ba);if(this.needsStartOfRangePager(n)){var ma,na,oa,pa,qa;(function(){ma=Math.max(n-l.contextArgs.pagesize,0);var sa=n+o-ma;if(!v||t>1){oa=c('NumberFormat').formatIntegerWithDelimiter(t,u);pa=c('NumberFormat').formatIntegerWithDelimiter(s,u);na=h._("{countshown} of {totalcount}",[h.param('countshown',oa),h.param('totalcount',pa)]);}qa=function(){return p(w?j.BOTTOM:j.TOP,{offset:ma,length:sa});};if(w){x.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager'+m,ref:!v?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:z,isReply:v,pagerLabel:ka,onPagerClick:qa,countSentence:na});}else x.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:z,isReply:v,pagerLabel:la,onPagerClick:qa,countSentence:na});})();}if(n+o<r){var ra;(function(){var sa=Math.min(o+l.contextArgs.pagesize,r-n);ra=function(){return p(w?j.TOP:j.BOTTOM,{offset:n,length:sa});};if(w){x.topPager=c('React').createElement(c('UFIPager.react'),{key:'topPager'+m,contextArgs:l.contextArgs,isLoading:aa,isReply:v,pagerLabel:la,onPagerClick:ra});}else x.bottomPager=c('React').createElement(c('UFIPager.react'),{key:'bottomPager',ref:!v?'topLevelBottomPager':null,contextArgs:l.contextArgs,isLoading:aa,isReply:v,pagerLabel:ka,onPagerClick:ra});})();}return x;}};f.exports=k;},null);
__d('UFIReplySocialSentence.react',['cx','fbt','Badge.react','Image.react','LiveTimer','React','Timestamp.react','UFIConstants','UFIImageBlock.react','Middot.react','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k=43200,l=c('React').createClass({displayName:'UFIReplySocialSentence',propTypes:{author:j.object,contextArgs:j.object.isRequired,'data-ft':j.string,isExpanded:j.bool,isFirstComponent:j.bool,isLastComponent:j.bool,isLoading:j.bool,onClick:j.func,orderingMode:j.string,replies:j.number,showVerified:j.bool,timestamp:j.object},render:function(){var m=this.props.isLoading?"UFIReplySocialSentenceLoading":'',n=c('joinClasses')("UFIRow"+(' '+"UFIReplySocialSentenceRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),o,p;if(this.props.isExpanded){o=this.props.replies>1?i._({"*":"Hide {count} Replies"},[i.param('count',this.props.replies,[0])]):i._("Hide 1 Reply");}else{o=this.props.replies>1?i._({"*":"{count} Replies"},[i.param('count',this.props.replies,[0])]):i._("1 Reply");if(this.props.timestamp){var q=c('LiveTimer').getApproximateServerTime()/1000-this.props.timestamp.time;if(q<k||this.props.orderingMode==c('UFIConstants').UFICommentOrderingMode.RECENT_ACTIVITY)p=c('React').createElement('span',{className:"fcg"},c('React').createElement(c('Middot.react'),{key:'middot-timestamp'}),c('React').createElement(c('Timestamp.react'),{shorten:this.props.contextArgs.shortenTimestamp,time:this.props.timestamp.time,text:this.props.timestamp.text,verbose:this.props.timestamp.verbose}));}}var r=this.props.author,s=r&&!this.props.isExpanded,t=null,u;if(s){t=c('React').createElement(c('Image.react'),{alt:'',src:r.thumbSrc,className:"img UFIActorImage _54ru"});var v=null;if(this.props.showVerified)v=c('React').createElement(c('Badge.react'),{size:'xsmall',type:'verified'});if(r.i18nGender){u=[i._({"*":"{author}{verified_badge} replied"},[i.param('author',r.name,[1,r.i18nGender]),i.param('verified_badge',v)])];}else u=[i._("{author}{verified_badge} replied",[i.param('author',r.name),i.param('verified_badge',v)])];u.push(c('React').createElement(c('Middot.react'),{key:'middot-author'}),o);}else u=o;return (c('React').createElement('div',{className:n,'data-ft':this.props['data-ft']},c('React').createElement('a',{className:'UFICommentLink',onClick:this.props.onClick,href:'#',role:'button'},c('React').createElement(c('UFIImageBlock.react'),null,c('React').createElement('div',{className:(s?"UFIReplyActorPhotoWrapper":'')+(s?' '+"UFIReplyActor":'')},c('React').createElement('i',{className:(!this.props.isExpanded?"UFIPagerIcon":'')+(this.props.isExpanded?' '+"UFICollapseIcon":'')+(s?' '+"UFIIconWithActor":'')}),t),c('React').createElement('span',{className:m},c('React').createElement('span',{className:"UFIReplySocialSentenceLinkText"+(this.props.showVerified?' '+"UFIReplySocialSentenceVerified":'')},u),p)))));}});f.exports=l;},null);
__d('UFIShareRowCommentCount.react',['cx','fbt','ActorURI','NumberFormat','React','XUFICommentTooltipController'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();var l=c('React').PropTypes;j=babelHelpers.inherits(m,c('React').Component);k=j&&j.prototype;m.prototype.$UFIShareRowCommentCount1=function(){var n=this.props.commentCount,o=n==1;if(typeof n==='number')n=c('NumberFormat').formatInteger(n);return i._({"comment":"{count (could be abbreviated, such as '3.2k')} comment","comments":"{count (could be abbreviated, such as '3.2k')} comments"},[i.param('count (could be abbreviated, such as \'3.2k\')',n),i['enum'](o?'comment':'comments',{comment:'comment',comments:'comments'})]);};m.prototype.render=function(){var n=this.$UFIShareRowCommentCount1(),o="_2w0q",p=c('ActorURI').create(c('XUFICommentTooltipController').getURIBuilder().setString('ft_ent_identifier',this.props.feedback.entidentifier).getURI(),this.props.feedback.actorforpost);return (c('React').createElement('span',{'aria-live':'polite',className:o,'data-hover':'tooltip','data-tooltip-uri':p},n));};function m(){j.apply(this,arguments);}m.propTypes={feedback:l.object.isRequired,commentCount:l.oneOfType([l.number,l.string]).isRequired};f.exports=m;},null);
__d('UFIShareRow.react',['cx','fbt','Layout.react','NumberFormat','React','UFIConfig','UFIImageBlock.react','UFIShareRowCommentCount.react','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('Layout.react').Column,k=c('Layout.react').FillColumn,l=c('React').PropTypes,m=c('React').createClass({displayName:'UFIShareRow',propTypes:{contextArgs:l.object.isRequired,feedback:l.object.isRequired,isFirstComponent:l.bool,isLastComponent:l.bool,shownCommentCount:l.oneOfType([l.number,l.string])},_renderCommentCount:function(){var n=this.props,o=n.feedback,p=n.shownCommentCount;if(p&&p!=0)return (c('React').createElement(c('UFIShareRowCommentCount.react'),{feedback:o,commentCount:p}));return null;},render:function(){var n=this.props.feedback.sharefbid||this.props.feedback.targetfbid,o=new (c('URI'))('/ajax/shares/view').setQueryData({target_fbid:n}),p=new (c('URI'))('/shares/view').setSubdomain('www').setQueryData({id:n}),q=this.props.contextArgs.loggedOutLinkConfig;if(q&&q.showShareLink)o=q.shareAjaxifyURI;var r;if(this.props.feedback.sharecount>1){var s=c('NumberFormat').formatIntegerWithDelimiter(this.props.feedback.sharecount,c('UFIConfig').numberDelimiter);r=i._({"*":"{count} shares"},[i.param('count',s,[0,this.props.feedback.sharecount])]);}else r=i._("1 share");var t=c('joinClasses')("UFIRow"+(' '+"UFIShareRow")+(this.props.isFirstComponent?' '+"_4204":'')+(this.props.isLastComponent?' '+"_2o9m":'')),u=c('React').createElement('a',{className:'UFIShareLink',rel:'dialog',ajaxify:o.toString(),href:p.toString()},r),v=this._renderCommentCount();if(v)u=c('React').createElement(c('Layout.react'),null,c('React').createElement(k,null,u),c('React').createElement(j,null,v));return (c('React').createElement('div',{className:t},u));}});f.exports=m;},null);
__d('FluxStoreGroup-upstream',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(k,l){this.__dispatcher=j(k);var m=k.map(function(n){return n.getDispatchToken();});this.$FluxStoreGroup1=this.__dispatcher.register(function(n){this.__dispatcher.waitFor(m);l();}.bind(this));}i.prototype.release=function(){this.__dispatcher.unregister(this.$FluxStoreGroup1);};i.prototype.getDispatchToken=function(){return this.$FluxStoreGroup1;};function j(k){!(k&&k.length)?h(0):void 0;var l=k[0].getDispatcher();return l;}f.exports=i;},null);
__d('FluxStoreGroup',['FluxStoreGroup-upstream'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStoreGroup-upstream'));i=h&&h.prototype;function j(k,l){'use strict';i.constructor.call(this,k,l);if(this.__dispatcher.explicitlyRegisterStore)this.__dispatcher.explicitlyRegisterStore(this);}f.exports=j;},null);
__d('FluxContainerSubscriptions',['FluxStoreGroup'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(){this.$FluxContainerSubscriptions1=[];}h.prototype.setStores=function(i){var j=this;this.$FluxContainerSubscriptions4();this.$FluxContainerSubscriptions5();var k=false,l=[];(function(){var n=function(){k=true;};j.$FluxContainerSubscriptions3=i.map(function(o){return o.addListener(n);});})();var m=function(){if(k){this.$FluxContainerSubscriptions1.forEach(function(n){return n();});k=false;}}.bind(this);this.$FluxContainerSubscriptions2=new (c('FluxStoreGroup'))(i,m);};h.prototype.addListener=function(i){this.$FluxContainerSubscriptions1.push(i);};h.prototype.reset=function(){this.$FluxContainerSubscriptions4();this.$FluxContainerSubscriptions5();this.$FluxContainerSubscriptions6();};h.prototype.$FluxContainerSubscriptions4=function(){if(this.$FluxContainerSubscriptions3){this.$FluxContainerSubscriptions3.forEach(function(i){return i.remove();});this.$FluxContainerSubscriptions3=null;}};h.prototype.$FluxContainerSubscriptions5=function(){if(this.$FluxContainerSubscriptions2){this.$FluxContainerSubscriptions2.release();this.$FluxContainerSubscriptions2=null;}};h.prototype.$FluxContainerSubscriptions6=function(){this.$FluxContainerSubscriptions1=[];};f.exports=h;},null);
__d('FluxContainer',['invariant','FluxContainerSubscriptions','React','shallowCompare'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=c('React').Component,j={pure:true,withProps:false};function k(o,p){var q,r;m(o);var s=babelHelpers['extends']({},j,p||{}),t=function(y,z){var aa=s.withProps?z:undefined;return o.calculateState(y,aa);},u=function(y){var z=s.withProps?y:undefined;return o.getStores(z);};q=babelHelpers.inherits(v,o);r=q&&q.prototype;function v(y){'use strict';r.constructor.call(this,y);this.$ContainerClass1=new (c('FluxContainerSubscriptions'))();this.state=t(undefined,y);}v.prototype.componentWillMount=function(){'use strict';if(r.componentWillMount)r.componentWillMount.call(this);this.$ContainerClass1.setStores(u(this.props));this.$ContainerClass1.addListener(function(){this.setState(function(y){return t(y,this.props);}.bind(this));}.bind(this));};v.prototype.componentWillReceiveProps=function(y,z){'use strict';if(r.componentWillReceiveProps)r.componentWillReceiveProps.call(this,y,z);if(!s.withProps)return;this.$ContainerClass1.setStores(u(y));this.setState(function(aa){return t(aa,y);});};v.prototype.componentWillUnmount=function(){'use strict';if(r.componentWillUnmount)r.componentWillUnmount.call(this);this.$ContainerClass1.reset();};var w=s.pure?l(v):v,x=o.displayName||o.name;w.displayName='FluxContainer('+x+')';return w;}function l(o){var p,q;p=babelHelpers.inherits(r,o);q=p&&p.prototype;r.prototype.shouldComponentUpdate=function(s,t){'use strict';return c('shallowCompare')(this,s,t);};function r(){'use strict';p.apply(this,arguments);}return r;}function m(o){!o.getStores?h(0):void 0;!o.calculateState?h(0):void 0;}function n(o,p,q,r){var s,t;s=babelHelpers.inherits(u,i);t=s&&s.prototype;u.getStores=function(w){'use strict';return p(w);};u.calculateState=function(w,x){'use strict';return q(w,x);};u.prototype.render=function(){'use strict';return o(this.state);};function u(){'use strict';s.apply(this,arguments);}var v=o.displayName||o.name||'FunctionalContainer';u.displayName=v;return k(u,r);}f.exports={create:k,createFunctional:n};},null);
__d('UFISpamPlaceholder.react',['fbt','React','XUISpinner.react'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'UFISpamPlaceholder',propTypes:{numHidden:i.number.isRequired,isLoading:i.bool,onClick:i.func},render:function(){if(this.props.isLoading)return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('span',{className:'UFISpamCommentWrapper'},c('React').createElement(c('XUISpinner.react'),{className:'mls',background:'light',size:'small'}))));return (c('React').createElement('div',{className:'UFIRow'},c('React').createElement('a',{href:'#',role:'button',className:'UFISpamCommentLink',onClick:this.props.onClick,'aria-label':h._("Show comments marked as spam")},c('React').createElement('span',{'data-hover':'tooltip','data-tooltip-alignh':'center','data-tooltip-content':h._({"*":"{count} hidden"},[h.param('count',this.props.numHidden,[0])]),className:'UFISpamCommentWrapper'},c('React').createElement('i',{className:'placeholderIcon'})))));}});f.exports=j;},null);
__d('abstractMethod',['invariant'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(j,k){h(0);}f.exports=i;},null);
__d('FluxReduceStore',['invariant','FluxStore','abstractMethod'],function a(b,c,d,e,f,g,h){'use strict';var i,j;if(c.__markCompiled)c.__markCompiled();i=babelHelpers.inherits(k,c('FluxStore'));j=i&&i.prototype;function k(l){j.constructor.call(this,l);this.$FluxReduceStore1=this.getInitialState();}k.prototype.getState=function(){return this.$FluxReduceStore1;};k.prototype.getInitialState=function(){return c('abstractMethod')('FluxReduceStore','getInitialState');};k.prototype.reduce=function(l,m){return c('abstractMethod')('FluxReduceStore','reduce');};k.prototype.areEqual=function(l,m){return l===m;};k.prototype.__invokeOnDispatch=function(l){this.__changed=false;var m=this.$FluxReduceStore1,n=this.reduce(m,l);!(n!==undefined)?h(0):void 0;if(!this.areEqual(m,n)){this.$FluxReduceStore1=n;this.__emitChange();}if(this.__changed)this.__emitter.emit(this.__changeEvent);};f.exports=k;},null);
__d('UFISpamStore',['FluxReduceStore','UFIActionTypes','UFISharedDispatcher','UFIUserActions'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxReduceStore'));i=h&&h.prototype;j.prototype.getInitialState=function(){return {};};j.prototype.areEqual=function(k,l){return Object.keys(k).length===Object.keys(l).length;};j.prototype.reduce=function(k,l){switch(l.type){case c('UFIActionTypes').STORY.SPAM_FETCHED:k=babelHelpers['extends']({},k);l.commentIDs.forEach(function(m){return (k[m]=true);});c('UFIUserActions').fetchSpamComments(l.ftentidentifier,l.commentIDs,l.parentCommentID,l.viewas);break;}return k;};function j(){h.apply(this,arguments);}f.exports=new j(c('UFISharedDispatcher'));},null);
__d('UFISpamPlaceholderContainer.react',['FluxContainer','React','UFISharedDispatcher','UFISpamPlaceholder.react','UFISpamStore','UFIStoryAction'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('React').Component);i=h&&h.prototype;j.getStores=function(){return [c('UFISpamStore')];};j.calculateState=function(k,l){var m=l.ftentidentifier,n=l.viewas,o=l.comment,p=l.parentCommentID;return {isLoading:!!c('UFISpamStore').getState()[o.id],numHidden:o.spamCommentIDs.length,onClick:function(){return c('UFISharedDispatcher').dispatch(c('UFIStoryAction').spamFetched(m,n,o.spamCommentIDs,p));}};};j.prototype.shouldComponentUpdate=function(k,l){return k.ftentidentifier!=this.props.ftentidentifier||k.viewas!=this.props.viewas||k.parentCommentID!=this.props.parentCommentID||l.isLoading!=this.state.isLoading||l.numHidden!=this.state.numHidden;};j.prototype.render=function(){return c('React').createElement(c('UFISpamPlaceholder.react'),this.state);};function j(){h.apply(this,arguments);}f.exports=c('FluxContainer').create(j,{pure:true,withProps:true});},null);
__d('StaticUFI.react',['csx','cx','Arbiter','BlueBar','BootloadedComponent.react','Bootloader','CommentPrelude','CSS','DOM','DOMScroll','Event','FbFeedCommentUFIScroller','FBFeedLocations','JSResource','LogHistory','Parent','React','ReactDOM','SearchableEntry','ShareNowConstants','TrackingNodes','UFIAddComment.react','UFIAddCommentLink.react','UFIComment.react','UFICommentFilters','UFICommentHeader.react','UFICommentOrdering','UFICommentDisabledNotice.react','UFICommentScrollableArea.react','UFIComponentLogger.react','UFIComponents','UFIConstants','UFIContainer.react','UFIInlineShareConfirmation.react','UFIInstanceState','UFILikeSentence.react','UFIPagerGenerator','UFIReplySocialSentence.react','UFIShareRow.react','UFISpamPlaceholderContainer.react','UFIStoryAction','URI','XUISpinner.react','dotAccess','focusWithinLayer','getElementPosition','getElementRect','getUnboundedScrollPosition','isEmpty','shallowEqual','throttle'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=c('UFIConstants').UFIFeedbackSourceType,k=c('UFIConstants').UFIStatus,l=c('React').PropTypes,m=c('React').createElement('div',{className:"UFICommentsLoadingSpinnerContainer _48pi UFIRow"},c('React').createElement(c('XUISpinner.react'),{size:'large'})),n=c('React').createClass({displayName:'StaticUFI',contextTypes:{dispatch:l.func},getInitialState:function(){var o=this.props.focusReply;return {focusReply:o,viewerHasClickedCommentComposer:false,viewerHasClickedSeeMore:false};},getDefaultProps:function(){return {commentIDToFocusOnMount:null,focusReply:null,canReplyMap:{},inlineShare:{},isActiveLoading:{},repliesExpandedMap:{},hasPagedToplevel:false,viewerHasInteractedWithComments:false,loadingSpamIDs:{}};},componentDidMount:function(){if(this.props.feedback.isqanda&&this.props.feedback.infinitescroll){var o=c('throttle')(this.loadMoreComments,20);this._scrollEventListener=c('Event').listen(window,'scroll',o);this._resizeEventListener=c('Event').listen(window,'resize',o);}if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});this._resolveFocus();},componentWillReceiveProps:function(o){if(this.props.focusReply!==o.focusReply)this.setState({focusReply:o.focusReply});if(c('BlueBar').hasFixedBlueBar())this.setState({oldBoundingClientRect:c('getElementRect')(c('ReactDOM').findDOMNode(this))});},componentWillUnmount:function(){if(this._scrollEventListener)this._scrollEventListener.remove();if(this._resizeEventListener)this._resizeEventListener.remove();},shouldComponentUpdate:function(o,p){var q=this.props,r=this.state;return (!c('shallowEqual')(r,p)||!c('shallowEqual')(r.loadingSpamIDs,p.loadingSpamIDs)||!c('shallowEqual')(q,o)||!c('shallowEqual')(q.feedback,o.feedback)||!c('shallowEqual')(q.repliesMap,o.repliesMap)||!c('shallowEqual')(q.commentCounts,o.commentCounts)||!c('shallowEqual')(q.deletedCounts,o.deletedCounts)||!c('shallowEqual')(q.availableComments,o.availableComments)||!c('shallowEqual')(q.ranges,o.ranges)||!c('shallowEqual')(q.authorProfiles,o.authorProfiles)||!c('shallowEqual')(q.commentPermalinks,o.commentPermalinks)||!c('shallowEqual')(q.canAddCommentMap,o.canAddCommentMap)||!c('shallowEqual')(q.canReplyMap,o.canReplyMap)||!c('shallowEqual')(q.inlineShare,o.inlineShare)||!c('shallowEqual')(q.isActiveLoading,o.isActiveLoading)||!c('shallowEqual')(q.repliesExpandedMap,o.repliesExpandedMap));},componentDidUpdate:function(o,p){var q=o.source===j.NEWS_FEED,r=q&&c('BlueBar').hasFixedBlueBar()?this._getOffsetOfRender(this.state.oldBoundingClientRect):null;this._resolveFocus(o);c('Arbiter').inform('ufi/didUpdate',{offsetY:r});},_getOffsetOfRender:function(o){if(!o)return null;var p=c('getElementPosition')(c('BlueBar').getMaybeFixedRoot()).height;if(o.bottom<p)return c('ReactDOM').findDOMNode(this).offsetHeight-o.height;return null;},_resolveFocus:function(o){if(this.props.loadingComments)return;if(this.props.inlineShare.toggling){var p=o&&o.inlineShare||{};c('CommentPrelude').expand(c('ReactDOM').findDOMNode(this),false,'ufi.react');if(!p.active&&!this.props.inlineShare.active)this.onComment();var q=this.props.inlineShare.active;if(q){var r=!p.loaded;setTimeout(function(){return this._focusInlineShare({shouldHighlight:r});}.bind(this),10);}c('UFIInstanceState').updateStateField(this.props.contextArgs.instanceid,'inlineShare','toggling',false);}if(this.state.focusReply){var s=this.state.focusReply,t=s.replyID,u=s.initiatorComment;if(!(t in this.refs))return;var v=this.refs[t]&&this.refs[t].refs&&this.refs[t].refs.mentionsinput;if(!v)return;v.focus();this.setState({focusReply:null});if(!u)return;var w=v.hasEnteredText(),x=u.author===this.props.feedback.actorforpost,y=!!u.parentcommentid;if(!w&&!x&&y)v.insertMention(this._createMentionEntry(u.author));}},_createMentionEntry:function(o){var p=this.props.authorProfiles[o],q=p.type;return new (c('SearchableEntry'))({uniqueID:p.id,title:p.name,type:q==='friend'?'user':q});},_isAds:function(){return this.props.source===j.ADS;},_showLikeSentenceOrderingModeSelector:function(){var o=this.props,p=o.hideOrderingModeSelector,q=o.feedback,r=o.commentCounts,s=o.contextArgs;return (!p&&q.orderingmodes&&r[s.ftentidentifier]>=c('UFIConstants').minCommentsForOrderingModeSelector);},_hasLikeSentenceRow:function(){var o=this.props,p=o.contextArgs,q=o.feedback;if(this._isAds()||p.search||this.hasReactions(q,p))return false;var r=q.likesentences,s=q.reactionsentences;return (r&&!c('isEmpty')(r.current)||c('dotAccess')(q,'reactionsentences.current.text',null)||q.seencount>0&&!p.entstream||this._showLikeSentenceOrderingModeSelector());},_hasShares:function(){var o=this.props,p=o.contextArgs,q=o.feedback;if(this._isAds())return false;return (p.showshares&&q.sharecount&&!this.hasReactions(q,p));},_hasShareRow:function(){return (this._hasShares()&&!this.props.contextArgs.entstream);},_hasComments:function(){if(this._isAds())return false;var o=this.props.availableComments;return !!(o&&o.length);},_hasAddCommentView:function(){var o=this.props,p=o.canAddCommentMap,q=o.contextArgs,r=o.feedback;return (r.cancomment&&q.showaddcomment&&r.actorforpost&&p[q.ftentidentifier]);},_hasAddCommentLink:function(){return (this._hasAddCommentView()&&this._hasCommentOrderInverted()&&this.props.hasPagedToplevel);},_hasAddCommentDisabledNotice:function(){var o=this.props.feedback;return o.arecommentsdisabled===true&&o.cancomment===false;},_renderShareRow:function(){if(!this._hasShareRow())return null;var o=this.props,p=o.commentCounts,q=o.contextArgs,r=o.deletedCounts,s=o.feedback,t=q.isPermalink,u=q.hasReactions,v=q.ftentidentifier,w=s.commentcountreduced,x=null;if(this._hasComments()&&t)if(w&&isNaN(w)){x=w;}else if(p&&r&&v&&v in p&&v in r)x=p[v]-r[v];return (c('React').createElement(c('UFIShareRow.react'),{contextArgs:q,feedback:s,shownCommentCount:x}));},render:function(){var o=this.props,p=o.feedback,q=o.contextArgs,r=this._hasLikeSentenceRow(),s=this._hasAddCommentDisabledNotice(),t=this._hasShares(),u=o.inlineShare.message?c('React').createElement(c('UFIInlineShareConfirmation.react'),o.inlineShare):null,v=null;if(r)v=c('React').createElement(c('UFILikeSentence.react'),{contextArgs:o.contextArgs,feedback:o.feedback,showOrderingModeSelector:this._showLikeSentenceOrderingModeSelector()});var w=s?c('React').createElement(c('UFICommentDisabledNotice.react'),{feedback:o.feedback}):null,x=this._renderShareRow();if(o.loadingComments)return (c('React').createElement(c('UFIContainer.react'),{hasNub:false},u,v,x,m));var y=this._hasComments(),z=o.ranges[q.ftentidentifier],aa=o.loggingOffset-z.getOffset(),ba=y?this.renderCommentArray(o.availableComments,aa,false,null):null,ca=null,da=p.cancomment,ea=r||t||y||da,fa=ea?c('React').createElement(c('UFICommentHeader.react'),null):null;if(this._hasAddCommentView()){q.orderingmodes=p.orderingmodes;var ga=!this._shouldShowCommentInput(q,y);if(!ga)ca=c('React').createElement(c('UFIAddComment.react'),{viewerActorID:p.actorforpost,replyCommentID:null,targetID:p.ownerid,initialData:null,ref:'toplevelcomposer',withoutSeparator:null,editingComment:{},isEditing:false,mentionsDataSource:p.mentionsdatasource,showSendOnEnterTip:p.showsendonentertip,allowVideoAttachments:p.allowvideoattachments&&!q.isstreaming,allowPhotoAttachments:p.allowphotoattachments&&!q.isstreaming,allowStickerAttachments:p.allowstickerattachments&&!q.isstreaming,contextArgs:q,subtitle:p.subtitle,isQAndA:p.isqanda,markViewerHasInteracted:function(){if(!this.state.viewerHasClickedCommentComposer)this.setState({viewerHasClickedCommentComposer:true});}.bind(this)});}var ha=this.renderPagers(q.ftentidentifier,false,o.ranges[q.ftentidentifier].getOffset(),o.ranges[q.ftentidentifier].getLength()),ia=ha.topPager,ja=ha.bottomPager,ka=c('UFIComponents').applyToUFIComponents([ia].concat(ba,[ja]),{isFirstCommentComponent:true},{isLastCommentComponent:true}),la=ka.slice(0,1);ia=la[0];var ma=ka.slice(-1);ja=ma[0];ba=ka.slice(1,-1);var na=this._hasCommentOrderInverted()?ca:null,oa=this._hasCommentOrderInverted()?null:ca,pa=this._hasAddCommentLink()?c('React').createElement(c('UFIAddCommentLink.react'),{onClick:this.onComment,isQAndA:p.isqanda}):null;ka=c('UFIComponents').applyToUFIComponents([u,v,x,na,ia].concat(ba,[ja,oa,pa]),{isFirstComponent:true},{isLastComponent:true});var qa=ka.slice(0,5);u=qa[0];v=qa[1];x=qa[2];na=qa[3];ia=qa[4];var ra=ka.slice(-3);ja=ra[0];oa=ra[1];pa=ra[2];ba=ka.slice(5,-3);if(o.inlineShare.active){return (c('React').createElement(c('UFIContainer.react'),{hasNub:false},c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('span',null),bootloadLoader:c('JSResource')('ShareDialog.react')},o.inlineShare.props,{onCancel:function(){return this._resetInlineShare();}.bind(this),onPost:function(sa){c('Bootloader').loadModules(["ShareDialogOsricController"],function(ta){ta.onPost(sa,this._beforePostInlineShare,this._onInlineShareSuccess,this._onInlineShareError);}.bind(this));}.bind(this),ref:'inlineShare',renderInline:true,status:o.inlineShare.status}))));}else return (c('React').createElement(c('UFIContainer.react'),{hasNub:!!(q.shownub&&ea)},u,v,x,fa,na,c('React').createElement(c('UFICommentScrollableArea.react'),{contextArgs:q},c('React').createElement(c('UFIComponentLogger.react'),{feedback:p,hasComments:y,isPermalink:q.isPermalink,orderingMode:o.orderingMode,viewerHasInteractedWithComments:this.props.viewerHasInteractedWithComments||this.state.viewerHasClickedCommentComposer||this.state.viewerHasClickedSeeMore},ia,ba,ja)),oa,pa,w));},_shouldShowCommentInput:function(o){var p=c('UFIInstanceState').getKeyForInstance(o.instanceid,'isediting');if(p)return false;if(this._hasComments())return true;var q=c('UFIInstanceState').getKeyForInstance(o.instanceid,'addCommentInput'),r=q?q.expanded:false;if(r)return true;if(o.feedcontext)var s=JSON.parse(o.feedcontext).location_type;return s!==c('FBFeedLocations').REVIEWS_FEED;},_focusInlineShare:function(o){o=o||{};var p=c('ReactDOM').findDOMNode(this.refs.inlineShare);if(!this.props.inlineShare.messageOnly)c('focusWithinLayer')(p);if(!this.props.contextArgs.ufiexperiments.inlineShareHighlight)return;c('DOMScroll').ensureVisible(p);if(o.shouldHighlight)c('Bootloader').loadModules(["highlight"],function(q){c('CSS').addClass(p,"_5p5");var r=function(){c('CSS').removeClass(p,"_5p5");};q(p,r,'#f6f7f8');});},renderCommentArray:function(o,p,q,r){var s=this.props,t=s.contextArgs,u=this.props.feedback;if(!o.length)return [];var v=c('UFIInstanceState').getKeyForInstance(t.instanceid,'editcommentid'),w=c('UFICommentFilters').collectSpamBuckets(o,s.authorProfiles);return w.reduce(function(x,y,z){if(!y)return x;if(c('UFICommentFilters').isSpam(y)){x.push(c('React').createElement(c('UFISpamPlaceholderContainer.react'),{key:'spam'+y.id,ftentidentifier:t.ftentidentifier,viewas:t.viewas,comment:y,parentCommentID:r}));}else{if(y.id==v){x.push(this.renderEditCommentBox(y));}else{var aa=Math.max(p-z,0),ba=z===0,ca=z===w.length,da=!q&&!u.arecommentsdisabled,ea=q&&!ba;x.push(this.renderComment(y,aa,ba,ca,da,ea));}if(!q&&!c('UFICommentFilters').isDeleted(y)){var fa=this.renderReplyContainer(y);if(fa)x.push(fa);}}return x;}.bind(this),[]);},renderReplyContainer:function(o){var p=this.props,q=p.commentCounts[o.id],r=p.repliesExpandedMap[o.id],s=!r&&o.interestingReplyId,t=p.ranges[o.id],u,v;if(r||o.interestingReplyId){u=p.repliesMap[o.id];v=t.getOffset();if(s){var w=u.filter(function(ra){return ra.id===o.interestingReplyId;});if(w.length!==1){c('LogHistory').getInstance('ufi').error('comment '+o.id+' claims to have an interesting reply, '+'but there is not exactly 1 comment with that id in the reply '+'list.');u=null;}else{u=w;v=o.interestingReplyOffset;}}}var x;if(u){var y=t.getOffset(),z=t.getLength();if(s){y=v;z=1;}var aa=this.renderPagers(o.id,true,y,z),ba=aa.topPager,ca=aa.bottomPager,da=p.loggingOffset-v;x=this.renderCommentArray(u,da,true,o.id);}var ea=Math.max(q-o.spamreplycount,0),fa;if(ea&&(r&&u&&u.length>p.replySocialSentenceMaxReplies||!r&&!u)){var ga=t.isLoadingPrev()||t.isLoadingNext(),ha=r&&!ba&&ga,ia=null;if(o.replyauthors&&o.replyauthors.length)ia=p.authorProfiles[o.replyauthors[0]];fa=c('React').createElement(c('UFIReplySocialSentence.react'),{contextArgs:p.contextArgs,author:ia,replies:r?u.length:ea,timestamp:o.recentreplytimestamp,onClick:function(){return this.context.dispatch(c('UFIStoryAction').toggleReplies(o.id));}.bind(this),isLoading:ha,isExpanded:r,showVerified:p.feedback.showfeaturedreplies,orderingMode:p.orderingMode});}var ja;if(r)if(o.cancomment&&p.canAddCommentMap[o.id]){var ka=false;if(x)for(var la=x.length-1;la>=0;la--)if(x[la]){ka=x[la].props.isAuthorReply;break;}ja=this.renderReplyComposer(o,!ka);}var ma;if(fa||ba||x||ca||ja){var na=c('UFIComponents').applyToUFIComponents([fa,ba].concat(x,[ca,ja]),{isFirstComponent:true},{isLastComponent:true}),oa=na.slice(0,2);fa=oa[0];ba=oa[1];var pa=na.slice(-2);ca=pa[0];ja=pa[1];x=na.slice(2,-2);var qa=o.status===k.LIVE_DELETED;ma=c('React').createElement(c('UFIContainer.react'),{key:'replies'+o.id,isParentLiveDeleted:qa,isReplyList:true},fa,ba,x,ca,ja);}return ma;},renderReplyComposer:function(o,p){var q=this.props,r=q.contextArgs,s=q.feedback,t=c('UFIInstanceState').getKeyForInstance(r.instanceid,'isediting')&&!o.id;if(t)return null;return (c('React').createElement(c('UFIAddComment.react'),{viewerActorID:s.actorforpost,replyCommentID:o.id,targetID:s.ownerid,initialData:null,ref:'replycomposer-'+o.id,withoutSeparator:p,editingComment:{},isEditing:false,mentionsDataSource:s.mentionsdatasource,showSendOnEnterTip:false,allowVideoAttachments:s.allowvideoattachments&&!r.isstreaming,allowPhotoAttachments:s.allowphotoattachments&&!r.isstreaming,allowStickerAttachments:s.allowstickerattachments&&!r.isstreaming,contextArgs:r,subtitle:s.subtitle,isQAndA:s.isqanda}));},renderEditCommentBox:function(o){var p=this.props,q=p.contextArgs,r=p.feedback,s={mentionsinput:q.mentionsinput};return (c('React').createElement(c('UFIAddComment.react'),{key:'comment'+o.id,viewerActorID:r.actorforpost,targetID:r.ownerid,mentionsDataSource:r.mentionsdatasource,contextArgs:s,isEditing:true,editingComment:o,allowVideoAttachments:r.allowvideoattachments,allowPhotoAttachments:r.allowphotoattachments,allowStickerAttachments:r.allowstickerattachments,isQAndA:r.isqanda}));},renderComment:function(o,p,q,r,s,t){var u=this.props,v=u.feedback,w=v.actorforpost===o.author,x=c('UFIInstanceState').getKeyForInstance(u.contextArgs.instanceid,'locallycomposed'),y=o.islocal||x&&x[o.id],z=v.showremovemenu||v.viewerid===o.author,aa=v.canremoveall&&v.isownerpage&&!w,ba=u.source!=j.INTERN,ca=!!o.parentcommentid,da=true;if(ca&&o.parentcommentid in this.props.canReplyMap&&this.props.canReplyMap[o.parentcommentid]!==null)da=this.props.canReplyMap[o.parentcommentid];var ea=!!o.isfeatured,fa=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.COMMENT,p),ga=new (c('URI'))(u.commentPermalinks[o.id]).addQueryData({comment_tracking:fa}).toString();return (c('React').createElement(c('UFIComment.react'),{key:'comment'+o.id,isFirst:q,isLast:r,showReplyLink:s,hasPartialBorder:t,comment:o,authorProfiles:u.authorProfiles,viewerIsAuthor:w,feedback:v,'data-ft':fa,contextArgs:u.contextArgs,hideAsSpamForPageAdmin:aa,isLocallyComposed:y,isFeatured:ea,parentCanComment:da,permalink:ga,showPermalink:ba,showRemoveReportMenu:z,focusOnMount:o.id===u.commentIDToFocusOnMount,shouldLogVPVs:u.shouldLogVPVs,orderingMode:u.orderingMode,markViewerHasInteracted:function(){if(!this.state.viewerHasClickedSeeMore)this.setState({viewerHasClickedSeeMore:true});}.bind(this)}));},renderPagers:function(o,p,q,r){var s=this.props.commentCounts[o],t=r==s;if(t||this._isAds()||!p&&this.props.hideToplevelPager)return {topPager:null,bottomPager:null};return c('UFIPagerGenerator').renderPagers(this.props,o,q,r,function(u,v){return this.context.dispatch(c('UFIStoryAction').pageInComments(o,u,v));}.bind(this));},loadMoreComments:function(){if(this.isMounted()&&this.refs.topLevelBottomPager&&!(this.props.contextArgs.ftentidentifier in this.props.isActiveLoading)){var o=c('ReactDOM').findDOMNode(this.refs.topLevelBottomPager),p=c('getUnboundedScrollPosition')(window).y,q=p+document.documentElement.clientHeight+c('UFIConstants').infiniteScrollRangeForQANDAPermalinks;if(o.offsetHeight&&o.offsetTop<q)this.refs.topLevelBottomPager.props.onPagerClick();}},onComment:function(){var o=null;if(this.refs.toplevelcomposer){this.refs.toplevelcomposer.focus();o=c('ReactDOM').findDOMNode(this.refs.toplevelcomposer);}else{var p=c('ReactDOM').findDOMNode(this),q=c('Parent').byTag(p,'form');o=this._findComposerNode(q);if(!o){var r=c('Parent').bySelector(p,"._3g6d");o=this._findComposerNode(r);}o&&o.focus();}c('FbFeedCommentUFIScroller').reveal(o);},_findComposerNode:function(o){return c('DOM').scry(o,'[name="add_comment_text_text"]').concat(c('DOM').scry(o,'[name="add_comment_text"]')).find(function(p){return !c('Parent').byClass(p,'UFIReplyList');});},_beforePostInlineShare:function(){c('UFIInstanceState').updateStateField(this.props.contextArgs.instanceid,'inlineShare','status',{type:'posting'});},_onInlineShareSuccess:function(o){var p=o.payload.message||c('ShareNowConstants').success;this._resetInlineShare({message:p,isError:false});},_onInlineShareError:function(o){var p=o.errorDescription||c('ShareNowConstants').error;this._resetInlineShare({message:p,isError:true});},_resetInlineShare:function(o){c('UFIInstanceState').updateState(this.props.contextArgs.instanceid,'inlineShare',o||{});},_hasCommentOrderInverted:function(){return c('UFICommentOrdering').inverted(this.props.orderingMode);},hasReactions:function(o,p){return (o.displayreactions&&p.hasReactions&&p.feedbackMode==='none');}});f.exports=n;},null);
__d('UFIActionLinks.react',['cx','fbt','BootloadedComponent.react','FBFeedLocations','JSResource','Parent','React','UFIBling.react','UFICommentActionLink.react','UFILikeActionLink.react','UFIPrivateReplyLink.react','UFIShareActionLink.react','URI','joinClasses'],function a(b,c,d,e,f,g,h,i){'use strict';var j,k;if(c.__markCompiled)c.__markCompiled();j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.renderActorSelector=function(){var m=this.props.contextArgs.actorSelectorConfig;if(!m)return null;var n=m.props;n.nuxHoverContext=c('Parent').byTag(this.refs.root,'form');var o=m.module;return (c('React').createElement('div',{className:"_40yk"+(this.props.contextArgs.hasReactions?' '+"_pbn":'')},c('React').createElement(o,n)));};l.prototype.renderActionList=function(){var m=[this.renderLikeLink(),this.renderCommentLink(),this.renderShareLink(),this.renderMessageLink(),this.renderPrivateReplyLink(),this.renderTranslateLink()].map(function(n,o){return n&&c('React').createElement('span',{key:o},n);});return (c('React').createElement('div',{className:"_42nr"},m));};l.prototype.renderBling=function(){if(this.props.contextArgs.showBling)return (c('React').createElement(c('UFIBling.react'),{contextArgs:this.props.contextArgs,feedbackTarget:this.props.feedbacktarget,onCommentVisibilityChanged:this.props.visibilityTogglerCallback}));return null;};l.prototype.renderLikeLink=function(){var m=this.props,n=m.contextArgs,o=m.feedbacktarget,p=n.loggedOutLinkConfig;if(!o.hasviewerliked&&!o.viewercanlike&&!(p&&p.showLikeLink))return null;return (c('React').createElement(c('UFILikeActionLink.react'),{feedback:o,contextArgs:n}));};l.prototype.renderCommentLink=function(){var m=this.props.contextArgs.loggedOutLinkConfig;if(!this.props.feedbacktarget.cancomment&&!(m&&m.showCommentLink)){var n=this.props.contextArgs.disabledCommentTooltip;if(n)return (c('React').createElement('span',null,c('React').createElement('span',{className:"_1ysv",'data-hover':'tooltip','data-tooltip-content':n},i._("Comment"))));return null;}return (c('React').createElement(c('UFICommentActionLink.react'),{contextArgs:this.props.contextArgs}));};l.prototype.renderShareLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m)return null;var n=this.props.contextArgs.loggedOutLinkConfig;if(n&&n.showShareLink)m.shareURI=n.shareAjaxifyURI;return (c('React').createElement(c('UFIShareActionLink.react'),babelHelpers['extends']({feedbackTarget:this.props.feedbacktarget,ufiInstanceID:this.props.contextArgs.instanceid},m)));};l.prototype.renderMessageLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(!m||!m.messageURI)return null;return (c('React').createElement('a',{ajaxify:new (c('URI'))(m.messageURI).addQueryData({ufi_id:this.props.contextArgs.instanceid}),className:"_2fiv",href:'#',rel:m.shareRel},i._("Message")));};l.prototype.renderPrivateReplyLink=function(){var m=this.props.contextArgs.shareLinkConfig;if(m&&m.messageURI)return null;var n=this.props,o=n.contextArgs,p=n.feedbacktarget,q=p.actorforpost,r=p.messagereplycontext;if(!c('UFIPrivateReplyLink.react').willRender(r,q))return null;return (c('React').createElement(c('UFIPrivateReplyLink.react'),{actorID:q,activityID:o.ftentidentifier,context:r,seeResponseLabel:false}));};l.prototype.renderTranslateLink=function(){var m=this.props.contextArgs.translationDialogURI;if(!m)return null;return (c('React').createElement('a',{href:m,rel:'dialog'},i._("Translate")));};l.prototype.renderSearchFeedback=function(){var m=this.props.contextArgs.inlineSearchFeedbackConfig;if(!m)return null;return (c('React').createElement(c('BootloadedComponent.react'),babelHelpers['extends']({bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('InlineFeedback.react')},m)));};l.prototype.renderCommentOrderingModeSelector=function(){if(!this.props.showCommentOrderingModeSelector)return null;return (c('React').createElement('div',{className:"_3csb"},c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelector.react'),feedback:this.props.feedbacktarget,onOrderChanged:this.props.onCommentOrderingModeSelectorChange})));};l.prototype.renderLayout=function(m,n,o){n=n.map(function(p,q){return p&&c('React').createElement('div',{className:"_3m9g",key:q},p);}).filter(function(p){return p;});if(!m&&n.length===0)return null;return (c('React').createElement('div',{className:c('joinClasses')("_3399",o)},n,c('React').createElement('div',{className:"_524d"},m)));};l.prototype.shouldRenderActionButtons=function(){var m=null;if(this.props.contextArgs.feedcontext)try{m=JSON.parse(this.props.contextArgs.feedcontext).location_type;}catch(n){}if(m===c('FBFeedLocations').GOODWILL_THROWBACK_PERMALINK||m===c('FBFeedLocations').GOODWILL_THROWBACK_PROMOTION||m===c('FBFeedLocations').GOODWILL_THROWBACK_SHARE)return false;return true;};l.prototype.hasCounts=function(){return this.props.feedbacktarget.commentcountreduced||this.props.feedbacktarget.sharecountreduced||this.props.feedbacktarget.seencount||this.props.contextArgs.viewCount;};l.prototype.render=function(){var m=this.renderActorSelector(),n=this.renderSearchFeedback(),o=[],p=[],q=null,r=this.renderBling();if(r){p.push(m);if(this.hasCounts()){q=this.renderLayout(null,[n],"_1f6t");}else p.push(n);}else{o.push(m);o.push(n);}o.push(this.renderCommentOrderingModeSelector());var s="_1f6t"+(this.props.contextArgs.hasReactions?' '+"_4_dr":''),t=this.shouldRenderActionButtons()?this.renderLayout(this.renderActionList(),o,"_a7s clearfix"):null;return (c('React').createElement('div',{ref:'root'},q,this.renderLayout(r,p,s),t));};function l(){j.apply(this,arguments);}f.exports=l;},null);
__d('UFICallbackStore',['FluxStore'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('FluxStore'));i=h&&h.prototype;j.prototype.__onDispatch=function(k){var l=k.type,m=babelHelpers.objectWithoutProperties(k,['type']);this.__emitter.emit(l,m);};j.prototype.on=function(k,l){return this.__emitter.addListener(k,l);};j.prototype.remove=function(){this.__emitter.removeAllListeners();};function j(){h.apply(this,arguments);}f.exports=j;},null);
__d('BaseGraphQLSubscription',['BanzaiLogger','CurrentUser','CurrentLocale','RTISubscriptionManager'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={subscribe:function(i,j){var k={transformContext:JSON.stringify(this._getTransformContext(i))};this._logEvent('subscribe');return c('RTISubscriptionManager').subscribe(this._getTopic(i),function(l){j(JSON.parse(l.payload));},k);},_getTransformContext:function(i){var j=155160167952447;return {viewerID:c('CurrentUser').getID(),appID:j,locale:c('CurrentLocale').get(),queryID:this._getQueryID(),serializedQueryParameters:JSON.stringify(this._getQueryParameters(i))};},_logEvent:function(i){c('BanzaiLogger').log('GraphQLSubscriptionsLoggerConfig',{mechanism:'skywalker',subscription_call:this._getSubscriptionCallName(),event:i});}};f.exports=h;},null);
__d("XWebGraphQLQueryController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/webgraphql\/query\/",{query_id:{type:"String"},variables:{type:"String"}});},null);
__d("CommentLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1710550109168151";}};f.exports=h;},null);
__d('UFICommentLikeSubscription',['CommentLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_like_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),top_level_feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_like_subscribe';}});f.exports=h;},null);
__d("CommentCreateSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1719914614898367";}};f.exports=h;},null);
__d('UFICommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/comment_create_subscribe/top_level_feedback_id_'+i;},_getQueryID:function(){return c('CommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'comment_create_subscribe';}});f.exports=h;},null);
__d('UFIFeaturedReplyCommentList',['UFIReplyCommentList','UFIConstants'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIReplyCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};function j(k,l,m,n){i.constructor.call(this,k,l,c('UFIConstants').UFICommentOrderingMode.FEATURED);var o=0,p=m.length;this.updateCommentCount(p);this.addCommentIDs(o,p,m);var q={};n.forEach(function(r){q[r.id]=r;});m.forEach(function(r){this.addOrUpdateComment(q[r]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeaturedToplevelCommentList',['UFIConstants','UFIToplevelPagedCommentList'],function a(b,c,d,e,f,g){'use strict';var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('UFIToplevelPagedCommentList'));i=h&&h.prototype;j.getCommentList=function(k,l){};j.getCommentListsForFeedbackTargetID=function(k){};j.getCommentListForFeedbackTargetID_UNSAFE=function(k){};j.resetCommentListsForFeedbackTargetID=function(k){};function j(k,l,m){i.constructor.call(this,k,c('UFIConstants').UFICommentOrderingMode.FEATURED);var n=0,o=l.length;this.updateCommentCount(o);this.addCommentIDs(n,o,l);var p={};m.forEach(function(q){p[q.id]=q;});l.forEach(function(q){this.addOrUpdateComment(p[q]);}.bind(this));}j.prototype.fetchComments=function(k,l,m){};f.exports=j;},null);
__d('UFIFeedbackFilters',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={getRequestedIDs:function(i){var j=[];if(i.reactorids)j=j.concat(i.reactorids);if(i.actorforpost)j=j.concat(i.actorforpost);return j;}};f.exports=h;},null);
__d('UFIRange',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();function h(i,j){this.offset=i||0;this.length=j||0;this.requestedOffset=this.offset;this.requestedLength=this.length;}h.prototype.getOffset=function(){return this.offset;};h.prototype.getLength=function(){return this.length;};h.prototype.getRequestedOffset=function(){return this.requestedOffset;};h.prototype.getRequestedLength=function(){return this.requestedLength;};h.prototype.updateRequestedRange=function(i,j){this.requestedOffset=i;this.requestedLength=j;return this;};h.prototype.isLoadingNext=function(){var i=this.requestedOffset+this.requestedLength,j=this.offset+this.length;return i>j;};h.prototype.isLoadingPrev=function(){return this.requestedOffset<this.offset;};h.combine=function(i,j){if(!j)return i;var k=Math.min(i.getOffset(),j.getOffset()),l=Math.max(i.getLength(),j.getLength()),m=new h(k,l);if(j.getRequestedLength()>0){var n=Math.min(k,j.getRequestedOffset()),o=Math.max(k+l,j.getRequestedOffset()+j.getRequestedLength());m.updateRequestedRange(n,o-n);}return m;};f.exports=h;},null);
__d('UFIFetcher',['Promise','ShortProfiles','UFIPagedCommentList','UFIRange','UFIFeedbackTargets','getObjectValues'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={fetchNewFeedbackTarget:function(i){return new (c('Promise'))(function(j,k){return (c('UFIFeedbackTargets').getFeedbackTarget(i,j));});},fetchShortProfiles:function(i){return new (c('Promise'))(function(j,k){return (c('ShortProfiles').getMulti(i,j));});},fetchComments:function(i,j,k){return new (c('Promise'))(function(l,m){return (i.getComments(j.getOffset(),j.getLength(),k,l));}).then(function(l){return c('getObjectValues')(l);});}};f.exports=h;},null);
__d("FeedbackLikeSubscriptionWebGraphQLQuery",["XWebGraphQLQueryController"],function a(b,c,d,e,f,g){"use strict";if(c.__markCompiled)c.__markCompiled();var h={getURI:function(i){return c("XWebGraphQLQueryController").getURIBuilder().setString('query_id',this.getQueryID()).setString('variables',JSON.stringify(i)).getURI();},getQueryID:function(){return "1710550255834803";}};f.exports=h;},null);
__d('UFILikeSubscription',['FeedbackLikeSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/feedback_like_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('FeedbackLikeSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'feedback_like_subscribe';}});f.exports=h;},null);
__d("XLiveStreamingCommentsAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/videos\/livecomments\/",{eft_id:{type:"String",required:true}});},null);
__d('UFILiveStreamingComments',['AsyncRequest','BanzaiODS','Map','Set','UFICentralUpdates','UFIConfig','UFIConstants','UFIToplevelPagedCommentList','XLiveStreamingCommentsAsyncController','clearInterval','setInterval'],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h=new (c('Map'))();function i(k,l,m){this.eftID=k;this.totalCommentCount=l;this.tailCommentFBID=m;this.queue=[];this.localCommentBodies=new (c('Set'))();this.errorCount=0;this.interval=c('setInterval')(function(){if(this.queue.length>c('UFIConfig').facecastWWWCommentQueueThreshold){this.renderNextComment();return;}new (c('AsyncRequest'))().setURI(this.getNextURI()).setHandler(function(n){switch(n.payload.status){case 'streaming':this.enqueueMoreComments(n.payload);this.renderNextComment();this.errorCount=0;return;case 'not-streaming':c('clearInterval')(this.interval);return;case 'transient-error':return;case 'error':this.renderNextComment();this.errorCount+=1;if(this.errorCount===1)c('BanzaiODS').bumpEntityKey('streaming_comments','first_streaming_comments_error');if(this.errorCount===5){c('BanzaiODS').bumpEntityKey('streaming_comments','too_many_streaming_comments_errors');c('clearInterval')(this.interval);return;}break;}}.bind(this)).send();}.bind(this),2000);c('UFICentralUpdates').subscribe('update-comments',function(n,o){if(o.comments&&o.comments.length)o.comments.forEach(function(p){if(p.parentcommentid)return;if(p.islocal)this.trackLocalComment(p);}.bind(this));}.bind(this));}i.prototype.enqueueMoreComments=function(k){if(!k.ufipayloads||isNaN(k.commentcount))return;var l=k.ufipayloads.filter(function(o){return !this.resemblesLocalComment(o.comments[0]);}.bind(this)),m=-1;if(this.tailCommentFBID!==null)m=l.findIndex(function(o){return o.comments[0].fbid===this.tailCommentFBID;}.bind(this),this);if(m===-1){this.queue=l;}else this.queue=this.queue.concat(l.slice(m+1));if(this.queue.length>0)this.tailCommentFBID=this.queue[this.queue.length-1].comments[0].fbid;var n=k.commentcount-this.queue.length;if(n>this.totalCommentCount)this.totalCommentCount=n;if(c('UFIConfig').showAccurateStreamingCommentCount)c('UFIToplevelPagedCommentList').getCommentList(this.eftID,c('UFIConstants').UFICommentOrderingMode.LIVE_STREAMING).updateOverriddenDisplayCount(this.totalCommentCount);};i.prototype.renderNextComment=function(){if(this.queue.length===0)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,this.queue.shift());};i.prototype.getNextURI=function(){return c('XLiveStreamingCommentsAsyncController').getURIBuilder().setString('eft_id',this.eftID).getURI();};i.prototype.trackLocalComment=function(k){var l=i.hashCommentData(k);this.localCommentBodies.add(l);};i.prototype.resemblesLocalComment=function(k){var l=i.hashCommentData(k);return this.localCommentBodies.has(l);};i.prototype.stopInterval=function(){c('clearInterval')(this.interval);};i.hashCommentData=function(k){var l=k.author+k.body.text;if(k.attachment)l+=':'+k.attachment.fbid;return l;};var j={start:function(k,l,m){if(h.get(k))return;h.set(k,new i(k,l,m));},stop:function(k){var l=h.get(k);if(!l)return;l.stopInterval();}};f.exports=j;},null);
__d('UFILiveVideoCommentSubscription',['CommentCreateSubscriptionWebGraphQLQuery','BaseGraphQLSubscription','uuid'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=babelHelpers['extends']({},c('BaseGraphQLSubscription'),{_getTopic:function(i){return 'gqls/live_video_comment_create_subscribe/feedback_id_'+i;},_getQueryID:function(){return c('CommentCreateSubscriptionWebGraphQLQuery').getQueryID();},_getQueryParameters:function(i){return {input:JSON.stringify({client_subscription_id:c('uuid')(),feedback_id:i})};},_getSubscriptionCallName:function(){return 'live_video_comment_create_subscribe';}});f.exports=h;},null);
__d('UFIRetryActions',['JSLogger','UFICentralUpdates','UFIConstants','UFIUserActions'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=c('JSLogger').create('UFIRetryActions');function i(l,m){var n={actiontype:c('UFIConstants').UFIActionType.DELETE_COMMENT,commentid:l.id};c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.USER_ACTION,{actions:[n]});var o=l.body.text,p=l.body.mentionstext;m.replyid=l.parentcommentid;m.attachedphoto=l.body.mentionsphoto;m.attachedvideo=l.body.mentionsvideo;c('UFIUserActions').addComment(l.ftentidentifier,o,p,m);}function j(l,m){var n=l.body.text,o=l.body.mentionstext;m.attachedPhoto=l.body.mentionsphoto;m.attachedSticker=l.attachment;m.attachedVideo=l.body.mentionsvideo;c('UFIUserActions').editComment(l.id,n,o,m);}var k={retrySubmit:function(l,m){switch(l.status){case c('UFIConstants').UFIStatus.FAILED_ADD:i(l,m);break;case c('UFIConstants').UFIStatus.FAILED_EDIT:j(l,m);break;default:h.error('retrysubmitstatus',{status:l.status});break;}}};f.exports=k;},null);
__d('UFISubscriptionUpdates',['fbt','BanzaiODS','LiveWWWFeedbackTypedLogger','UFICentralUpdates','UFIConstants','UFIReactionsUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();c('BanzaiODS').setEntitySample('feedback',.0001);function i(k,l,m){new (c('LiveWWWFeedbackTypedLogger'))().setMechanism('graphql_subscriptions').setEvent('receive_payload').setUpdateType(k).setTimeSinceSub(l).updateData(m?m:{}).log();}var j={handleLiveLike:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_like_received');i('like',m);if(!l||!l.feedback_like_subscribe)return;var n=l.feedback_like_subscribe.feedback,o=l.feedback_like_subscribe.liker;if(!n||!o)return;var p=[babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.LIKE_ACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,likesentences:{current:n.does_viewer_like?n.viewer_likes_sentence:n.viewer_does_not_like_sentence,alternate:n.does_viewer_like?n.viewer_does_not_like_sentence:n.viewer_likes_sentence},hasviewerliked:n.does_viewer_like,likecount:n.likers.count},{})],q=n.reactions_summary;if(q){var r=c('UFIReactionsUtils').getReactionCountMapFromSummary(n.reactions_summary),s=n.viewer_feedback_reaction_info?n.viewer_feedback_reaction_info.key:0,t=n.reaction_count_reduced?n.reaction_count_reduced:n.reactors.count;p.push(babelHelpers['extends']({actiontype:c('UFIConstants').UFIActionType.REACTION,actorid:o.id,clientid:l.feedback_like_subscribe.client_mutation_id,entidentifier:k,viewerreaction:s,reactioncount:n.reactors.count,reactioncountreduced:t,reactioncountmap:r,reactionsentences:{current:s?n.viewer_likes_reaction_sentence:n.viewer_does_not_like_reaction_sentence,alternate:s?n.viewer_does_not_like_reaction_sentence:n.viewer_likes_reaction_sentence}},{}));}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:p});},handleLiveComment:function(k,l,m){c('BanzaiODS').bumpEntityKey('feedback','gql_comment_received');var n=l&&l.comment_create_subscribe&&l.comment_create_subscribe.comment;if(!n)return;i('comment',m,{comment_id:n.legacy_token});var o=babelHelpers['extends']({author:n.author.id,body:n.body,cancomment:n.feedback.can_viewer_comment,canedit:n.can_viewer_edit,canremove:n.can_viewer_delete,clientid:l.comment_create_subscribe.client_mutation_id,ftentidentifier:k,id:n.legacy_token,fbid:n.legacy_fbid,legacyid:n.legacy_fbid,timestamp:{time:n.created_time,text:h._("a few seconds ago")},hasviewerliked:n.feedback.does_viewer_like,isfeatured:n.is_featured,istranslatable:n.translation_available_for_viewer,likecount:n.feedback.likers.count,viewercanlike:n.feedback.can_viewer_like,parentcommentid:n.comment_parent&&n.comment_parent.legacy_token,spamreplycount:0},{});if(n.attachments.length){var p=n.attachments[0],q=p.style_list;if(q&&q.length&&q[0]=='sticker'){var r=p.target;o.attachment={fbid:r.id,metadata:{source_uri:r.img.uri,source_uri_2x:r.img_2x.uri,width:r.img.width,height:r.img.height,frameCount:r.frame_count,frameRate:r.frame_rate,framesPerCol:r.frames_per_column,framesPerRow:r.frames_per_row,sprite_uri:r.sprite_img&&r.sprite_img.uri,sprite_uri_2x:r.sprite_img_2x&&r.sprite_img_2x.uri},type:'sticker'};}else if(q&&q.length&&q[0]=='photo'){var s=p.target;o.attachment={fbid:s.id,metadata:{preview_uri:s.photo_img&&s.photo_img.uri,width:s.photo_img.width,height:s.photo_img.height,url:s.url},type:'photo'};}else if(q&&q.length&&q[0]=='share'){p.type='live_share';o.attachment=p;}else if(q&&q.length&&q[0]=='video_inline'){p.type='video';o.attachment=p;}else if(q&&q.length&&q[0]=='comment_place_info'){p.type=q[0];o.attachment=p;}}c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{comments:[o]});},handleLiveCommentLike:function(k,l,m){i('comment_like',m);var n=l&&l.comment_like_subscribe&&l.comment_like_subscribe.feedback;if(!n)return;c('UFICentralUpdates').handleUpdate(c('UFIConstants').UFIPayloadSourceType.LIVE_SEND,{actions:[{actiontype:c('UFIConstants').UFIActionType.COMMENT_LIKE,clientid:l.comment_like_subscribe.client_mutation_id,commentid:n.legacy_comment_token,likecount:n.likers&&n.likers.count,viewerliked:n.does_viewer_like}]});}};f.exports=j;},null);
__d('UFIController',['csx','fbt','invariant','Promise','AsyncRequest','Arbiter','Bootloader','BootloadedComponent.react','CommentPrelude','DOM','DOMQuery','XCommentEmbedPluginEmbedAsyncDialogController','JSResource','LayerRemoveOnHide','LiveTimer','Parent','React','ReactDOM','Run','SubscriptionsHandler','StaticUFI.react','UFIActionLinkController','UFIActionLinks.react','UFIActionTypes','UFICallbackStore','UFICentralUpdates','UFICommentFilters','UFICommentLogger','UFIDispatcher','UFIDispatcherContext.react','UFIFeaturedReplyCommentList','UFIFeaturedToplevelCommentList','UFIFeedbackFilters','UFICommentSubscription','UFICommentLikeSubscription','UFICommentTemplates','UFIConfig','UFIConstants','UFIFeedbackTargets','UFIFetcher','UFIInstanceState','UFILikeSubscription','UFILiveStreamingComments','UFILiveVideoCommentSubscription','UFINewCommentNotifier','UFIRange','UFIReactionStore','UFIReplyCommentList','UFIRetryActions','UFIRootRegistry','UFIStoryAction','UFISubscriptionUpdates','UFIToplevelPagedCommentList','UFIUIEvents','UFIUserActions','URI','emptyFunction','flattenArray','forEachObject','isEmpty','onEnclosingPageletDestroy'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=c('UFIConstants').UFIPayloadSourceType,l=c('UFIConstants').UFIPaging,m=c('UFIConstants').UFIFeedbackMode,n=function(q,r,s,t){var u=q.getRequestedOffset(),v=q.getRequestedLength(),w=u+v===r,x=w&&o(t)?s-u:v;return new (c('UFIRange'))(u,x);},o=function(q){return q==k.USER_ACTION||q==k.LIVE_SEND;};p.preload=function(){};p.prototype.$UFIController1=function(q,r){if(!this.$UFIController2||r!==k.INITIAL_SERVER)return;this.$UFIController2.startRecording(q);};p.prototype.$UFIController3=function(q,r){if(!this.$UFIController2||r!==k.INITIAL_SERVER)return;var s=this.$UFIController4;this.$UFIController2.log(q,r,{num_comments:this.comments&&this.comments.length||0,num_likes:this.$UFIController5.feedback&&this.$UFIController5.feedback.likecount||0,features:{is_featured:!!this.$UFIController5.featuredCommentLists[s.ftentidentifier],is_streaming:this.$UFIController6(),is_lazy_fetch:s.lazyFetch,is_disable_css_hiding:s.disableCSSHiding}});};p.factory=function(q,r,s){new p(q,r,s);};function p(q,r,s){this.$UFIController2=c('UFIConfig').perfLogger?new (c('UFIConfig').perfLogger)(r.ftentidentifier):null;this.$UFIController1('construct',k.INITIAL_SERVER);this.$UFIController7();this.root=q;this.$UFIController4=r;this.$UFIController4.rootid=this.root.id;c('UFIRootRegistry').registerController(q.id,function(){this.$UFIController8();this.$UFIController9();}.bind(this));this.$UFIController10=function(){if(!this.$UFIController11){var da=c('UFIRootRegistry').isSnowliftNode(this.root.id),ea=da?c('DOMQuery').scry(this.root,"^.fbPhotosSnowliftFeedback ._37uu"):c('DOMQuery').scry(this.root,"^form ._37uu");this.$UFIController11=ea&&ea[0]||null;}return this.$UFIController11;}.bind(this);var t=r.feedbackMode===m.NEVER||r.feedbackMode===m.NONE;this.$UFIController5={payloadSource:null,feedback:null,oldRange:{offset:0,length:0},commentIDToFocusOnMount:null,showLoadingUFI:false,isActiveLoading:{},requestedInitialComments:false,isHidden:t,viewerHasInteractedWithComments:false,commentPermalinks:{},deletedCounts:{},canAddCommentMap:{},canReplyMap:{},defaultRepliesExpandedMap:{},repliesExpandedMap:{},hasPagedToplevel:false,featuredCommentLists:{},toplevelPagerClickCounts:{},replyPagerClickCounts:{}};this.authorProfiles=[];this.commentcounts={};this.comments=[];this.repliesMap={};var u=s.feedbacktargets[0];this.orderingMode=u.defaultcommentorderingmode;this.onCommentOrderingModeSelectorChange=this.onCommentOrderingModeSelectorChange.bind(this);r.livevideographqlcomments=u.lvc;if(this.canRenderHeader()){this.renderHeader(u);}else new (c('UFIActionLinkController'))(q,r,u,this.$UFIController12.bind(this));var v=Date.now();if(u.ll)this.liveLikeSubscription=c('UFILikeSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveLike(r.ftentidentifier,da,Date.now()-v);});if(u.lc)this.liveCommentSubscription=c('UFICommentSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveComment(r.ftentidentifier,da,Date.now()-v);});if(u.lvc)this.liveVideoCommentSubscription=c('UFILiveVideoCommentSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveComment(r.ftentidentifier,da,Date.now()-v);});if(u.lcl)this.liveCommentLikeSubscription=c('UFICommentLikeSubscription').subscribe(u.targetfbid,function(da){c('UFISubscriptionUpdates').handleLiveCommentLike(r.ftentidentifier,da,Date.now()-v);});var w=null;if(s.featuredcommentlists&&s.featuredcommentlists.comments&&s.featuredcommentlists.comments[r.ftentidentifier]){w=s.featuredcommentlists.comments[r.ftentidentifier];this.$UFIController5.featuredCommentLists[r.ftentidentifier]=new (c('UFIFeaturedToplevelCommentList'))(r.ftentidentifier,w.values,s.comments);}else{var x=s.commentlists.comments,y=x[r.ftentidentifier];w=y[this.orderingMode];}this.ranges={};this.replyRanges={};this.commentcounts={};this.commentcounts[r.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.ranges[this.orderingMode]=new (c('UFIRange'))(w.range.offset,w.range.length);this.$UFIController5.oldRange={offset:w.range.offset,length:this.comments&&this.comments.length||0};var z,aa,ba;if(s.commentlists.replies)for(z=0;z<w.values.length;z++){aa=w.values[z];ba=s.commentlists.replies[aa];if(ba){this.commentcounts[aa]=this.getReplyCommentList(aa).getCommentCount();this.replaceReplyRange(aa,new (c('UFIRange'))(ba.range.offset,ba.range.length));}}if(s.featuredcommentlists)if(s.featuredcommentlists.replies)for(z=0;z<w.values.length;z++){aa=w.values[z];ba=s.featuredcommentlists.replies[aa];if(ba){this.$UFIController5.featuredCommentLists[aa]=new (c('UFIFeaturedReplyCommentList'))(r.ftentidentifier,aa,ba.values,s.comments);this.commentcounts[aa]=this.getReplyCommentList(aa).getCommentCount();this.replaceReplyRange(aa,c('UFIRange').combine(new (c('UFIRange'))(ba.range.offset,ba.range.length),this.replyRanges[aa]));}}this.$UFIController13=null;this.$UFIController14=null;this.ufiCentralUpdatesSubscriptions=[c('UFICentralUpdates').subscribe('feedback-updated',function(da,ea){var fa=ea.updates;if(r.ftentidentifier in fa){this.$UFIController5.payloadSource=ea.payloadSource;this.fetchAndUpdate(this.$UFIController5.payloadSource);}}.bind(this)),c('UFICentralUpdates').subscribe('feedback-id-changed',function(da,ea){var fa=r.ftentidentifier,ga=ea.updates;if(fa in ga){this.$UFIController4=babelHelpers['extends']({},r,{ftentidentifier:ga[fa]});r=this.$UFIController4;}}.bind(this)),c('UFICentralUpdates').subscribe('instance-updated',function(da,ea){var fa=ea.updates;if(r.instanceid in fa){var ga=fa[r.instanceid];if(ga.editcommentid||ga.inlineShare){this.$UFIController5.payloadSource=ea.payloadSource;if(this.canRenderHeader())this.renderHeader(this.$UFIController5.feedback);this.render();}}}.bind(this)),c('UFICentralUpdates').subscribe('actor-changed',function(da,ea){this.$UFIController15();}.bind(this))];this.pageletDestroySubscription=c('onEnclosingPageletDestroy')(this.root,function(){this.$UFIController9();this.$UFIController8();}.bind(this));this.ufiUIPageClearedSubscription=c('Arbiter').subscribe(c('UFIUIEvents').PageCleared,function(){this.$UFIController9();this.$UFIController8();}.bind(this));this.onUnloadSubscription=c('Run').onUnload(function(){return this.$UFIController16();}.bind(this));c('UFICentralUpdates').handleUpdate(k.INITIAL_SERVER,s);if(r.viewas)this.viewasUFICleanSubscription=c('Arbiter').subscribe('pre_page_transition',function(da,ea){if(r.viewas!==new (c('URI'))(ea.to).getQueryData('viewas'))c('UFIToplevelPagedCommentList').resetCommentListsForFeedbackTargetID(r.ftentidentifier);});if(this.$UFIController6()){var ca=null;if(s.comments&&s.comments.length>0)ca=s.comments[s.comments.length-1].fbid;c('UFILiveStreamingComments').start(r.ftentidentifier,u.commentcount,ca);}if(!r.lazyFetch&&!this.canRenderHeader())this.$UFIController17(u);this.$UFIController3('construct',k.INITIAL_SERVER);}p.prototype.$UFIController9=function(){var q=this.$UFIController10();if(q)c('ReactDOM').unmountComponentAtNode(q);c('ReactDOM').unmountComponentAtNode(this.root);};p.prototype.unitTestOnlySetFeedbackIntoState=function(q){this.$UFIController5.feedback=q;};p.prototype.$UFIController7=function(){if(!this.$UFIController18){this.$UFIController19=new (c('UFIDispatcher'))();this.$UFIController20={UFICallbackStore:new (c('UFICallbackStore'))(this.$UFIController19),UFIReactionStore:new (c('UFIReactionStore'))(this.$UFIController19)};this.$UFIController18=new (c('SubscriptionsHandler'))();this.$UFIController18.addSubscriptions(this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.CANCEL,function(){return this.$UFIController15();}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_LIKE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentLike(q.comment.id,q.like,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.CHANGE_REACTION,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').changeCommentReaction(q.comment.id,q.reactionType,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_PIN,function(q){return c('UFIUserActions').changeCommentPin(q.comment.id);}),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController21(q.comment,q.target,q.onConfirm);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EDIT,function(q){return this.$UFIController22(q.comment);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TRANSLATE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').translateComment(q.comment,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_MARK_AS_SPAM,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').setHideAsSpam(q.comment.id,q.is_spam,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.TOGGLE_INLINE_BAN,function(q){return c('UFIUserActions').banUser(q.comment,q.ownerid,q.is_banned,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.EMBED,function(q){this.$UFIController23(q.comment);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.TYPING_CHANGE,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIUserActions').typingChange(this.$UFIController4.ftentidentifier,q.state);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_NEW,function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFINewCommentNotifier').onNewComment(this.$UFIController24(),this.$UFIController4,q.comment,q.target,q.replyCommentID,q.timestamp);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.SUBMIT_EDIT,function(q){return this.$UFIController25(q.comment,q.commentData,q.target);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').COMMENT.REMOVE_PREVIEW,function(q){return c('UFIUserActions').removePreview(q.comment,{source:this.$UFIController4.source,target:q.target});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').ADD_COMMENT.RETRY_SUBMIT,function(q){return c('UFIRetryActions').retrySubmit(q.comment,{source:this.$UFIController4.source});}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.CHANGE_ORDER_MODE,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.orderingMode=q.mode;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.viewerHasInteractedWithComments=true;this.render();this.fetchAndUpdate(this.$UFIController5.payloadSource);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.PAGE_IN_COMMENTS,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController26(q.commentID,q.direction,new (c('UFIRange'))(q.nextRange.offset,q.nextRange.length));}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.TOGGLE_REPLIES,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController5.viewerHasInteractedWithComments=true;var r=q.commentID,s=this.$UFIController5.repliesExpandedMap[r];if(s){delete this.$UFIController5.isActiveLoading[r];this.$UFIController5.repliesExpandedMap[r]=false;this.render();}else this.$UFIController27(r,null);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.SHOW_REPLIES,function(q){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController27(q.commentID,q.initiatorComment);}.bind(this)),this.$UFIController20.UFICallbackStore.on(c('UFIActionTypes').STORY.COMMENTS_ARRIVED,function(q){this.$UFIController5.payloadSource=q.source;this.$UFIController5.showLoadingUFI=false;this.$UFIController5.isActiveLoading={};this.$UFIController5.commentIDToFocusOnMount=q.source===k.USER_ACTION?this.$UFIController28(q.newOffset,q.newLength):null;this.$UFIController5.oldRange={offset:q.newOffset,length:q.newLength};this.render();if(q.source==k.ENDPOINT_COMMENT_FETCH){c('Arbiter').inform(c('UFIUIEvents').CommentPager);if(c('UFIConfig').logCommentLoad)c('UFICommentLogger').logCommentFetchReceived(this.$UFIController4.ftentidentifier,Date.now());}}.bind(this)));}};p.prototype.getStores=function(){return this.$UFIController20;};p.prototype.$UFIController27=function(q,r){this.$UFIController5.viewerHasInteractedWithComments=true;this.$UFIController5.focusedReplyComposer={replyID:'replycomposer-'+q,initiatorComment:r};var s=this.commentcounts[q],t=Math.min(s,this.$UFIController4.pagesize),u=new (c('UFIRange'))(s-t,t);this.$UFIController26(q,l.BOTTOM,u);};p.prototype.$UFIController26=function(q,r,s){this.$UFIController5.viewerHasInteractedWithComments=true;var t=q!==this.$UFIController4.ftentidentifier;this.$UFIController5.isActiveLoading[q]=r;if(t){this.$UFIController5.repliesExpandedMap[q]=true;}else this.$UFIController5.hasPagedToplevel=true;if(q==this.$UFIController4.ftentidentifier){var u=this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0;this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]=u+1;this.getRange().updateRequestedRange(s.offset,s.length);}else{var v=this.$UFIController5.replyPagerClickCounts[q]||0;this.$UFIController5.replyPagerClickCounts[q]=v+1;this.replyRanges[q].updateRequestedRange(s.offset,s.length);}this.render();this.fetchAndUpdateWithLogs(this.$UFIController5.payloadSource);};p.prototype.$UFIController6=function(){if(this.$UFIController4.livevideographqlcomments)return false;if(!this.$UFIController4.isstreaming)return false;return true;};p.prototype.$UFIController24=function(){if(!this.$UFIController29)this.$UFIController29=c('Parent').byTag(this.root,'form');return this.$UFIController29;};p.prototype.$UFIController12=function(){if(!this.$UFIController4.disableinlinetoggle){this.$UFIController5.payloadSource=k.COLLAPSE_ACTION;this.$UFIController5.isHidden=!this.$UFIController5.isHidden;if(!this.$UFIController5.isHidden)this.$UFIController5.viewerHasInteractedWithComments=true;this.render();}};p.prototype.$UFIController22=function(q){this.$UFIController5.viewerHasInteractedWithComments=true;c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',true);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',q.id);};p.prototype.$UFIController25=function(q,r,s){this.$UFIController5.viewerHasInteractedWithComments=true;if(!r.visibleValue&&!r.attachedPhoto&&!r.attachedVideo&&!r.attachedSticker){this.$UFIController21(q,s,c('emptyFunction'));}else c('UFIUserActions').editComment(q.id,r.visibleValue,r.encodedValue,{source:this.$UFIController4.source,target:s,attachedPhoto:r.attachedPhoto,attachedVideo:r.attachedVideo,attachedSticker:r.attachedSticker});c('UFIInstanceState').updateStateField(this.$UFIController4.instanceid,'locallycomposed',q.id,true);this.$UFIController15();};p.prototype.$UFIController15=function(){c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'isediting',false);c('UFIInstanceState').updateState(this.$UFIController4.instanceid,'editcommentid',null);};p.prototype.$UFIController21=function(q,r,s){var t=c('UFICommentTemplates')[':fb:ufi:hide-dialog-template'].build();c('DOM').setContent(t.getNode('body'),i._("Are you sure you want to delete this comment?"));c('DOM').setContent(t.getNode('title'),i._("Delete Comment"));c('Bootloader').loadModules(["DialogX"],function(u){var v=new u({modal:true,width:465,addedBehaviors:[c('LayerRemoveOnHide')]},t.getRoot());v.subscribe('confirm',function(){c('UFIUserActions').removeComment(q.id,{source:this.$UFIController4.source,oneclick:false,target:r});s();v.hide();}.bind(this));v.show();}.bind(this));};p.prototype.$UFIController23=function(q){var r=c('XCommentEmbedPluginEmbedAsyncDialogController').getURIBuilder().setString('comment_id',q.id).getURI();new (c('AsyncRequest'))(r).send();};p.prototype.$UFIController30=function(){this.$UFIController5.payloadSource=k.USER_ACTION;this.$UFIController5.showLoadingUFI=true;this.$UFIController5.requestedInitialComments=true;var q=this.getToplevelCommentList().count,r=Math.min(q,this.$UFIController4.numLazyComments);c('forEachObject')(this.ranges,function(s){return s.updateRequestedRange(q-r,r);});this.fetchAndUpdate(this.$UFIController5.payloadSource);c('UFIFeedbackTargets').getFeedbackTarget(this.$UFIController4.ftentidentifier,function(s){if(this.canRenderHeader()){this.renderHeader(s);}else this.$UFIController17(s);}.bind(this));};p.prototype.$UFIController17=function(q){if(this.shouldShowCommentOrderingModeSelector(q))c('DOM').scry(this.root,"^form ._3csb").slice(0,1).forEach(function(r){c('ReactDOM').render(c('React').createElement(c('BootloadedComponent.react'),{bootloadPlaceholder:c('React').createElement('div',null),bootloadLoader:c('JSResource')('UFIOrderingModeSelector.react'),onOrderChanged:this.onCommentOrderingModeSelectorChange,feedback:q}),r);}.bind(this));};p.prototype.canRenderHeader=function(){var q=this.$UFIController10();if(!q)return false;return c('UFIConfig').reactActionLinks||q.children.length===0;};p.prototype.renderHeader=function(q){if(!this.canRenderHeader())return;var r=this.$UFIController4.hasReactions&&this.$UFIController4.feedbackMode==='none'&&q.displayreactions&&this.shouldShowCommentOrderingModeSelector(q)&&(!this.$UFIController4.lazyFetch||this.$UFIController5.requestedInitialComments);c('ReactDOM').render(c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('UFIActionLinks.react'),{root:this.root,contextArgs:this.$UFIController4,feedbacktarget:q,onCommentOrderingModeSelectorChange:this.onCommentOrderingModeSelectorChange,showCommentOrderingModeSelector:r,visibilityTogglerCallback:function(){return this.$UFIController12();}.bind(this)})),this.$UFIController10());};p.prototype.render=function(){var q=this.$UFIController5.payloadSource;this.$UFIController1('render',q);if(this.$UFIController5.showLoadingUFI){c('ReactDOM').render(this.$UFIController31(),this.root);this.$UFIController3('render',q);return;}var r=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'inlineShare')||{},s=this.comments.length||!c('isEmpty')((this.$UFIController5.feedback.reactionsentences||this.$UFIController5.feedback.likesentences).current);if((s&&o(q)||r.toggling)&&this.$UFIController4.feedbackMode!==m.NEVER){this.$UFIController5.isHidden=false;c('CommentPrelude').expand(this.root,false,'ufi_controller');}if(this.$UFIController4.disableCSSHiding&&this.$UFIController5.isHidden){this.$UFIController3('render',q);c('ReactDOM').unmountComponentAtNode(this.root);return;}if(this.$UFIController4.lazyFetch&&!this.$UFIController5.requestedInitialComments&&!r.active){c('ReactDOM').render(this.$UFIController31(),this.root);this.$UFIController3('render',q);this.$UFIController30();return;}var t=this.getRange();if(this.$UFIController13===null)this.$UFIController13=t.getOffset()+t.getLength()-1;var u=this.$UFIController5.feedback.replysocialsentencemaxreplies||-1,v={};v[this.$UFIController4.ftentidentifier]=new (c('UFIRange'))(t.offset,t.length).updateRequestedRange(t.requestedOffset,t.requestedLength);for(var w in this.replyRanges)v[w]=new (c('UFIRange'))(this.replyRanges[w].offset,this.replyRanges[w].length).updateRequestedRange(this.replyRanges[w].requestedOffset,this.replyRanges[w].requestedLength);var x=babelHelpers['extends']({},this.$UFIController5.defaultRepliesExpandedMap,this.$UFIController5.repliesExpandedMap),y=!!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier],z=this.$UFIController4.isstreaming?true:this.getToplevelCommentList().getClientHasAll()&&t.offset===0&&t.length===this.getToplevelCommentList().getCommentCount(),aa=this.$UFIController4.mayLogVPVs&&this.orderingMode===c('UFIConstants').UFICommentOrderingMode.FILTERED,ba=this.$UFIController32(q),ca=this.$UFIController5.viewerHasInteractedWithComments,da=c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,contextArgs:this.$UFIController4,repliesMap:this.repliesMap,commentCounts:this.commentcounts,deletedCounts:this.$UFIController5.deletedCounts,availableComments:this.comments,source:this.$UFIController4.source,ranges:v,authorProfiles:this.authorProfiles,loggingOffset:this.$UFIController13,replySocialSentenceMaxReplies:u,orderingMode:this.orderingMode,hideOrderingModeSelector:y,commentPermalinks:this.$UFIController5.commentPermalinks,canAddCommentMap:this.$UFIController5.canAddCommentMap,canReplyMap:this.$UFIController5.canReplyMap,focusReply:ba,inlineShare:r,isActiveLoading:this.$UFIController5.isActiveLoading,repliesExpandedMap:x,hasPagedToplevel:this.$UFIController5.hasPagedToplevel,commentIDToFocusOnMount:this.$UFIController5.commentIDToFocusOnMount,hideToplevelPager:z,shouldLogVPVs:aa,viewerHasInteractedWithComments:ca}));c('ReactDOM').render(da,this.root);c('LiveTimer').updateTimeStamps();if(this.$UFIController24())c('Arbiter').inform(c('UFIUIEvents').Changed,{form:this.$UFIController24()});if(q!=k.INITIAL_SERVER)c('Arbiter').inform('reflow');this.$UFIController5.focusedReplyComposer=null;this.$UFIController3('render',q);};p.prototype.$UFIController32=function(q){if(q===k.INITIAL_SERVER&&this.$UFIController5.feedback.permalinkcommentid){var r='replycomposer-'+this.$UFIController5.feedback.permalinkcommentid;return {replyID:r};}else if(this.$UFIController5.focusedReplyComposer)return this.$UFIController5.focusedReplyComposer;return null;};p.prototype.$UFIController28=function(q,r){var s=this.$UFIController5.oldRange;if(s.offset!=q||s.length!=r){var t=q<s.offset?s.length:0;if(t<r)return this.comments[t].id;}return this.$UFIController5.commentIDToFocusOnMount;};p.prototype.$UFIController33=function(q,r,s){if(r.id===q.permalinkcommentid)return true;if(s>1)return true;if(s>0&&r.interestingReplyOffset===undefined)return true;var t=r.author===q.viewerid;if(t&&s==1)return true;return false;};p.prototype.getNewRange=function(q,r,s){if(r.isstreaming){var t=r.feedcarded?4:50;return new (c('UFIRange'))(Math.max(0,s-t),Math.min(t,s));}else return n(this.getRange(),this.commentcounts[r.ftentidentifier],s,q);};p.prototype.getNewReplyRange=function(q,r,s,t){var u=r.id;if(this.replyRanges[u]){return n(this.getReplyRange(u),this.commentcounts[u],t,q);}else if(r.interestingReplyOffset!==undefined){return new (c('UFIRange'))(r.interestingReplyOffset,1);}else{var v=s.isranked?0:Math.min(t,2);return new (c('UFIRange'))(0,v);}};p.prototype.fetchAndUpdateWithLogs=function(q){!(q===this.$UFIController5.payloadSource)?j(0):void 0;this.$UFIController34(q,true);};p.prototype.fetchAndUpdate=function(q){!(q===this.$UFIController5.payloadSource)?j(0):void 0;this.$UFIController34(q,false);};p.prototype.$UFIController34=function(q,r){c('UFIFetcher').fetchNewFeedbackTarget(this.$UFIController4.ftentidentifier).done(function(s){this.$UFIController5.feedback=s;if(o(q))this.render();if(this.canRenderHeader())this.renderHeader(s);if(!this.$UFIController5.isHidden)this.fetchAllCommentsAndRender(q,r);}.bind(this));};p.prototype.fetchAllCommentsAndRender=function(q,r){this.fetchAllComments(q,r).done(function(){this.$UFIController19.dispatch(c('UFIStoryAction').commentsArrived(this.getRange().getOffset(),this.comments.length,q));}.bind(this));};p.prototype.fetchAllComments=function(q,r){return c('Promise').resolve().then(function(){return this.fetchCommentsForFeedbackTarget(q,r).then(function(s){var t=c('UFICommentFilters').getAuthors(s);if(!this.$UFIController5.feedback.isthreaded||!s.length)return t;return this.fetchAllReplyIDsForComments(s,q,r).then(function(u){return t.concat(u);});}.bind(this)).then(function(s){return (c('UFIFeedbackFilters').getRequestedIDs(this.$UFIController5.feedback).concat(s));}.bind(this));}.bind(this)).then(function(s){return c('UFIFetcher').fetchShortProfiles(s);}).then(function(s){this.authorProfiles=s;}.bind(this));};p.prototype.fetchCommentsForFeedbackTarget=function(q,r){var s=this.getToplevelCommentList().getCommentCount(),t=this.getNewRange(q,this.$UFIController4,s),u={numPagerClicks:r?this.$UFIController5.toplevelPagerClickCounts[this.orderingMode]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext,feedbackSource:this.$UFIController4.source};return c('UFIFetcher').fetchComments(this.getToplevelCommentList(),t,u).then(function(v){this.replaceRange(t);this.comments=v;this.commentcounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getCommentCount();this.$UFIController5.deletedCounts[this.$UFIController4.ftentidentifier]=this.getToplevelCommentList().getDeletedCount();this.$UFIController5.canAddCommentMap[this.$UFIController4.ftentidentifier]=!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier];v.forEach(function(w){this.$UFIController5.canReplyMap[w.id]=w.cancomment;this.$UFIController5.commentPermalinks[w.id]=this.getToplevelCommentList().getPermalinkForComment(w.id);}.bind(this));return v;}.bind(this));};p.prototype.fetchRepliesForComment=function(q,r,s){var t=q.id,u=this.getReplyCommentList(t).getCommentCount(),v=this.getNewReplyRange(r,q,this.$UFIController5.feedback,u),w={numPagerClicks:s?this.$UFIController5.replyPagerClickCounts[t]||0:null,viewAs:this.$UFIController4.viewas,feedContext:this.$UFIController4.feedcontext};return c('UFIFetcher').fetchComments(this.getReplyCommentList(t),v,w).then(function(x){this.replaceReplyRange(t,v);this.repliesMap[t]=x;this.commentcounts[t]=this.getReplyCommentList(t).getCommentCount();this.$UFIController5.deletedCounts[t]=this.getReplyCommentList(t).getDeletedCount();this.$UFIController5.canAddCommentMap[t]=!this.$UFIController5.featuredCommentLists[t];this.$UFIController5.defaultRepliesExpandedMap[t]=this.$UFIController33(this.$UFIController5.feedback,q,x.length);x.forEach(function(y){this.$UFIController5.canReplyMap[y.id]=y.cancomment;this.$UFIController5.commentPermalinks[y.id]=this.getReplyCommentList(t).getPermalinkForComment(y.id);}.bind(this));return x;}.bind(this));};p.prototype.fetchAllReplyIDsForComments=function(q,r,s){return new (c('Promise').all)(q.map(function(t){return this.fetchRepliesForComment(t,r,s).then(function(u){return c('UFICommentFilters').getAuthors(u);});}.bind(this))).then(function(t){return c('flattenArray')(t);});};p.prototype.getToplevelCommentList=function(){var q=this.$UFIController4;if(this.$UFIController5.featuredCommentLists[q.ftentidentifier])return this.$UFIController5.featuredCommentLists[q.ftentidentifier];return c('UFIToplevelPagedCommentList').getCommentList(q.ftentidentifier,this.orderingMode);};p.prototype.getReplyCommentList=function(q){if(q in this.$UFIController5.featuredCommentLists)return this.$UFIController5.featuredCommentLists[q];return c('UFIReplyCommentList').getCommentList(this.$UFIController4.ftentidentifier,q,this.orderingMode);};p.prototype.getRange=function(){if(!(this.orderingMode in this.ranges)){var q=this.getToplevelCommentList().getCommentCount(),r=Math.min(q,this.$UFIController4.defaultNumCommentsToExpand);this.ranges[this.orderingMode]=new (c('UFIRange'))(q-r,r);}return this.ranges[this.orderingMode];};p.prototype.replaceRange=function(q){this.ranges[this.orderingMode]=q;};p.prototype.getReplyRange=function(q){if(!(q in this.replyRanges))this.replyRanges[q]=new (c('UFIRange'))();return this.replyRanges[q];};p.prototype.replaceReplyRange=function(q,r){this.replyRanges[q]=r;};p.prototype.$UFIController8=function(){this.$UFIController35();this.$UFIController36();this.$UFIController37();this.$UFIController38();this.$UFIController39();if(this.onUnloadSubscription)this.onUnloadSubscription.remove();};p.prototype.$UFIController16=function(){this.$UFIController37();};p.prototype.$UFIController39=function(){var q=this.$UFIController4;c('UFILiveStreamingComments').stop(q.ftentidentifier);};p.prototype.$UFIController35=function(){this.ufiCentralUpdatesSubscriptions.forEach(function(q){return q&&c('UFICentralUpdates').unsubscribe(q);});};p.prototype.$UFIController36=function(){var q=[this.pageletDestroySubscription,this.viewasUFICleanSubscription,this.ufiUIPageClearedSubscription];q.forEach(function(r){try{r&&c('Arbiter').unsubscribe(r);}catch(s){}});this.pageletDestroySubscription=null;this.viewasUFICleanSubscription=null;this.ufiUIPageClearedSubscription=null;};p.prototype.$UFIController37=function(){var q=[this.liveLikeSubscription,this.liveCommentSubscription,this.liveVideoCommentSubscription,this.liveCommentLikeSubscription];q.forEach(function(r){return r&&r.unsubscribe();});};p.prototype.$UFIController38=function(){if(this.$UFIController18){this.$UFIController18.release();this.$UFIController18=null;}};p.prototype.$UFIController31=function(){var q=c('UFIInstanceState').getKeyForInstance(this.$UFIController4.instanceid,'inlineShare'),r=this.$UFIController4;return (c('React').createElement(c('UFIDispatcherContext.react'),{dispatcher:this.$UFIController19,stores:this.$UFIController20},c('React').createElement(c('StaticUFI.react'),{feedback:this.$UFIController5.feedback,id:this.$UFIController4.ftentidentifier,contextArgs:r,commentCounts:this.commentcounts,inlineShare:q,loadingComments:true})));};p.prototype.shouldShowCommentOrderingModeSelector=function(q){var r=this.getToplevelCommentList().getCommentCount()||q.commentcount||0;if(q.orderingmodes&&r>=c('UFIConstants').minCommentsForOrderingModeSelector&&!this.$UFIController5.featuredCommentLists[this.$UFIController4.ftentidentifier]){return true;}else return false;};p.prototype.onCommentOrderingModeSelectorChange=function(q){this.$UFIController19.dispatch(c('UFIStoryAction').changeOrderingMode(q));};f.exports=p;},null);
__d("cssURL",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){return "url('"+i.replace(/(\\|\s|\(|\)|'|\")/g,'\\$1')+"')";}f.exports=h;},null);
__d('MentionsTypeaheadViewItem.react',['cx','Badge.react','ImageBlock.react','React','TypeaheadViewItem','cssURL'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MentionsTypeaheadViewItem',mixins:[c('TypeaheadViewItem').Mixin],propTypes:babelHelpers['extends']({},c('TypeaheadViewItem').propTypes,{ariaDescribedBy:i.string}),render:function(){var k=this.props.entry,l=k.getAuxiliaryData(),m=null;if(l)if(l.verified){m=c('React').createElement(c('Badge.react'),{type:'verified',size:'xsmall'});}else if(l.workUser)m=c('React').createElement(c('Badge.react'),{type:'work',size:'xsmall'});var n=k.getPhoto()?c('React').createElement('span',{className:"_5u93",style:{backgroundImage:c('cssURL')(k.getPhoto())}}):c('React').createElement('span',null),o=null;if(k.getSubtitle())o=c('React').createElement('div',{className:"_5u95"},k.getSubtitle());var p="_5u91"+(this.props.highlighted?' '+"_5u92":'');return (c('React').createElement('li',{role:'option',className:p,'aria-label':k.getTitle(),'aria-selected':this.props.highlighted,'aria-describedby':this.props.ariaDescribedBy,onMouseDown:this._onSelect,onMouseEnter:this._onHighlight},c('React').createElement(c('ImageBlock.react'),{spacing:'medium'},n,c('React').createElement('div',null,c('React').createElement('div',{className:"_5u94"},k.getTitle(),m),o))));}});f.exports=j;},null);
__d('GroupMentionsTypeaheadView.react',['cx','fbt','ix','Image.react','MentionsTypeaheadViewItem.react','React','uniqueID'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=i._("No Results"),m=c('React').createClass({displayName:'GroupMentionsTypeaheadView',propTypes:{id:k.string,viewProps:k.object,highlightedEntry:k.object,entries:k.array.isRequired,onSelect:k.func.isRequired,onHighlight:k.func,onRenderHighlight:k.func},getInitialState:function(){return {emptyMembersHeaderID:c('uniqueID')(),membersHeaderID:c('uniqueID')(),nonMembersHeaderID:c('uniqueID')()};},_renderItem:function(n,o){var p=n===this.props.highlightedEntry;return (c('React').createElement(c('MentionsTypeaheadViewItem.react'),{key:n.getUniqueID(),ariaDescribedBy:o,entry:n,highlighted:p,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this._onRenderHighlight}));},_renderHashtagItem:function(n){var o=n===this.props.highlightedEntry;return (c('React').createElement(c('MentionsTypeaheadViewItem.react'),{key:n.getUniqueID(),entry:n,highlighted:o,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},_renderMembers:function(n){var o=null;if(n.length){o=n.map(function(r,s){var t=s===0?this.state.membersHeaderID:null;return this._renderItem(r,t);}.bind(this));}else o=[c('React').createElement('li',{className:"_2ph-",key:this.state.emptyMembersHeaderID,role:'option','aria-describedby':this.state.membersHeaderID,'aria-label':l},l)];var p=null;if(this.props.viewProps.member.aux)p=c('React').createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.member.aux);var q=[c('React').createElement('li',{key:this.state.membersHeaderID,className:"_1kns"},this.props.viewProps.member.title,p)];q.push.apply(q,o);return q;},_renderNonMembers:function(n){if(!n.length)return null;var o=null;if(this.props.viewProps.nonMember.aux)o=c('React').createElement('span',{className:"_1knr"},' \u00b7 ',this.props.viewProps.nonMember.aux);var p=[c('React').createElement('li',{key:this.state.nonMembersHeaderID,className:"_1kns"},c('React').createElement(c('Image.react'),{src:j('/images/groups/secret-tag.png'),className:"_1knt"}),this.props.viewProps.nonMember.title,o)];p.push.apply(p,n.map(function(q,r){var s=r===0?this.state.nonMembersHeaderID:null;return this._renderItem(q,s);}.bind(this)));return p;},render:function(){var n=[],o=[],p=[];this.props.entries.forEach(function(t){var u=t.getAuxiliaryData(),v=u.renderType;if(v==='member'){n.push(t);}else if(v==='hashtag'){p.push(t);}else o.push(t);});var q="_5u8_"+(!n.length&&!o.length&&!p.length?' '+"_5u90":''),r=n.length===0&&o.length===0&&p.length>0,s=r?this.props.entries.map(this._renderHashtagItem):this._renderMembers(n).concat(this._renderNonMembers(o));return (c('React').createElement('ul',{className:q,role:'listbox',id:this.props.id},s));}});f.exports=m;},null);
__d("XActorSelectorNuxSeenWriteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/actor_selector\/nux\/mark_seen\/",{nux_type:{type:"Enum",required:true,enumType:1}});},null);
__d('UFIActorSelector.react',['csx','fbt','ActorSelector.react','ActorSelectorNuxTypes','Arbiter','AsyncRequest','Parent','React','ReactDOM','SubscriptionsHandler','UFICentralUpdates','UFIFeedbackTargets','UFIUserActions','XActorSelectorNuxSeenWriteController'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('React').PropTypes,k='ufi_actor_selector_nux_disabled_event',l=c('React').createClass({displayName:'UFIActorSelector',propTypes:{actorIDs:j.array.isRequired,ftEntIdentifier:j.string.isRequired,isTimeline:j.bool,loading:j.bool,nuxEnabled:j.bool,settingsURI:j.string},getInitialState:function(){return {loading:false,nuxEnabled:this.props.nuxEnabled,nuxHoverContext:null,selectedActorID:null};},render:function(){return (c('React').createElement(c('ActorSelector.react'),{actorIDs:this.props.actorIDs,loading:this.props.loading||this.state.loading,nuxBody:this._getNUXBody(),nuxEnabled:this.state.nuxEnabled,nuxHoverContext:this.state.nuxHoverContext,onChange:this._onChange,onShowNux:this._onShowNux,onCompleteNux:this._onCompleteNux,selectedActorID:this.state.selectedActorID,settingsURI:this.props.settingsURI,tooltipConstructor:this._getTooltipForActorName}));},componentDidMount:function(){this._updateSelectedActorIDFromFeedbackTarget();this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('UFICentralUpdates').subscribe('feedback-updated',function(n,o){if(this.props.ftEntIdentifier in o.updates)this._updateSelectedActorIDFromFeedbackTarget();}.bind(this)),c('Arbiter').subscribe(k,function(){this.setState({nuxEnabled:false});}.bind(this)));var m=c('Parent').bySelector(c('ReactDOM').findDOMNode(this),"._5pcr");if(m)this.setState({nuxHoverContext:m});},componentWillUnmount:function(){this._subscriptions.release();},_updateSelectedActorIDFromFeedbackTarget:function(){c('UFIFeedbackTargets').getFeedbackTarget(this.props.ftEntIdentifier,function(m){this.setState({loading:false,selectedActorID:m.actorforpost});}.bind(this));},_getNUXBody:function(){return i._("Like, comment or share as yourself or as one of the Pages you manage.");},_getTooltipForActorName:function(m){return i._("Liking and commenting as {actorName}",[i.param('actorName',m)]);},_onChange:function(m){this.setState({loading:true});c('UFIUserActions').changeActor(this.props.ftEntIdentifier,m.value);},_onCompleteNux:function(){var m=this.props.isTimeline?c('ActorSelectorNuxTypes').UFI_TIMELINE:c('ActorSelectorNuxTypes').UFI,n=c('XActorSelectorNuxSeenWriteController').getURIBuilder().setEnum('nux_type',m).getURI();new (c('AsyncRequest'))().setURI(n).send();},_onShowNux:function(){c('Arbiter').inform(k);}});f.exports=l;},null);
__d('UFIMentionsInputProxy.react',['cx','Bootloader','React','emptyFunction','setImmediate'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').createClass({displayName:'UFIMentionsInputProxy',getInitialState:function(){return {component:null};},componentDidMount:function(){this._cmdBuffer=this._cmdBuffer||[];if(this.props.initialData)this._bootload();},componentDidUpdate:function(){if(this.state.component)this._drainFnBuffer();},hasEnteredText:function(){return this._fillCmdBuffer({fn:'hasEnteredText',args:[]});},focus:function(){this._bootload();this._fillCmdBuffer({fn:'focus',args:[]});},submitComment:function(event){this._fillCmdBuffer({fn:'submitComment',args:[event]});},insertMention:function(j){this._fillCmdBuffer({fn:'insertMention',args:[j]});},insertEmoticon:function(j){this._fillCmdBuffer({fn:'insertEmoticon',args:[j]});},_bootload:function(){c('Bootloader').loadModules(["UFIMentionsInput.react"],function(j){if(this.isMounted())this.setState({component:j});}.bind(this));},_shouldDrainBuffer:function(){return this._cmdBuffer.length>0;},_fillCmdBuffer:function(j){if(this.refs.mentionsinputchild){return this._execCmd(j);}else this._cmdBuffer=this._cmdBuffer.concat([j]);},_drainFnBuffer:function(){if(this._shouldDrainBuffer()){var j=this._cmdBuffer[0];this._execCmd(j);this._cmdBuffer=this._cmdBuffer.slice(1);c('setImmediate')(this._drainFnBuffer);}},_execCmd:function(j){var k=this.refs.mentionsinputchild;return k[j.fn].apply(k,j.args);},_renderProxyInput:function(){var j="_1osa mentionsHidden";return (c('React').createElement('input',{className:j,name:'add_comment_text',ref:'proxyInput',onFocus:this.focus}));},_renderDummy:function(){var j="UFIAddCommentInput _1osb _1osc";return (c('React').createElement('div',{onFocus:this.focus,onClick:this.focus,onTouchStart:c('emptyFunction'),onMouseOver:this._bootload},c('React').createElement('div',{className:j},this._renderProxyInput(),this.props.placeholder)));},render:function(){var j=this.state.component;if(!j)return this._renderDummy();return (c('React').createElement(j,babelHelpers['extends']({key:'mentionsinputchild',ref:'mentionsinputchild'},this.props),this.props.children));}});f.exports=i;},null);
__d('MentionsInputTypeaheadView.react',['cx','MentionsTypeaheadViewItem.react','React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=c('React').PropTypes,j=c('React').createClass({displayName:'MentionsInputTypeaheadView',propTypes:{id:i.string,highlightedEntry:i.object,entries:i.array.isRequired,onSelect:i.func.isRequired,onHighlight:i.func,onRenderHighlight:i.func},_renderItem:function(k){var l=k===this.props.highlightedEntry;return (c('React').createElement(c('MentionsTypeaheadViewItem.react'),{key:k.getUniqueID(),entry:k,highlighted:l,onSelect:this.props.onSelect,onHighlight:this.props.onHighlight,onRenderHighlight:this.props.onRenderHighlight}));},render:function(){var k="_5u8_"+(!this.props.entries.length?' '+"_5u90":'');return (c('React').createElement('ul',{className:k,role:'listbox',id:this.props.id},this.props.entries.map(this._renderItem)));}});f.exports=j;},null);
__d('MultiBootstrapDataSource',['DataSource'],function a(b,c,d,e,f,g){var h,i;if(c.__markCompiled)c.__markCompiled();h=babelHelpers.inherits(j,c('DataSource'));i=h&&h.prototype;function j(k){'use strict';i.constructor.call(this,k);this._bootstrapEndpoints=k.bootstrapEndpoints;}j.prototype.bootstrapWithoutToken=function(){'use strict';for(var k=0;k<this._bootstrapEndpoints.length;k++)this.fetch(this._bootstrapEndpoints[k].endpoint,this._bootstrapEndpoints[k].data||{},{bootstrap:true});};f.exports=j;},null);
__d('ReactComposerFocusMask.react',['cx','fbt','ix','Event','Image.react','Keys','React','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('React').PropTypes,l=c('React').createClass({displayName:'ReactComposerFocusMask',_subscriptions:c('SubscriptionsHandler'),propTypes:{onDismiss:k.func},getInitialState:function(){return {shown:false};},componentDidMount:function(){this._subscriptions=new (c('SubscriptionsHandler'))();this._subscriptions.addSubscriptions(c('Event').listen(document.body,'keydown',function(m){if(m.keyCode===c('Keys').ESC)this.props.onDismiss&&this.props.onDismiss();}.bind(this)));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){return (c('React').createElement('div',{className:"_l3q"+(this.state.shown?' '+"_l3r":''),onClick:this.props.onDismiss},c('React').createElement(c('Image.react'),{alt:i._("Close"),className:"_1lrh",src:j('/images/video/channel_view/close.png')})));},show:function(){this.setState({shown:true});},hide:function(){this.setState({shown:false});}});f.exports=l;},null);
__d('ReactComposerFocus',['cx','ReactComposerFocusMask.react','CSS','DOM','Event','React','ReactDOM','Run','SubscriptionsHandler'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={mask:null,container:HTMLElement,subscriptions:c('SubscriptionsHandler'),handler:function(j){i.container=j;i.subscriptions=new (c('SubscriptionsHandler'))();i.subscriptions.addSubscriptions(c('Event').listen(i.container,'click',this._showMask.bind(this)));c('Run').onLeave(this._cleanup.bind(this));},onPostSucceeded:function(){this._hideMask();},_initFocusMask:function(){var j=c('DOM').create('div');i.mask=c('ReactDOM').render(c('React').createElement(c('ReactComposerFocusMask.react'),{onDismiss:this._hideMask}),j);c('DOM').appendContent(document.body,j);},_cleanup:function(){this._hideMask();i.subscriptions.release();},_showMask:function(){if(!i.mask){this._initFocusMask();setTimeout(this._showMask.bind(this),0);return;}c('CSS').addClass(i.container,"_xng");i.mask&&i.mask.show&&i.mask.show();},_hideMask:function(){c('CSS').removeClass(i.container,"_xng");i.mask&&i.mask.hide&&i.mask.hide();}};f.exports=i;},null);
__d("XReactFeedComposerXBootloadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/react_composer\/feedx\/bootload\/",{composer_id:{type:"String",required:true},composer_type:{type:"Enum",required:true,enumType:1},friend_list_id:{type:"String"},section_id:{type:"String"},target_id:{type:"String",required:true}});},null);
__d('ReactFeedComposerX',['csx','cx','invariant','ReactComposerAttachmentType','ReactComposerFocus','Arbiter','AsyncRequest','ComposerEntryPointRef','CSS','DOM','Event','Run','SubscriptionsHandler','XReactComposerLoggingODSController','XReactFeedComposerXBootloadController','$'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();function k(l){this.$ReactFeedComposerX6=l.root;this.$ReactFeedComposerX2=l.composerID;this.$ReactFeedComposerX10=l.targetID;this.$ReactFeedComposerX3=l.composerType;this.$ReactFeedComposerX5=l.friendListID;this.$ReactFeedComposerX7=l.sectionID;this.$ReactFeedComposerX1=false;this.$ReactFeedComposerX4=c('DOM').find(this.$ReactFeedComposerX6,'form');this.$ReactFeedComposerX11=c('DOM').find(this.$ReactFeedComposerX6,"._3en1");this.$ReactFeedComposerX9=new (c('SubscriptionsHandler'))();this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(this.$ReactFeedComposerX6,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX11,'keydown',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(this.$ReactFeedComposerX4,'success',this.$ReactFeedComposerX13.bind(this)),c('Arbiter').subscribeOnce('ReactFeedComposerXBootloader/bootload/'+this.$ReactFeedComposerX2,this.$ReactFeedComposerX14.bind(this)));var m=c('DOM').find(this.$ReactFeedComposerX6,"._4d6h"),n=c('DOM').scry(m,'input[name="composer_photo[]"]')[0];if(n){this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(n,'click',this.$ReactFeedComposerX12.bind(this)),c('Event').listen(n,'change',this.$ReactFeedComposerX12.bind(this)));if(n.files&&n.files.length>0)this.$ReactFeedComposerX12();}this.$ReactFeedComposerX8=c('DOM').scry(this.$ReactFeedComposerX6,"._4-h7");this.$ReactFeedComposerX8.forEach(function(o){return this.$ReactFeedComposerX9.addSubscriptions(c('Event').listen(o,'click',this.$ReactFeedComposerX15.bind(this)));}.bind(this));if(l.gks&&l.gks.shouldBlurOnFocus)c('ReactComposerFocus').handler(c('$')('feedx_container'));c('Run').onLeave(this.$ReactFeedComposerX14.bind(this));}k.prototype.$ReactFeedComposerX15=function(l){var m=l.getTarget(),n=null;while(m){if(m.nodeType===1&&m.nodeName==='A'){n=m;break;}m=m.parentNode;}!(n!==null)?j(0):void 0;var o=c('CSS').hasClass(n,"._5qtn");if(o)return;this.$ReactFeedComposerX8.forEach(function(r){return c('CSS').removeClass(r,"_5qtn");});c('CSS').addClass(n,"_5qtn");var p=c('DOM').find(this.$ReactFeedComposerX6,"._559p"),q=c('DOM').find(this.$ReactFeedComposerX6,"._559q");switch(n.getAttribute('data-attachment-type')){case c('ReactComposerAttachmentType').STATUS:c('CSS').hide(q);c('CSS').show(p);break;case c('ReactComposerAttachmentType').MEDIA:case c('ReactComposerAttachmentType').QANDA:c('CSS').show(q);c('CSS').hide(p);break;}};k.prototype.$ReactFeedComposerX12=function(l){if(this.$ReactFeedComposerX1)return;this.$ReactFeedComposerX1=true;var m=c('XReactFeedComposerXBootloadController').getURIBuilder().setString('composer_id',this.$ReactFeedComposerX2).setString('target_id',this.$ReactFeedComposerX10).setEnum('composer_type',this.$ReactFeedComposerX3).setString('friend_list_id',this.$ReactFeedComposerX5).setString('section_id',this.$ReactFeedComposerX7).getURI();new (c('AsyncRequest'))(m).send();var n=c('XReactComposerLoggingODSController').getURIBuilder().setString('event','bootload_start').setEnum('composer_type',c('ComposerEntryPointRef').FEEDX).getURI();new (c('AsyncRequest'))(n).send();};k.prototype.$ReactFeedComposerX14=function(){this.$ReactFeedComposerX9.release();};k.prototype.$ReactFeedComposerX13=function(){this.$ReactFeedComposerX11.value='';this.$ReactFeedComposerX14();};f.exports=k;},null);
__d('FbFeedHighlight',['cx','JSXDOM','CSS','DOM','DOMScroll'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=1000,j=1000,k=null;function l(){return (c('JSXDOM').div({className:"_1usz"},c('JSXDOM').div({className:"_1us-"}),c('JSXDOM').div({className:"_1us_"}),c('JSXDOM').div({className:"_1ut0"}),c('JSXDOM').div({className:"_1ut1"})));}var m={highlightAndScrollTo:function(n){m.highlightAndScrollToWithTime(n,j);},highlightAndScrollToWithTime:function(n,o){m.highlightWithTime(n,o);m.scrollTo(n);},highlightSingle:function(n){m.highlightSingleWithTime(n,j);},highlightSingleWithTime:function(n,o){var p=l();c('DOM').appendContent(n,p);setTimeout(function(){if(k)c('DOM').remove(k);k=p;c('CSS').addClass(n,"_1ut2");},0);setTimeout(function(){c('CSS').removeClass(n,"_1ut2");setTimeout(function(){c('DOM').remove(p);if(p==k)k=null;},i+o);},i+o);},highlight:function(n){m.highlightWithTime(n,j);},highlightWithTime:function(n,o){var p=m.highlightPermanent(n);setTimeout(function(){c('CSS').removeClass(n,"_1ut2");setTimeout(c('DOM').remove.bind(null,p),i+i);},i+o);},highlightPermanent:function(n){var o=l();c('DOM').appendContent(n,o);setTimeout(c('CSS').addClass.bind(null,n,"_1ut2"),0);return o;},scrollTo:function(n){setTimeout(c('DOMScroll').scrollTo.bind(null,n),0);}};f.exports=m;},null);
__d('VideoFeedFastPreloadController',['Run','DOMQuery'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=0,i={preload:function(j){if(h<2){j=c('DOMQuery').scry(j,'video')[0];if(j instanceof b.HTMLVideoElement){if(!h)c('Run').onBeforeUnload(function(){return i.reset();});j.preload='auto';h+=1;}}},reset:function(){h=0;}};i.reset();f.exports=i;},null);
__d('VideoDashPrefetchCache',['Promise','getCrossOriginTransport','Deferred','Map','Run','URI','VideoPlayerShakaExperiments','XHRRequest'],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=null;function i(l){var m=new Error(l.errorMsg);m.name=l.errorType;return m;}function j(l,m,n){return {response:l.slice(m.start+0,m.end+1),responseTime:n};}function k(){'use strict';this.$VideoDashPrefetchCache1=new (c('Map'))();this.$VideoDashPrefetchCache2=[];this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=0;this.$VideoDashPrefetchCache5=c('VideoPlayerShakaExperiments').maxPrefetchVideosNum;this.$VideoDashPrefetchCache6=c('VideoPlayerShakaExperiments').consolidateFragmentedPrefetchRequest;}k.prototype.$VideoDashPrefetchCache7=function(l){'use strict';var m=new (c('XHRRequest'))(l).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),n=new (c('Promise'))(function(o,p){m.setErrorHandler(function(q){this.$VideoDashPrefetchCache8(m);p(i(q));}.bind(this));m.setResponseHandler(function(q){m.response=q;this.$VideoDashPrefetchCache8(m);o(m);}.bind(this));m.setAbortHandler(function(){p(n,new Error('Request promise aborted'));});}.bind(this));this.$VideoDashPrefetchCache9(l,n);this.$VideoDashPrefetchCache2.push(m);m.send();return n;};k.prototype.$VideoDashPrefetchCache10=function(l){'use strict';var m=[];for(var n=0;n<l.length;n++){var o=k.createQueryStringURL(l[n]);if(!this.has(o))m.push(this.$VideoDashPrefetchCache7(o));}return m;};k.prototype.$VideoDashPrefetchCache11=function(l){'use strict';var m=k.getConsolidatedURL(l);if(m===null)return this.$VideoDashPrefetchCache10(l);var n=new (c('XHRRequest'))(m).setMethod('GET').setResponseType('arraybuffer').setTransportBuilder(c('getCrossOriginTransport')),o=Date.now(),p=[];for(var q=0;q<l.length;q++){var r=k.createQueryStringURL(l[q]),s=new (c('Deferred'))();if(!this.has(r))this.$VideoDashPrefetchCache9(r,s.getPromise());p.push(s);}n.setErrorHandler(function(t){this.$VideoDashPrefetchCache8(n);for(var u=0;u<p.length;u++)p[u].reject(i(t));}.bind(this));n.setResponseHandler(function(t){var u=Date.now()-o;for(var v=0;v<l.length;v++){var w=p[v],x=l[v];w.resolve(j(t,x,u));}this.$VideoDashPrefetchCache8(n);}.bind(this));n.setAbortHandler(function(){for(var t=0;t<l.length;t++){var u=p[t];u.reject(new Error('Request aborted.'));}});this.$VideoDashPrefetchCache2.push(n);n.send();return p.map(function(t){return t.getPromise();});};k.prototype.$VideoDashPrefetchCache12=function(l){'use strict';this.$VideoDashPrefetchCache4++;var m=this.$VideoDashPrefetchCache6?this.$VideoDashPrefetchCache11(l.video):this.$VideoDashPrefetchCache10(l.video),n=this.$VideoDashPrefetchCache6?this.$VideoDashPrefetchCache11(l.audio):this.$VideoDashPrefetchCache10(l.audio);c('Promise').all(m.concat(n)).then(function(){return this.$VideoDashPrefetchCache13();}.bind(this))['catch'](function(){return this.$VideoDashPrefetchCache13();}.bind(this));};k.prototype.$VideoDashPrefetchCache9=function(l,m){'use strict';if(this.$VideoDashPrefetchCache1.values().next().done)c('Run').onLeave(function(){for(var n=0;n<this.$VideoDashPrefetchCache2.length;n++)this.$VideoDashPrefetchCache2[n].abort();this.$VideoDashPrefetchCache2=[];this.$VideoDashPrefetchCache3=[];this.$VideoDashPrefetchCache4=0;this.$VideoDashPrefetchCache1.clear();}.bind(this));this.$VideoDashPrefetchCache1.set(l,m);};k.prototype.$VideoDashPrefetchCache8=function(l){'use strict';var m=this.$VideoDashPrefetchCache2.indexOf(l);if(m>-1)this.$VideoDashPrefetchCache2.splice(m,1);};k.prototype.$VideoDashPrefetchCache13=function(){'use strict';this.$VideoDashPrefetchCache4--;var l=this.$VideoDashPrefetchCache3.shift();if(l)this.$VideoDashPrefetchCache12(l);};k.prototype.has=function(l){'use strict';return this.$VideoDashPrefetchCache1.has(l);};k.prototype.getAndDelete=function(l){'use strict';var m=this.$VideoDashPrefetchCache1.get(l);this.$VideoDashPrefetchCache1['delete'](l);return m;};k.prototype.queueRequestBatch=function(l){'use strict';if(this.$VideoDashPrefetchCache5===0||this.$VideoDashPrefetchCache4<this.$VideoDashPrefetchCache5){this.$VideoDashPrefetchCache12(l);}else this.$VideoDashPrefetchCache3.push(l);};k.getInstance=function(){'use strict';if(h===null)h=new k();return h;};k.createQueryStringURL=function(l){'use strict';var m=l.url,n=l.start,o=l.end;if(n!==null&&n!==undefined&&o!==null&&o!==undefined)m=new (c('URI'))(m).addQueryData({bytestart:n,byteend:o});return m.toString();};k.getConsolidatedURL=function(l){'use strict';var m='',n=Infinity,o=0;for(var p=0;p<l.length;p++){var q=l[p],r=q.url,s=q.start,t=q.end;if(r==null||s==null||t==null)return null;if(m===''){m=r;}else if(m!==r)return null;n=Math.min(n,s);o=Math.max(o,t);}return k.createQueryStringURL({url:m,start:n,end:o});};k.loadVideo=function(l){'use strict';var m=k.getInstance();m.queueRequestBatch({video:l.video,audio:l.audio});};k.getCacheValue=function(l){'use strict';return k.getInstance().getAndDelete(l);};f.exports=k;},null);